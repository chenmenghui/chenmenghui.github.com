---
title: 小程序实现跑马灯效果
date: 2018-12-4
categories: 小程序
tags: 
- 小程序
- 实用代码片段
---

之前也是做过跑马灯的效果.不过因为小程序无法直接操作demo,所以给我的开发带来了一定的困扰.还好百度到了[这个](https://www.jianshu.com/p/6a354bf8b01f)

其实那个文章已经说得很清楚了.

看看我的代码吧

```html
<view class="notice-area flex-row-around-center">
    <i class="iconfont icon-gonggao"></i>
    <view>公告</view>
    <view class='scroll_view_border'>
        <view class="srcoll_view" style="--marginLeft--:{{ad_length}}">{{memberInfo.shop_ad != null ? memberInfo.shop_ad : ''}}</view>
    </view>
</view>
```

```css
/*notict-area*/
.notice-area{
    margin-top: 20rpx;
    padding: 0 30rpx;
    border-bottom: 1px solid #f2f2f2;
}
.notice-area .icon-gonggao{
    color: #FC9E46;
}
.scroll_view_border{
    position: relative;
    width: 80%;
    height: 100rpx;
    overflow: hidden;
}
.srcoll_view{
    position: absolute;
    top:0rpx;
    height: 100rpx;
    font-size: 30rpx;
    white-space: nowrap;
    line-height: 100rpx;
    animation:myfirst 10s linear infinite;
    background-color: red;
}
@keyframes myfirst
{
    0% {margin-left:552rpx;}
    100% {margin-left:var(--marginLeft--);}
}
```
```js
var memberInfo = res.data;
var ad_length = 0;
if (memberInfo.shop_ad != null && memberInfo.shop_ad != '') {
    ad_length = '-' + memberInfo.shop_ad.length * 30 + 'rpx';
}
that.setData({
    ad_length: ad_length,
    memberInfo: res.data,
})
```

其中需要注意的也只有这个了:

小程序是可以修改wxss中的值的.如上述wxss代码中的 var(--marginLeft--).不过这里的值是通过wxml获取的.而wxml又是通过js获取.

另外注意,在wxss中的`var(--marginLeft--)`不能写成`-var(--marginLeft--)`
wxml中的`style="--marginLeft--:{{ad_length}}"`不能写成`style="--marginLeft--:'{{ad_length}}'"`
