---
title: 正则在开发中遇到的坑
date: 2019-12-27 09:29:42
categories: 正则
tags: 
- 正则
- 实用代码片段
---

### 非m模式下匹配范围内「如引号」包括\n在内所有的字符

一开始使用/[.\n]/发现匹配失败，改用了/(.|\n)/才成功。

后来在编辑器内测试，发现/[.]/匹配的只有字符英文句号「.」,而不是匹配的是除了换行符「\n」以外的所有字符。

然后才知道，原来/[\s\S]/之类的都可以满足匹配所有字符包括换行的需求。如果使用/(.|\n)/反而会收到文件换行符的干扰，需写成/(.|\r\n|\r|\n)/。

### PHP中模式分隔符不是必须的

诚然，直接写在注入preg_replace()第一个参数位置时是需要使用模式分隔符的。但使用变量引用的话可以忽略。
```php
$sContent = ''; // 匹配对象
$pattern = "<input.*?type=\"hidden\".*?name=\"unitid\".*?value=\"(?<unitid>.*?)\">";
if (preg_match_all($pattern, $sContent, $match)) {
    return $match['unitid'];
} else {
    return false;
}
```
像上面这样。不过这也应该不是什么好习惯~~~

### 
