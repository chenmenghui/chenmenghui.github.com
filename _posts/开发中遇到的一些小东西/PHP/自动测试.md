---
title: 自动测试
date: 2019-12-31
categories: PHP
tags: 
- PHP
- behat
---

说起来也不知道自己是怎么看的，不会查找自己需要的资料。然后三天时间，终于大致知道behat的概念了。
花了那么长的时间，也就收获了这么少的东西，我都有些过意不去。

昨天晚上，前同事（前端）问我打印机的是。我就甩手一个网站，然后一个小时多点，她那边的后台就搞定了。这个速度也实在是太快了。

想到以前我调试支付宝支付的时候，硬生生的花了一个多星期，还没有搞定——就是那个密匙。说起来也太不应该了。

behat大致就是把自然语言转化成代码。
但其实这个「自然语言」也是实现编辑好的方法。
比如在.feature中使用
```feautre
Feature: Search

  Scenario: Searching for a page that does exist
    Given open "https://www.baidu.com"
```
其实就是看Given中的open，就需要在FeatureContext.php文件定义好这个方法
```php
/**
 * @Given open :arg1
 */
public function open($arg1)
{
    file_put_contents('feature.txt', var_export($arg1, 1));
}
```
需要注意的是，这其中对应方法其实是包含在注释中的。方法名反而不重要。比如可以这个样子
```php
/**
 * @Given open :param
 */
public function test($arg1)
{
    file_put_contents('feature.txt', var_export($arg1, 1));
}
```
当然，这不是什么重要的东西，即便不知道，在开发的过程中稍稍试一试便知道了。

注意注释的三个部分

| 注释部分 | 对应.feature中Given open "https://www.baidu.com"的？ |
| --- | --- |
| @Given | Given |
| open   | 操作open |
| :param | 引号中的内容 |

设置好对应在FeatureContext.php中的方法，就可以操作selenium、phpunit之类的工具了。

至于那些类，应该都可以在composer找得到。