---
title: PHP之《深入PHP面向对象、模式与实践》
date: 2018/10/3
categories: 
- 图书
- 深入PHP面向对象、模式与实践
tags: 
- PHP
- 图书
---

# 对象基础  

本章主要内容有
- 类和对象:声明类及实例化对象
- 构造方法:自动加载对象
- 基本数据类型和类的类型:
- 继承:为什么需要继承和如何是用继承
- 可见性:整合对象接口并保护类中的方法和属性不受干涉

## 类和对象

### 编写第一个类

```php
class ShopProduce {
    // todo
}
```
简单的说,类是用于生成对象的代码模板.使用class关键字和一个任意的类名来声明类.类名可以是任意数字和字母的组合,但不能以数字开头.和一个类关联的代码必须用大括号括起来.

### 第一个对象(或两个)

如果类是声明对象的模板,那么对象是根据类中定义的模板所构造的数据.对象可以被说成类的"实例",它是由类定义的数据类型.

```php
$product1 = new ShopProducee
var_dump($product1); // 可以看到包含对象ID的字符串
```

## 设置类中的属性

> 类的属性和标准的变量很相似,不过必须在声明和赋值前加一个代表可见性的关键字.这个关键字可以是public,protected或private,它决定了属性的作用域.

类可以定义被称为属性的特定变量.属性也称为成员变量,用来存放对象之间互不相同的数据.

虽然php并没有强制所有的属性都要在类中声明,但是那种动态地增加属性到对象的方式并不值得推荐.比如:
- 特定意义不明显,难以及时发现属性中语法之外的错误
- 类太过松散,因为属性都是在客户端代码中实现的
- 不得不重复做出一些经常做的事情

## 使用方法

> function关键字在方法名之前.方法名之后的圆括号是可选的参数列表.方法体用大括号括起来

属性可以让对象存储数据,类方法则可以让对象执行任务.方法是类中声明的特殊函数.

## 参数和类型

数据类型决定了PHP代码中处理数据的方式----从更高层次的意义上来说,每个类都定义一种数据类型.

在PHP中,定义方法和函数时不需要指定参数的数据类型,在便利的同时,也带来了一些隐患.在需要特殊指定类型的场合,这种便利会带来一些隐患

### 基本类型

需要时刻留意代码中的数据类型,比如"false"和false两者结果相反的解析可能会导致截然不同的结果.解决这种问题的方法总结如下
- 检测类型
- 转换类型
- 依赖良好清晰的文档(无论哪种模式,都需要这个)
无论如何解决这类问题,都要认真考虑一件事情:类型处理.PHP是一种弱类型的语言.我们不能依赖编译器来防止类型相关的bug,必须考虑当非法数据类型的参数传递给方法是,会产生什么样的后果.我们不能完全信任客户端程序员,应始终在方法中处理他们引入的无用信息.

### 获得提示:对象类型

```php
public function write(ShopProduct $shopProduct) { 
    // todo
}

最新的php7也可以把string之类东西作为类型提示.刚刚说的处理这类问题需要#检测类型#,#转化类型#或#良好的文档#,现在就会通过直接指定解决了.

需要注意的是,虽然自动类型检查是防止bug的极佳途径,但是自动类型检查实在代码运行的时候才能生效.

## 继承

# 高级特性

本章的主要内容有:
- 静态方法和属性:通过类而不是对象来获取数据和功能
- 抽象类和接口:设计和实现相分离
- 错误处理:异常
- Final类和方法:限制继承
- 拦截器方法:自动委托
- 析构方法:对象销毁前的清理工作
- 克隆对象:创建对象的副本
- 把对象解析成字符串:创建摘要型方法
- 回调:用匿名函数为组件添加功能

# 对象工具

本章主要内容:
- 包:将代码按逻辑分类打包
- 命名空间
- 包含路径:为类库代码设置访问路径
- 类函数和对象函数:测试对象,类,属性和方法的函数
- 反射API:一组强大的内置类,可以在代码运行时访问类信息

# 对象与设计

本章内容:
- 设计基础:设计是什么?面向对象设计和过程式编程有什么不同?
- 类的内容:如果决定一个类应该包含什么
- 封装:在类接口后面隐藏实现和数据
- 多态:使用一个共同的父类,允许在运行是透明地替换特定的子类
- UML

# 什么是设计模式?为什么使用它们

本章内容:
- 模式基础:什么是设计模式
- 模式结构:每个设计模式的关键元素
- 模式收益:为何模式值得花时间学习

# 模式原则

本章内容:
- 组合:如果通过聚合对象来获得比只是用继承更好的灵活性
- 解耦:如何降低系统中元素的依赖性
- 接口的作用:模式和多态
- 模式分类:模式类别

# 