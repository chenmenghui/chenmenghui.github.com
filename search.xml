<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>C++基本语法</title>
    <url>/posts/16665.html</url>
    <content><![CDATA[<h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><p>C++程序可以定义为对象的集合,这些对象通过调用彼此的方法进行交互.</p>
<ul>
<li>对象 对象具有状态和行为</li>
<li>类 类可以定义为描述对象&#x2F;行为的状态&#x2F;蓝图</li>
<li>方法 一个方法表示一个行为.一个类可以有多个方法.可以在方法中写入逻辑\操作数据以及执行所有的动作</li>
<li>即使变量 每个对象都有其独特的即使变量.对象的状态是有这些即使变量的值创建的</li>
</ul>
<h1 id="程序结构"><a href="#程序结构" class="headerlink" title="程序结构"></a>程序结构</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>   <span class="comment">// C++定义的一些头文件,这些头文件包含了程序中必须的或有用的信息</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; <span class="comment">// 命名空间</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> <span class="comment">// 主函数 程序开始的地方</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello world&quot;</span>; <span class="comment">// print</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// 终止main()函数,并向调用进程返回值0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="编译-amp-执行程序"><a href="#编译-amp-执行程序" class="headerlink" title="编译&amp;执行程序"></a>编译&amp;执行程序</h1><ul>
<li>打开一个文本编辑器,添加上述代码</li>
<li>保存文件</li>
<li>打开命令行,进入文件所在目录</li>
<li>键入’g++ hello.cp’,输入回车,编译代码.若代码没有错误,命令提示符会跳到下一行,并生成a.out可执行文件</li>
<li>键入’a.out’运行</li>
<li>可看到输出结果</li>
</ul>
<h1 id="分号-amp-语句块"><a href="#分号-amp-语句块" class="headerlink" title="分号&amp;语句块"></a>分号&amp;语句块</h1><p>‘;’是语句结束符<br>语句块是一组大括号括起来的按逻辑链接的语句</p>
<h1 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h1><p>标识符用来标识变量 函数 类 模块或其他用户自定义项目的名称,和php一样</p>
<h1 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h1><table>
<thead>
<tr>
<th>保留字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>asm</td>
<td>指令字符串:允许程序中嵌入汇编代码</td>
</tr>
<tr>
<td>auto</td>
<td>自动:存储类型标识符,表示变量”自动”具有本地范围,块范围的变量声明默认为auto存储类型</td>
</tr>
<tr>
<td>bool</td>
<td>布尔类型</td>
</tr>
<tr>
<td>break</td>
<td>跳出,用于switch或循环语句中</td>
</tr>
<tr>
<td>case</td>
<td>用于switch语句中,判断条件类</td>
</tr>
<tr>
<td>catch</td>
<td>和try一起用于异常处理</td>
</tr>
<tr>
<td>char</td>
<td>字节类型</td>
</tr>
<tr>
<td>class</td>
<td>类</td>
</tr>
<tr>
<td>const</td>
<td>常量</td>
</tr>
<tr>
<td>continue</td>
<td>循环语句,跳出当前循环</td>
</tr>
<tr>
<td>default</td>
<td>用于switch中</td>
</tr>
<tr>
<td>delete</td>
<td>释放程序动态申请的内存</td>
</tr>
<tr>
<td>do</td>
<td>循环</td>
</tr>
<tr>
<td>double</td>
<td>双精度</td>
</tr>
<tr>
<td>else</td>
<td>if</td>
</tr>
<tr>
<td>enum</td>
<td>枚举</td>
</tr>
<tr>
<td>explicit</td>
<td></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL机读顺序</title>
    <url>/posts/64199.html</url>
    <content><![CDATA[<p><a href="https://blog.csdn.net/u014044812/article/details/51004754/">关于sql和MySQL的语句执行顺序</a></p>
<ol>
<li><p>FROM <left_table></p>
</li>
<li><p>ON <join_condition></p>
</li>
<li><p><join_type> JOIN <right_table></p>
</li>
<li><p>WHERE <where_condition></p>
</li>
<li><p>GROUP BY <group_by_list></p>
</li>
<li><p>HAVING <having_condition></p>
</li>
<li><p>select</p>
</li>
<li><p>DISTINCT <select_list></p>
</li>
<li><p>ORDER BY <order_by_condition></p>
</li>
<li><p>LIMIT <limit_number></p>
</li>
</ol>
<h3 id="having"><a href="#having" class="headerlink" title="having"></a>having</h3><p>The SQL standard requires that HAVING must reference only columns in the GROUP BY clause or columns used in aggregate functions. However, MySQL supports an extension to this behavior, and permits HAVING to refer to columns in the SELECT list and columns in outer sub-queries as well.</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>设计模式 之 单例模式</title>
    <url>/posts/698c4f9c.html</url>
    <content><![CDATA[<span id="more"></span>]]></content>
      <categories>
        <category>设计模式</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
      </tags>
  </entry>
  <entry>
    <title>MySql Between</title>
    <url>/posts/45672.html</url>
    <content><![CDATA[<p>一直下意识的认为 between 只针对一个范围，但其实 between 是可以有好几个范围的。</p>
<p>像这样</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> test_range</span><br><span class="line">(</span><br><span class="line">    id    <span class="type">int</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">    <span class="keyword">start</span> <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">    <span class="keyword">end</span>   <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">) ENGINE innodb</span><br><span class="line">  CHARSET utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_range (<span class="keyword">start</span>, <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="number">5</span>),</span><br><span class="line">       (<span class="number">10</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> test_value</span><br><span class="line">(</span><br><span class="line">    id    <span class="type">int</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">    <span class="keyword">value</span> <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">) ENGINE innodb</span><br><span class="line">  CHARSET utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_value(<span class="keyword">value</span>)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>),</span><br><span class="line">       (<span class="number">2</span>),</span><br><span class="line">       (<span class="number">3</span>),</span><br><span class="line">       (<span class="number">4</span>),</span><br><span class="line">       (<span class="number">5</span>),</span><br><span class="line">       (<span class="number">6</span>),</span><br><span class="line">       (<span class="number">7</span>),</span><br><span class="line">       (<span class="number">8</span>),</span><br><span class="line">       (<span class="number">9</span>),</span><br><span class="line">       (<span class="number">10</span>),</span><br><span class="line">       (<span class="number">11</span>),</span><br><span class="line">       (<span class="number">12</span>),</span><br><span class="line">       (<span class="number">13</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tv.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test_value tv</span><br><span class="line"><span class="keyword">JOIN</span> test_range tr <span class="keyword">ON</span> tv.value <span class="keyword">BETWEEN</span> tr.start <span class="keyword">AND</span> tr.end</span><br><span class="line"><span class="keyword">WHERE</span> tr.id <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"># 等价于</span><br><span class="line"><span class="keyword">SELECT</span> tv.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test_value tv</span><br><span class="line"><span class="keyword">JOIN</span> test_range tr <span class="keyword">ON</span> tv.value <span class="operator">&gt;=</span> tr.start <span class="keyword">AND</span> tv.value <span class="operator">&lt;=</span>tr.end</span><br><span class="line"><span class="keyword">WHERE</span> tr.id <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySql表分区</title>
    <url>/posts/20513.html</url>
    <content><![CDATA[<h3 id="什么是表分区"><a href="#什么是表分区" class="headerlink" title="什么是表分区"></a>什么是表分区</h3><p>分区是将一个大表,根据条件分割成若干个小表.mysql5.1开始支持表分区,5.5支持表分区的所有函数</p>
<h3 id="为什么要对表进行分区"><a href="#为什么要对表进行分区" class="headerlink" title="为什么要对表进行分区"></a>为什么要对表进行分区</h3><blockquote>
<p>为了改善大型表以及具有各种访问模式的表的可伸缩性,客观理性和提高数据库效率</p>
</blockquote>
<p>分区的一些优点包括</p>
<ul>
<li>与单个磁盘或文件系统相比,可以存储更多的数据</li>
<li>通过删除与增加那些数据有关的分区,很容易地删除或增加那些数据(比如直接truncate一张表比delete where快多了)</li>
<li>一些查询可以得到极大的优化</li>
<li>通过跨多个磁盘甚至服务器来分散数据查询,来获得更高的查询吞吐量</li>
<li>MySql5.5之后支持所有函数的分区优化</li>
</ul>
<h3 id="基本分区类型"><a href="#基本分区类型" class="headerlink" title="基本分区类型"></a>基本分区类型</h3><h4 id="RANGE分区"><a href="#RANGE分区" class="headerlink" title="RANGE分区"></a>RANGE分区</h4><ul>
<li>基于属于一个给定连续区间的列值,把多行分配给分区</li>
<li>这些区间要连续且不能相互重叠,使用values less than操作符来进行定义<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ALERT <span class="keyword">TABLE</span> titles</span><br><span class="line"><span class="keyword">partition</span> <span class="keyword">by</span> <span class="keyword">range</span>(<span class="keyword">year</span>(from_date))</span><br><span class="line">(</span><br><span class="line">  partion p01 <span class="keyword">values</span> less than (<span class="number">1985</span>),</span><br><span class="line">  partion p02 <span class="keyword">values</span> less than (<span class="number">1995</span>),</span><br><span class="line">  partion p03 <span class="keyword">values</span> less than (<span class="number">2005</span>),</span><br><span class="line">  partion p04 <span class="keyword">values</span> less than (<span class="number">2015</span>),</span><br><span class="line">  partion p05 <span class="keyword">values</span> less than (MAXVALUE),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t1</span><br><span class="line">(</span><br><span class="line">  id   <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  age  <span class="type">int</span></span><br><span class="line">)</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span> (age)</span><br><span class="line">    (</span><br><span class="line">    <span class="keyword">PARTITION</span> p01 <span class="keyword">VALUES</span> LESS THAN (<span class="number">10</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p02 <span class="keyword">VALUES</span> LESS THAN (<span class="number">20</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p03 <span class="keyword">VALUES</span> LESS THAN (<span class="number">30</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p04 <span class="keyword">VALUES</span> LESS THAN (MAXVALUE)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="LIST分区"><a href="#LIST分区" class="headerlink" title="LIST分区"></a>LIST分区</h4><ul>
<li>类似于按RANGE分区,区别在于LIST分区是基于列值匹配一个离散值集合中的某个值来进行选择</li>
<li>LIST分区通过使用”partition by list(expr)”来实现,其中”expr”是某列值或一个基于某个列值并返回一个证书的表达式,然后通过”value in (value_list)”的方式来定义每个分区,其中”value_list”是一个通过通过逗号分隔的整数列表</li>
<li>在MySQL5.1中,list分区默认只能匹配整数表.现在5.5已经解决<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t2</span><br><span class="line">(</span><br><span class="line">  id       <span class="type">int</span>,</span><br><span class="line">  cid      <span class="type">int</span>,</span><br><span class="line">  NAME     <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">  pos_date datetime</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> LIST (cid)</span><br><span class="line">    (</span><br><span class="line">    <span class="keyword">PARTITION</span> p01 <span class="keyword">VALUES</span> <span class="keyword">IN</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p02 <span class="keyword">VALUES</span> <span class="keyword">IN</span> (<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p03 <span class="keyword">VALUES</span> <span class="keyword">IN</span> (<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="HASH分区"><a href="#HASH分区" class="headerlink" title="HASH分区"></a>HASH分区</h4><ul>
<li>基于用户定义的表达式的返回值来进行选择的分区,该表达式使用将要插入到表中的这些行的列值进行计算.这个表达式可以包含MySQL中有效的,产生非负整数值的任何表达式</li>
<li>使用HASH分区的优点在于数据分布较为均匀</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t3</span><br><span class="line">(</span><br><span class="line">  id       <span class="type">int</span>,</span><br><span class="line">  cid      <span class="type">int</span>,</span><br><span class="line">  name     <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  pos_date datetime</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> HASH (cid)</span><br><span class="line">    PARTITIONS <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h4 id="linear-hash分区"><a href="#linear-hash分区" class="headerlink" title="linear hash分区"></a>linear hash分区</h4><ul>
<li>线性与常规哈希的区别在于,线性哈希功能使用的一个线性的2的幂(powers-of-two)运算规则,而常规哈希使用的时求哈希函数值的模数.</li>
<li>按照线性哈希分区的优点在于增加 删除 合并 和 拆分分区将变得更加快捷,有利于处理含有极大量(1t)数据的表.不过,mysql的线性哈希算法导致相比较常规哈希,数据可能分布的不那么均匀,容易产生”hotspot nodes”<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t3</span><br><span class="line">(</span><br><span class="line">  id       <span class="type">int</span>,</span><br><span class="line">  cid      <span class="type">int</span>,</span><br><span class="line">  name     <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  pos_date datetime</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> linear HASH (cid)</span><br><span class="line">    PARTITIONS <span class="number">4</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="KEY分区"><a href="#KEY分区" class="headerlink" title="KEY分区"></a>KEY分区</h3><ul>
<li>类似于哈希分区,哈希分区使用的用户定义的表达式,而key分区的哈希函数是由mysql服务器提供.mysql簇(cluster)使用函数md5()来实现key分区;对于使用其他存储引擎的表,服务器使用其自己内部的哈希函数.这些函数时基于password()一样的运算法则</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t4</span><br><span class="line">(</span><br><span class="line">  id       <span class="type">int</span>,</span><br><span class="line">  cid      <span class="type">int</span>,</span><br><span class="line">  name     <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  pos_date datetime</span><br><span class="line">)</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> [linear] KEY (cid)</span><br><span class="line">    PARTITIONS <span class="number">4</span>;</span><br></pre></td></tr></table></figure>

<h3 id="多列分区"><a href="#多列分区" class="headerlink" title="多列分区"></a>多列分区</h3><ul>
<li>columns关键字允许字符串和日期列作为分区定义列,同时还允许使用多个列定义一个分区</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t5</span><br><span class="line">(</span><br><span class="line">  id       <span class="type">int</span>,</span><br><span class="line">  cid      <span class="type">int</span></span><br><span class="line">)</span><br><span class="line">  <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span> COLUMNS (id, cid)</span><br><span class="line">    (</span><br><span class="line">    <span class="keyword">PARTITION</span> p01 <span class="keyword">VALUES</span> LESS THAN (<span class="number">10</span>,<span class="number">10</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p02 <span class="keyword">VALUES</span> LESS THAN (<span class="number">10</span>,<span class="number">20</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p03 <span class="keyword">VALUES</span> LESS THAN (<span class="number">10</span>,<span class="number">30</span>),</span><br><span class="line">    <span class="keyword">PARTITION</span> p04 <span class="keyword">VALUES</span> LESS THAN (<span class="number">10</span>,MAXVALUE ),</span><br><span class="line">    <span class="keyword">PARTITION</span> p05 <span class="keyword">VALUES</span> LESS THAN (MAXVALUE ,MAXVALUE )</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>

<h3 id="子分区"><a href="#子分区" class="headerlink" title="子分区"></a>子分区</h3><ul>
<li>子分区是分区别中每个分区的再次分割</li>
<li>子分区可以用于特别大的表,在多个磁盘间分配数据和索引</li>
</ul>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySql锁</title>
    <url>/posts/575.html</url>
    <content><![CDATA[<h2 id="悲观锁"><a href="#悲观锁" class="headerlink" title="悲观锁"></a>悲观锁</h2><h3 id="共享锁"><a href="#共享锁" class="headerlink" title="共享锁"></a>共享锁</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span> lock <span class="keyword">in</span> share mode;</span><br></pre></td></tr></table></figure>

<h3 id="排它锁"><a href="#排它锁" class="headerlink" title="排它锁"></a>排它锁</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">for</span> <span class="keyword">update</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL刚接触的东西</title>
    <url>/posts/8777.html</url>
    <content><![CDATA[<h3 id="USING"><a href="#USING" class="headerlink" title="USING"></a>USING</h3><p>using等价于join操作中的on，例如a和b根据id字段关联，那么以下等价<br>using(id)<br>on a.id&#x3D;b.id<br>以下2个实例等价：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> a.name,b.age <span class="keyword">from</span> test <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">join</span> test2 <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">on</span> a.id<span class="operator">=</span>b.id</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> a.name,b.age <span class="keyword">from</span> test <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">join</span> test2 <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">using</span>(id)</span><br></pre></td></tr></table></figure>

<h3 id="COALESCE"><a href="#COALESCE" class="headerlink" title="COALESCE"></a>COALESCE</h3><p>返回参数中的第一个非空表达式（从左向右依次类推）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">COALESCE(x, y) = (CASE WHEN x IS NOT NULL THEN x ELSE y END)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COALESCE</span>(<span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="number">1</span>); </span><br><span class="line"><span class="comment">-- Return 1 </span></span><br></pre></td></tr></table></figure>

<h3 id="NATURAL"><a href="#NATURAL" class="headerlink" title="NATURAL"></a>NATURAL</h3><p>Natural join即自然连接，natural join等同于inner join或inner using，其作用是将两个表中具有相同名称的列进行匹配<br>关联的表具有一对或多对同名的列<br>连接时候不需要使用on或者using关键字</p>
<h3 id="WITH-ROLLUP"><a href="#WITH-ROLLUP" class="headerlink" title="WITH ROLLUP"></a>WITH ROLLUP</h3><p>在group分组字段的基础上再进行汇总统计数据</p>
<h3 id="关于外键"><a href="#关于外键" class="headerlink" title="关于外键"></a>关于外键</h3><p>注意，在创建外键时，引用字段和外键字段都需要匹配：</p>
<ul>
<li>引擎应该是相同的，例如InnoDB;</li>
<li>数据类型应该相同)，并且长度相同;</li>
<li>编码应该相同，例如utf8；</li>
<li>外键应引用引用表中primary key的字段;</li>
<li>如果一个有UNSIGNED，另一个必须也要有.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET FOREIGN_KEY_CHECKS = 0;</span><br></pre></td></tr></table></figure>

<p>关闭外键</p>
<h3 id="COLLATE"><a href="#COLLATE" class="headerlink" title="COLLATE"></a>COLLATE</h3><p>一种MySQL排序规则</p>
<p><a href="https://cloud.tencent.com/developer/article/1366841">MYSQL中的COLLATE是什么？</a></p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql事务之修改不确定的表结构</title>
    <url>/posts/57935.html</url>
    <content><![CDATA[<p>工作中的失误，导致一堆数据库中，同名的表没有全部改掉。</p>
<p>尝试着写一段SQL，自行判断需不需要更改表结构。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DELIMITER ;;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> Alter_Table_Valen;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> Alter_Table_Valen()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> ColumnExists <span class="type">int</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> TableName <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">DECLARE</span> ColumnName <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">DECLARE</span> AddColumnSql text;</span><br><span class="line">    <span class="keyword">SET</span> ColumnExists <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">SET</span> TableName <span class="operator">=</span> <span class="string">&#x27;maintenanceschedule_set&#x27;</span>;</span><br><span class="line">    <span class="keyword">SET</span> ColumnName <span class="operator">=</span> <span class="string">&#x27;VisitCount&#x27;</span>;</span><br><span class="line">    <span class="keyword">SET</span> AddColumnSql <span class="operator">=</span> <span class="string">&#x27; ADD (`OverlapRule` tinyint(1) NOT NULL DEFAULT 0,</span></span><br><span class="line"><span class="string">        `VisitCount` int(2) NOT NULL DEFAULT 0,</span></span><br><span class="line"><span class="string">        `ScheduleMethod` tinyint(2) NOT NULL DEFAULT 0,</span></span><br><span class="line"><span class="string">        `MethodOption` varchar(255) NOT NULL DEFAULT &#x27;&#x27;&#x27;&#x27;,</span></span><br><span class="line"><span class="string">        `OtherLogic` varchar(255) NOT NULL DEFAULT &#x27;&#x27;&#x27;&#x27;,</span></span><br><span class="line"><span class="string">        `Priority` int(2) NOT NULL DEFAULT 0</span></span><br><span class="line"><span class="string">        )&#x27;</span>;</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">    <span class="keyword">INTO</span> ColumnExists</span><br><span class="line">    <span class="keyword">FROM</span> information_schema.COLUMNS</span><br><span class="line">    <span class="keyword">WHERE</span> TABLE_NAME <span class="operator">=</span> TableName</span><br><span class="line">      <span class="keyword">AND</span> COLUMN_NAME <span class="operator">=</span> ColumnName;</span><br><span class="line">    IF (ColumnExists <span class="operator">=</span> <span class="number">0</span>) <span class="keyword">THEN</span></span><br><span class="line">        <span class="keyword">SET</span> <span class="variable">@SQL1</span> <span class="operator">=</span> concat(<span class="string">&#x27;ALTER TABLE &#x27;</span>, TableName, AddColumnSql);</span><br><span class="line">        <span class="keyword">PREPARE</span> stmt1 <span class="keyword">FROM</span> <span class="variable">@SQL1</span>;</span><br><span class="line">        <span class="keyword">EXECUTE</span> stmt1;</span><br><span class="line">    <span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span> ;;</span><br><span class="line"><span class="keyword">CALL</span> Alter_Table_Valen;;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> Alter_Table_Valen;;</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql在select项中的赋值操作</title>
    <url>/posts/36509.html</url>
    <content><![CDATA[<p>遇到这样的SQL：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DO @lastdate:=&#x27;9999-12-31 23:59:59&#x27;;</span><br><span class="line"></span><br><span class="line">UPDATE `unit_maintenancescheduleset` SET Cached_ToDate = @lastdate, FromDate = (@lastdate:=(FromDate-INTERVAL 1 SECOND))+INTERVAL 1 SECOND</span><br><span class="line">WHERE UnitID = :unitId</span><br><span class="line">ORDER BY FromDate DESC</span><br></pre></td></tr></table></figure>

<p>这才发现MySQL是可以在select项赋值的。</p>
<p>简单看就是这个样子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET @test = 0;</span><br><span class="line"></span><br><span class="line">SELECT (@test := @test +1); # 这个执行几次就可以获取第几个</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 获取文件名</title>
    <url>/posts/af5c8077.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">basename</span>(<span class="keyword">__FILE__</span>, <span class="string">&#x27;.php&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">pathinfo</span>(<span class="keyword">__FILE__</span>, PATHINFO_DIRNAME);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">pathinfo</span>(<span class="keyword">__FILE__</span>, PATHINFO_BASENAME);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">pathinfo</span>(<span class="keyword">__FILE__</span>, PATHINFO_EXTENSION);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">pathinfo</span>(<span class="keyword">__FILE__</span>, PATHINFO_FILENAME);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL分组函数</title>
    <url>/posts/40296.html</url>
    <content><![CDATA[<p>select 分组函数,列(要求列出现在group by后面)<br>from 表<br>[where 筛选条件]<br>group by 分组<br>[having 字句]<br>[order by 字句]</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql生成随机时间</title>
    <url>/posts/12154.html</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT concat(YEAR(now()), &#x27;-&#x27;, LPAD(ceil(rand() * 4 + 8), 2, 0), &#x27;-&#x27;, lpad(ceil(rand() * 28), 2, 0), &#x27; &#x27;,</span><br><span class="line">              lpad(ceil(rand() * 12), 2, 0),</span><br><span class="line">              &#x27;:&#x27;,</span><br><span class="line">              lpad(ceil(rand() * 59), 2, 0),</span><br><span class="line">              &#x27;:&#x27;,</span><br><span class="line">              lpad(ceil(rand() * 59), 2, 0))</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP socket</title>
    <url>/posts/23018.html</url>
    <content><![CDATA[<p><a href="https://www.php.net/manual/zh/book.sockets.php">官方文档</a></p>
<span id="more"></span>
<p>首先 PHP 要开启 socket。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SocketService</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$address</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$port</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$_sockets</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$address</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$port</span> = <span class="string">&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$address</span>)) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;address = <span class="variable">$address</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$port</span>)) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;port = <span class="variable">$port</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">service</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//获取tcp协议号码。</span></span><br><span class="line">        <span class="variable">$tcp</span> = <span class="title function_ invoke__">getprotobyname</span>(<span class="string">&quot;tcp&quot;</span>);</span><br><span class="line">        <span class="variable">$sock</span> = <span class="title function_ invoke__">socket_create</span>(AF_INET, SOCK_STREAM, <span class="variable">$tcp</span>);</span><br><span class="line">        <span class="title function_ invoke__">socket_set_option</span>(<span class="variable">$sock</span>, SOL_SOCKET, SO_REUSEADDR, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$sock</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&quot;failed to create socket: &quot;</span>.<span class="title function_ invoke__">socket_strerror</span>(<span class="variable">$sock</span>).<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">socket_bind</span>(<span class="variable">$sock</span>, <span class="variable">$this</span>-&gt;address, <span class="variable">$this</span>-&gt;port);</span><br><span class="line">        <span class="title function_ invoke__">socket_listen</span>(<span class="variable">$sock</span>, <span class="variable">$this</span>-&gt;port);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;listen on <span class="subst">$this</span>-&gt;address <span class="subst">$this</span>-&gt;port ... \n&quot;</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;_sockets = <span class="variable">$sock</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">service</span>();</span><br><span class="line">        <span class="variable">$clients</span>[] = <span class="variable language_">$this</span>-&gt;_sockets;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="variable">$changes</span> = <span class="variable">$clients</span>;</span><br><span class="line">            <span class="variable">$write</span> = <span class="literal">null</span>;</span><br><span class="line">            <span class="variable">$except</span> = <span class="literal">null</span>;</span><br><span class="line">            <span class="title function_ invoke__">socket_select</span>(<span class="variable">$changes</span>, <span class="variable">$write</span>, <span class="variable">$except</span>, <span class="literal">null</span>);</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="variable">$changes</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$_sock</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;_sockets == <span class="variable">$_sock</span>) &#123; <span class="comment">//判断是不是新接入的socket</span></span><br><span class="line">                    <span class="keyword">if</span> ((<span class="variable">$newClient</span> = <span class="title function_ invoke__">socket_accept</span>(<span class="variable">$_sock</span>)) === <span class="literal">false</span>) &#123;</span><br><span class="line">                        <span class="keyword">die</span>(<span class="string">&#x27;failed to accept socket: &#x27;</span>.<span class="title function_ invoke__">socket_strerror</span>(<span class="variable">$_sock</span>).<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="variable">$line</span> = <span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">socket_read</span>(<span class="variable">$newClient</span>, <span class="number">1024</span>));</span><br><span class="line">                    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">handshaking</span>(<span class="variable">$newClient</span>, <span class="variable">$line</span>);</span><br><span class="line">                    <span class="comment">//获取client ip</span></span><br><span class="line">                    <span class="title function_ invoke__">socket_getpeername</span>(<span class="variable">$newClient</span>, <span class="variable">$ip</span>);</span><br><span class="line">                    <span class="variable">$clients</span>[<span class="variable">$ip</span>] = <span class="variable">$newClient</span>;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;Client ip:<span class="subst">&#123;$ip&#125;</span>   \n&quot;</span>;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;Client msg:<span class="subst">&#123;$line&#125;</span> \n&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_ invoke__">socket_recv</span>(<span class="variable">$_sock</span>, <span class="variable">$buffer</span>, <span class="number">2048</span>, <span class="number">0</span>);</span><br><span class="line">                    <span class="variable">$msg</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">message</span>(<span class="variable">$buffer</span>);</span><br><span class="line">                    <span class="comment">//在这里业务代码</span></span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">&#123;$key&#125;</span> clinet msg:&quot;</span>, <span class="variable">$msg</span>, <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">                    <span class="title function_ invoke__">fwrite</span>(STDOUT, <span class="string">&#x27;Please input a argument:&#x27;</span>);</span><br><span class="line">                    <span class="variable">$response</span> = <span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">fgets</span>(STDIN));</span><br><span class="line">                    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">send</span>(<span class="variable">$_sock</span>, <span class="variable">$response</span>);</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">&#123;$key&#125;</span> response to Client:&quot;</span>.<span class="variable">$response</span>, <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 握手处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $newClient socket</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int  接收到的信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handshaking</span>(<span class="params"><span class="variable">$newClient</span>, <span class="variable">$line</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$headers</span> = [];</span><br><span class="line">        <span class="variable">$lines</span> = <span class="title function_ invoke__">preg_split</span>(<span class="string">&quot;/\r\n/&quot;</span>, <span class="variable">$line</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$lines</span> <span class="keyword">as</span> <span class="variable">$line</span>) &#123;</span><br><span class="line">            <span class="variable">$line</span> = <span class="title function_ invoke__">chop</span>(<span class="variable">$line</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/\A(\S+): (.*)\z/&#x27;</span>, <span class="variable">$line</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">                <span class="variable">$headers</span>[<span class="variable">$matches</span>[<span class="number">1</span>]] = <span class="variable">$matches</span>[<span class="number">2</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$secKey</span> = <span class="variable">$headers</span>[<span class="string">&#x27;Sec-WebSocket-Key&#x27;</span>];</span><br><span class="line">        <span class="variable">$secAccept</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">pack</span>(<span class="string">&#x27;H*&#x27;</span>, <span class="title function_ invoke__">sha1</span>(<span class="variable">$secKey</span>.<span class="string">&#x27;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&#x27;</span>)));</span><br><span class="line">        <span class="variable">$upgrade</span> = <span class="string">&quot;HTTP/1.1 101 Web Socket Protocol Handshake\r\n&quot;</span>.</span><br><span class="line">            <span class="string">&quot;Upgrade: websocket\r\n&quot;</span>.</span><br><span class="line">            <span class="string">&quot;Connection: Upgrade\r\n&quot;</span>.</span><br><span class="line">            <span class="string">&quot;WebSocket-Origin: <span class="subst">$this</span>-&gt;address\r\n&quot;</span>.</span><br><span class="line">            <span class="string">&quot;WebSocket-Location: ws://<span class="subst">$this</span>-&gt;address:<span class="subst">$this</span>-&gt;port/websocket/websocket\r\n&quot;</span>.</span><br><span class="line">            <span class="string">&quot;Sec-WebSocket-Accept:<span class="subst">$secAccept</span>\r\n\r\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">socket_write</span>(<span class="variable">$newClient</span>, <span class="variable">$upgrade</span>, <span class="title function_ invoke__">strlen</span>(<span class="variable">$upgrade</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析接收数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $buffer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> null|string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">message</span>(<span class="params"><span class="variable">$buffer</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$len</span> = <span class="variable">$masks</span> = <span class="variable">$data</span> = <span class="variable">$decoded</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable">$len</span> = <span class="title function_ invoke__">ord</span>(<span class="variable">$buffer</span>[<span class="number">1</span>]) &amp; <span class="number">127</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$len</span> === <span class="number">126</span>) &#123;</span><br><span class="line">            <span class="variable">$masks</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$buffer</span>, <span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="variable">$data</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$buffer</span>, <span class="number">8</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$len</span> === <span class="number">127</span>) &#123;</span><br><span class="line">                <span class="variable">$masks</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$buffer</span>, <span class="number">10</span>, <span class="number">4</span>);</span><br><span class="line">                <span class="variable">$data</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$buffer</span>, <span class="number">14</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$masks</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$buffer</span>, <span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line">                <span class="variable">$data</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$buffer</span>, <span class="number">6</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$index</span> = <span class="number">0</span>; <span class="variable">$index</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$data</span>); <span class="variable">$index</span>++) &#123;</span><br><span class="line">            <span class="variable">$decoded</span> .= <span class="variable">$data</span>[<span class="variable">$index</span>] ^ <span class="variable">$masks</span>[<span class="variable">$index</span> % <span class="number">4</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$decoded</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $newClinet 新接入的socket</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $msg   要发送的数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int|string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"><span class="variable">$newClinet</span>, <span class="variable">$msg</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$msg</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">frame</span>(<span class="variable">$msg</span>);</span><br><span class="line">        <span class="title function_ invoke__">socket_write</span>(<span class="variable">$newClinet</span>, <span class="variable">$msg</span>, <span class="title function_ invoke__">strlen</span>(<span class="variable">$msg</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">frame</span>(<span class="params"><span class="variable">$s</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$a</span> = <span class="title function_ invoke__">str_split</span>(<span class="variable">$s</span>, <span class="number">125</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$a</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;\x81&quot;</span>.<span class="title function_ invoke__">chr</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$a</span>[<span class="number">0</span>])).<span class="variable">$a</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$ns</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$a</span> <span class="keyword">as</span> <span class="variable">$o</span>) &#123;</span><br><span class="line">            <span class="variable">$ns</span> .= <span class="string">&quot;\x81&quot;</span>.<span class="title function_ invoke__">chr</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$o</span>)).<span class="variable">$o</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$ns</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 关闭socket</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">socket_close</span>(<span class="variable">$this</span>-&gt;_sockets);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$sock</span> = <span class="keyword">new</span> <span class="title class_">SocketService</span>(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="string">&#x27;86&#x27;</span>);</span><br><span class="line"><span class="variable">$sock</span>-&gt;<span class="title function_ invoke__">run</span>();</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>socket</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL常见函数</title>
    <url>/posts/16099.html</url>
    <content><![CDATA[<h1 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h1><ol>
<li>length 获取参数值中的字节个数</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select length(&#x27;join&#x27;);  --    4</span><br><span class="line">select length(&#x27;红楼梦&#x27;); --    9</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>concat 拼接字符串</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT concat(&#x27;2020&#x27;,&#x27;-&#x27;,10);   --  2020-10</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>upper lower 大小写转化</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT upper(&#x27;aBc&#x27;);    --  ABC</span><br><span class="line">SELECT lower(&#x27;aBc&#x27;);    --  abc</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>substr substring 截取从指定索引处后面所有字符(索引从1开始)</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT substr(&#x27;1234&#x27;, 2);   --  234</span><br><span class="line">SELECT substring(&#x27;1234&#x27;, 2);   --  234</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>instr 返回字符串字串第一次出现的索引</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select instr(&#x27;abcde&#x27;, &#x27;b&#x27;)  --  2;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>trim</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select trim(&#x27; 123 &#x27;); -- 123</span><br><span class="line">select trim(&#x27;a&#x27; from &#x27;abcdea&#x27;); --  bcde</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>lpad rpad 用指定的字符串填充</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT lpad(&#x27;123&#x27;, 5, &#x27;0&#x27;); --  00123</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>replace 替换</li>
</ol>
<p>select replace (‘abcdf’, ‘f’,’e’);</p>
<ol start="9">
<li>SUBSTRING_INDEX</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DO @str := &#x27;www.baidu.com&#x27;;</span><br><span class="line">SELECT substring_index(@str, &#x27;.&#x27;, 1); --    www</span><br><span class="line">SELECT substring_index(@str, &#x27;.&#x27;, -1); --    com</span><br></pre></td></tr></table></figure>

<h1 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h1><ol>
<li>round 四舍五入</li>
</ol>
<p>select round(1.65);</p>
<p>select round(1.655, 2);</p>
<ol start="2">
<li><p>ceil 天花板数</p>
</li>
<li><p>floor 地板数</p>
</li>
<li><p>truncate 截断</p>
</li>
</ol>
<p>select truncate(1.999, 2);</p>
<ol start="5">
<li>mod 取余</li>
</ol>
<h1 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h1><ol>
<li><p>now 返回当前系统日期时间</p>
</li>
<li><p>curdate 返回当前系统日期</p>
</li>
<li><p>curtime 返回当前的时间</p>
</li>
<li><p>year month day hour minute second 获取年月日时分秒</p>
</li>
<li><p>str_to_date 将日期格式的字符串转化成指定格式的时间</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>格式符</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>%Y</td>
<td>四位数年份</td>
</tr>
<tr>
<td>%y</td>
<td>两位数年份</td>
</tr>
<tr>
<td>%m</td>
<td>月份(01,02,…12)</td>
</tr>
<tr>
<td>%c</td>
<td>月份(1,2,…12)</td>
</tr>
<tr>
<td>%d</td>
<td>日(01,02,…)</td>
</tr>
<tr>
<td>%H</td>
<td>小时(24)</td>
</tr>
<tr>
<td>%h</td>
<td>小时(12)</td>
</tr>
<tr>
<td>%i</td>
<td>分钟</td>
</tr>
<tr>
<td>%s</td>
<td>秒</td>
</tr>
</tbody></table>
<ol start="6">
<li>date_format 将日期转化成字符</li>
</ol>
<h1 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h1><ul>
<li>coalesce<ul>
<li>返回第一个不是 NULL 的值</li>
</ul>
</li>
<li>database</li>
<li>user</li>
<li>version</li>
</ul>
<h1 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h1><ol>
<li>if</li>
</ol>
<p>select if(10&lt;5, ‘y’, ‘n’);</p>
<ol start="2">
<li>case</li>
</ol>
<p>使用一(类似switch)<br>case 要判断的字段或表达式<br>when 常量 then 要显示的值或语句1;<br>when 常量 then 要显示的值或语句2;<br>…<br>else 都没有命中的时候<br>end;</p>
<p>select salary,department_id<br>case 1 then salary<em>1.1<br>case 2 then salary</em>1.2<br>else salary<br>end from emplory;</p>
<p>使用二(多重if)</p>
<p>case<br>when 条件1 then 要显示的内容1<br>when 条件2 then 要显示的内容2</p>
<h1 id="多行函数-聚合函数"><a href="#多行函数-聚合函数" class="headerlink" title="多行函数(聚合函数)"></a>多行函数(聚合函数)</h1><p>sum avg max min count</p>
<p>特点:</p>
<ol>
<li>sum avg用于处理数值类型,max min count可以处理其他</li>
<li>忽略null值</li>
<li>可以和distinct搭配实现去重</li>
<li>count统计行数,count(*)效率较高</li>
<li>和分组函数一同查询字段要求是group by之后的字段</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># count函数详细介绍</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(salary) <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> employees; # 和上着的区别在于,这个展示的是行数,上个取得是除<span class="keyword">null</span>之后的数</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">from</span> employees; # 相当于数据多了一行<span class="number">1</span>,然后统计个数(实际就是行数)</span><br></pre></td></tr></table></figure>

<h1 id="any-some-all-in-exists"><a href="#any-some-all-in-exists" class="headerlink" title="any some all in exists"></a>any some all in exists</h1><p>exists用于检查子查询是否至少会返回一行数据，该子查询实际上并不返回任何数据，而是返回值True或False。<br>any对于子查询返回的列中的任一数值，如果比较结果为true，则返回true。<br>some是any的别名。<br>all对于子查询返回的列中的所有值，如果比较结果为true，则返回true。</p>
<p>使用方法如下，注意any&#x2F;all&#x2F;是和比较操作符一起使用的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> TableIn <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> BID <span class="keyword">from</span> TableEx <span class="keyword">where</span> BNAME<span class="operator">=</span>TableIn.ANAME);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> TableIn <span class="keyword">where</span> ANAME<span class="operator">=</span><span class="keyword">ANY</span>(<span class="keyword">select</span> BNAME <span class="keyword">from</span> TableEx);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> TableIn <span class="keyword">where</span> ANAME <span class="keyword">IN</span> (<span class="keyword">select</span> BNAME <span class="keyword">FROM</span> TableEx);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> TableIn <span class="keyword">where</span> ANAME<span class="operator">=</span><span class="keyword">ALL</span>(<span class="keyword">select</span> BNAME <span class="keyword">from</span> TableEx);</span><br></pre></td></tr></table></figure>
<p>这里提一下，估计之后看到的时候也会忘记为什么了。in和exists意义并不完全相同，在字段有null值存在的情况，使用两种方法获得的结果可能会不一样。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="keyword">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">exists</span>(<span class="keyword">SELECT</span> <span class="keyword">NULL</span>);</span><br></pre></td></tr></table></figure>
<p>如上，第一个查不到数据，第二个查出了test表的所有数据。<br>产生这样的结果，是因为EXISTS 谓词永远不会返回 unknown (select null 的结果是「unknown」，表示未知) 。EXISTS 只会返回 true 或者false 。因此就有了 IN 和 EXISTS 可以互相替换使用，而 NOT IN和 NOT EXISTS 却不可以互相替换的混乱现象。</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 匿名函数</title>
    <url>/posts/115a5de5.html</url>
    <content><![CDATA[<p>最近在用 Dact ，看到这不知道匿名函数中的 this 指向的是谁。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$grid</span>-&gt;<span class="title function_ invoke__">column</span>(<span class="string">&#x27;类型&#x27;</span>)-&gt;<span class="title function_ invoke__">display</span>(function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&lt;&lt;&lt;HTML</span></span><br><span class="line"><span class="string">&lt;label style=&#x27;</span></span><br><span class="line"><span class="string">    background-color: <span class="subst">&#123;$this-&gt;type-&gt;background_color&#125;</span>;</span></span><br><span class="line"><span class="string">    color:<span class="subst">&#123;$this-&gt;type-&gt;color&#125;</span>;</span></span><br><span class="line"><span class="string">    padding: 2px 6px;&#x27;&gt; <span class="subst">&#123;$this-&gt;type-&gt;title&#125;</span> &lt;/label&gt;</span></span><br><span class="line"><span class="string">HTML</span>;&#125;);</span><br></pre></td></tr></table></figure>

<p>印象中匿名函数用到外部的变量都需要 use 或 global 的。后来翻到了这个 <a href="https://www.php.net/manual/zh/class.closure.php">官方文档</a> 才明白。</p>
<span id="more"></span>

<p>首先澄清一点，类中匿名函数的 $this 是指向当前对象的。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="title function_ invoke__">var_dump</span>(<span class="variable">$this</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没想到 A::test 本身就是一个匿名函数，还是需要「()」执行它</span></span><br><span class="line">(<span class="keyword">new</span> <span class="title function_ invoke__">A</span>())-&gt;<span class="title function_ invoke__">test</span>()(); <span class="comment">// object(A)#1 (0) &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<p>其次，PHP 可以使用 bin&#x2F;bindTo&#x2F;call 来更改匿名函数中 $this 的指向</p>
<p>bind 用法：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$func1</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># bindTo</span></span><br><span class="line"><span class="variable">$r</span> = <span class="variable">$func1</span>-&gt;<span class="title function_ invoke__">bindTo</span>(<span class="keyword">new</span> A, A::<span class="variable language_">class</span>);</span><br><span class="line"><span class="comment">// $r 仍然是个匿名函数，需要圆括号调用。</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$r</span>()); <span class="comment">// object(A)#2 (0) &#123;&#125; </span></span><br><span class="line"><span class="comment">// 注意结果是 #2，说明在 bindTo(new A... 中已经实例化一次了，在这配合单例模式估计更好。下面几个也是类似的。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bind</span></span><br><span class="line"><span class="variable">$r1</span> = <span class="title class_">Closure</span>::<span class="title function_ invoke__">bind</span>(<span class="variable">$func1</span>, <span class="keyword">new</span> <span class="title function_ invoke__">A</span>(), A::<span class="variable language_">class</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$r1</span>()); <span class="comment">// object(A)#4 (0) &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># call</span></span><br><span class="line"><span class="comment">## 值得注意的是，call 这种用法已经直接调用了，就不需要使用圆括号去执行了</span></span><br><span class="line"><span class="variable">$r2</span> = <span class="variable">$func1</span>-&gt;<span class="title function_ invoke__">call</span>(<span class="keyword">new</span> <span class="title function_ invoke__">A</span>());</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$r2</span>); <span class="comment">// // object(A)#6 (0) &#123;&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 多线程</title>
    <url>/posts/34179.html</url>
    <content><![CDATA[<p>使用 pcntl 处理</p>
<p>下面就是我相关实际使用的代码（删除相关业务了）</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/php -q</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Auto schedule entry</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This cron job is used to schedule automatically for TBM V2.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 3.1 US will be a regular script, run every date.</span></span><br><span class="line"><span class="comment"> * Get all units that meet the following conditions:</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Get runs by the unit filtered by upper steps.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The automatic schedule script can arrange 6 runs per minute (assume 160 units in a run), and 360 runs per hour. In China, for example, there are nearly 400000 units with nearly 5000 runs, with 300 possible changes a day. Even if all of those runs had a schedule, we could do it in less than an hour.</span></span><br><span class="line"><span class="comment"> * To avoid unrestricted execution of the script, we can set the script to run for up to an hour per day, which is enough to cover the daily change.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * To achieve this function, I have added a special switch named Enable Auto TBM Scheduling Job. There is a cron job to run auto_schedule_batch at 5:00 every day. The script will run based on the two switch (Enable Auto TBM Scheduling Job &amp;&amp; Enable Maintenance Schedule Generic Logic V2)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>     v1.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>      ValenChen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@subpackage</span>  common</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$_SERVER</span>[<span class="string">&quot;DOCUMENT_ROOT&quot;</span>])) &#123;</span><br><span class="line">    <span class="variable">$_SERVER</span>[<span class="string">&quot;DOCUMENT_ROOT&quot;</span>] = <span class="variable">$_ENV</span>[<span class="string">&#x27;HOME&#x27;</span>].<span class="string">&#x27;/web&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$iLimitTime</span> = <span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;argv&#x27;</span>][<span class="number">1</span>]) ? <span class="title function_ invoke__">trim</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;argv&#x27;</span>][<span class="number">1</span>]) : <span class="number">3600</span>;</span><br><span class="line"><span class="variable">$iYear</span> = <span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;argv&#x27;</span>][<span class="number">2</span>]) ? <span class="title function_ invoke__">trim</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;argv&#x27;</span>][<span class="number">2</span>]) : <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y&#x27;</span>);</span><br><span class="line"><span class="variable">$bIsScheduleNextYear</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;argv&#x27;</span>][<span class="number">3</span>];</span><br><span class="line"><span class="variable">$iMaxChildPro</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;argv&#x27;</span>][<span class="number">4</span>] ?? <span class="number">5</span>; <span class="comment">// Maximum number of processes</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">set_time_limit</span>(<span class="variable">$iLimitTime</span> + <span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$info</span> = [];</span><br><span class="line"><span class="variable">$iCurChildPro</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!(<span class="title function_ invoke__">open</span>(<span class="string">&#x27;AUTO_TBM_SCHEDULING_JOB&#x27;</span>) &amp;&amp; <span class="title function_ invoke__">open</span>(<span class="string">&#x27;MAINTENANCE_GENERIC_LOGIC_V2&#x27;</span>))) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&quot;The auto schedule switch has not opened&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$info</span> =  [ <span class="string">&#x27;JobId&#x27;</span> =&gt; <span class="number">1</span>, <span class="string">&#x27;BatchRunInfo&#x27;</span> =&gt; []];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">scheduleResult</span>(<span class="params"><span class="variable">$iJobId</span>, <span class="variable">$sResult</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">exec</span>(<span class="string">&quot;php xxx/auto_schedule_result.php <span class="subst">&#123;$iJobId&#125;</span> <span class="subst">&#123;$sResult&#125;</span>&quot;</span>, <span class="variable">$res</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;COMPLETED&lt;/p&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$iRunCnt</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$info</span>[<span class="string">&#x27;BatchRunInfo&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sig_handler</span>(<span class="params"><span class="variable">$sig</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$iCurChildPro</span>;</span><br><span class="line">        <span class="keyword">switch</span> (<span class="variable">$sig</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> SIGCHLD:</span><br><span class="line">                <span class="variable">$iCurChildPro</span>--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">declare</span>(ticks=<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">pcntl_signal</span>(SIGCHLD, <span class="string">&quot;sig_handler&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$iScheduleStartTime</span> = <span class="title function_ invoke__">time</span>();</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$info</span>[<span class="string">&#x27;BatchRunInfo&#x27;</span>] <span class="keyword">as</span> <span class="variable">$aRunInfo</span>) &#123;</span><br><span class="line">        <span class="variable">$iRunCnt</span>--;</span><br><span class="line">        <span class="variable">$iCurChildPro</span>++;</span><br><span class="line">        <span class="variable">$pid</span> = <span class="title function_ invoke__">pcntl_fork</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$pid</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$iCurChildPro</span> &gt;= <span class="variable">$iMaxChildPro</span>) &#123;</span><br><span class="line">                <span class="title function_ invoke__">pcntl_wait</span>(<span class="variable">$status</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// overtime</span></span><br><span class="line">            <span class="variable">$iNow</span> = <span class="title function_ invoke__">time</span>();</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$iLimitTime</span> &amp;&amp; <span class="variable">$iNow</span> - <span class="variable">$iScheduleStartTime</span> &gt; <span class="variable">$iLimitTime</span>) &#123;</span><br><span class="line">                <span class="comment">// The timeout will be cancelled</span></span><br><span class="line">                <span class="title function_ invoke__">scheduleResult</span>(<span class="variable">$info</span>[<span class="string">&#x27;JobId&#x27;</span>], xxx<span class="title class_">\MaintenanceScheduleJobService</span>::<span class="variable constant_">RUNNING_STATUS_CANCELED</span>);</span><br><span class="line">                <span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_ invoke__">exec</span>(<span class="string">&quot;php xxx/auto_schedule.php <span class="subst">&#123;$info[&#x27;JobId&#x27;]&#125;</span> <span class="subst">&#123;$aRunInfo[&#x27;RunId&#x27;]&#125;</span> <span class="subst">&#123;$aRunInfo[&#x27;Year&#x27;]&#125;</span>&quot;</span>, <span class="variable">$res</span>);</span><br><span class="line">            <span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">scheduleResult</span>(<span class="variable">$info</span>[<span class="string">&#x27;JobId&#x27;</span>], xxx<span class="title class_">\MaintenanceScheduleJobService</span>::<span class="variable constant_">RUNNING_STATUS_COMPLETED</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$exception</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$oScheduleBatchService</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">scheduleResult</span>(<span class="variable">$info</span>[<span class="string">&#x27;JobId&#x27;</span>], xxx<span class="title class_">\MaintenanceScheduleJobService</span>::<span class="variable constant_">RUNNING_STATUS_FAILED</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$sMsg</span> = <span class="variable">$exception</span>-&gt;<span class="title function_ invoke__">getMessage</span>().<span class="string">&quot;\n\n&quot;</span>.<span class="variable">$exception</span>-&gt;<span class="title function_ invoke__">getTraceAsString</span>();</span><br><span class="line">    <span class="title function_ invoke__">log</span>( <span class="variable">$info</span>[<span class="string">&#x27;JobId&#x27;</span>], <span class="variable">$sMsg</span>, <span class="string">&#x27;AutoSchedule&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>多线程</tag>
      </tags>
  </entry>
  <entry>
    <title>类方法中的静态变量</title>
    <url>/posts/48688.html</url>
    <content><![CDATA[<p>直接说结论：即便是重新实例化一个类，类方法中的静态变量也是一直「保留」的。</p>
<p>验证如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">t</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">static</span> <span class="variable">$rand</span>;</span><br><span class="line">        <span class="built_in">static</span> <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">echo</span> ++<span class="variable">$i</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable">$rand</span>) &#123;</span><br><span class="line">            <span class="variable">$rand</span> = <span class="title function_ invoke__">uniqid</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$rand</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params"><span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$data</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$t1</span> = <span class="keyword">new</span> <span class="title function_ invoke__">t</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t1</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t1</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t1</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t1</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">sleep</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable">$t2</span> = <span class="keyword">new</span> <span class="title function_ invoke__">t</span>();</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t2</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t2</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t2</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"><span class="title function_ invoke__">p</span>(<span class="variable">$t2</span>-&gt;<span class="title function_ invoke__">get</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
        <category>细碎知识</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>细碎知识</tag>
      </tags>
  </entry>
  <entry>
    <title>遇到的重写问题</title>
    <url>/posts/399.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">a1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">b1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">c</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title function_ invoke__">A</span>();</span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$a</span>-&gt;<span class="title function_ invoke__">b1</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$res</span>; <span class="comment">// 居然是A</span></span><br></pre></td></tr></table></figure>


<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">a1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">b1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">c</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$res</span> = A::<span class="title function_ invoke__">b1</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$res</span>; <span class="comment">// 居然是A</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">a1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">b1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="title function_ invoke__">c</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$res</span> = A::<span class="title function_ invoke__">b1</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$res</span>; <span class="comment">// 这才是B</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
        <category>细碎知识</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>细碎知识</tag>
      </tags>
  </entry>
  <entry>
    <title>在命令行生成一个进度条</title>
    <url>/posts/1633180871.html</url>
    <content><![CDATA[<p>利用 回车「\t」把光标回到当前行第一位的特性。</p>
<span id="more"></span>


<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProcessBar</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$totalNum</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$currentNum</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$baseNum</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">100</span>; <span class="variable">$i</span>++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="variable">$equalStr</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot;=&quot;</span>, <span class="variable">$i</span>);</span><br><span class="line">            <span class="variable">$space</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot; &quot;</span>, <span class="variable">$count</span> - <span class="variable">$i</span>);</span><br><span class="line">            <span class="keyword">echo</span>(<span class="string">&quot;\r [<span class="subst">$equalStr</span>&gt;<span class="subst">$space</span>](<span class="subst">$i</span>/<span class="subst">$count</span>%)&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$totalNum</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;totalNum = <span class="variable">$totalNum</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params"><span class="variable">$currentNum</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;currentNum = <span class="variable">$currentNum</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">dump</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">dump</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$ratioBase</span> = (<span class="keyword">int</span>)<span class="title function_ invoke__">floor</span>(<span class="variable">$this</span>-&gt;currentNum / <span class="variable">$this</span>-&gt;totalNum * <span class="variable">$this</span>-&gt;baseNum);</span><br><span class="line">        <span class="variable">$equalStr</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot;=&quot;</span>, <span class="variable">$ratioBase</span>);</span><br><span class="line">        <span class="variable">$space</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot; &quot;</span>, <span class="variable">$this</span>-&gt;baseNum - <span class="variable">$ratioBase</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;\r [<span class="subst">$equalStr</span>&gt;<span class="subst">$space</span>](<span class="subst">$ratioBase</span>%)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>代码片段</tag>
      </tags>
  </entry>
  <entry>
    <title>如何开发一个框架</title>
    <url>/posts/57747.html</url>
    <content><![CDATA[<p><a href="https://www.zhihu.com/question/26635323/answer/33812516">想要开发自己的PHP框架需要那些知识储备？</a></p>
<p>总结一些在造框架过程中通常会用到的一些点吧（以下排列没有先后顺序）：</p>
<ol>
<li>MVC</li>
<li>自动加载: PHP: 自动加载类;</li>
<li>错误处理：<a href="http://php.net/manual/zh/book.errorfunc.php">http://php.net/manual/zh/book.errorfunc.php</a>;</li>
<li>PHP标准库 (SPL)PHP: SPL - Manual;</li>
<li>输出缓冲控制: PHP: 输出控制;</li>
<li>PHP 选项&#x2F;信息：PHP:PHP 选项&#x2F;信息;</li>
<li>数据库抽象层：PHP: 数据库抽象层;</li>
<li>session拓展：PHP: Session 扩展;</li>
<li>反射：<a href="http://php.net/manual/zh/book.reflection.php">http://php.net/manual/zh/book.reflection.php</a>;</li>
<li>类和对象：PHP: 类&#x2F;对象;</li>
<li>图像处理和 GD：PHP: GD - Manual;</li>
<li>邮件相关的SMTP;</li>
<li>文件系统：PHP: Filesystem;</li>
<li>预定义变量：PHP: 预定义变量;</li>
<li>字符串处理：PHP: 字符串 - Manual;</li>
<li>正则表达式: <a href="http://php.net/manual/en/book.pcre.php">http://php.net/manual/en/book.pcre.php</a>;</li>
</ol>
<p>如果你想给框架加一些更巧妙的，或者更丰富的功能的话，这里还有一些知识点：</p>
<ol>
<li>常见的设计模式：工厂、单例，外观、观察者等;</li>
<li>迭代器等预定义接口：PHP: 预定义接口；</li>
<li>数据库拓展：PHP: 数据库扩展;</li>
<li>国际化与字符编码支持 PHP: 国际化与字符编码支持;</li>
<li>常用的缓存，Redis, Memcache,Apc等;</li>
<li>队列服务如ActiveMQ,Beanstalkd等;</li>
<li>多数据库支持如Mongo；</li>
<li>事件与钩子；</li>
</ol>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>1 两数之和</title>
    <url>/posts/16449.html</url>
    <content><![CDATA[<p>设数组[a1,a2,…a(n)]</p>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><p>最简单的就是两层循环嵌套，a1+a2,a1+a3…|a2+a3…|a(n-1)+a(n)</p>
<p>进一步因为是两数之和，sum &#x3D; a + b，那b&#x3D;sum-a，可以从字典中查b，这样就可以少一层循环嵌套。</p>
<p>但这样还有漏洞，比如[3,3]&#x3D;&gt;6。不过字典没必要一开始就建，就按数组遍历的顺序依次添加，因为是结果只有一个，所以不会出现[3,3,2]&#x3D;&gt;5的情况，还可以进一步消减建字典的空间。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">twoSum</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$nums</span>, <span class="keyword">int</span> <span class="variable">$target</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$map</span> = [];<span class="comment">//哈希查找表</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$nums</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$item</span>) &#123;</span><br><span class="line">            <span class="variable">$b</span> = <span class="variable">$target</span> - <span class="variable">$item</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$map</span>[<span class="variable">$b</span>])) &#123;</span><br><span class="line">                <span class="keyword">return</span> [<span class="variable">$map</span>[<span class="variable">$b</span>], <span class="variable">$key</span>];<span class="comment">//找到返回</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$map</span>[<span class="variable">$item</span>] = <span class="variable">$key</span>;<span class="comment">//放入哈希表</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="错误思路-二分法"><a href="#错误思路-二分法" class="headerlink" title="错误思路 二分法"></a>错误思路 二分法</h4><p>看着是有序集就想到二分法。居然动手写了，但发现</p>
<p>[3, 24, 50, 79, 88, 150, 345]&#x3D;&gt;200</p>
<ol start="0">
<li>3+345&gt;200</li>
<li>3+79&lt;200</li>
<li>24+79&lt;200</li>
</ol>
<p>好吧，这样就算不出结果了。</p>
<p>我不知道为什么会抱有这样的想法，二分法明明找的就是一个答案，想都没想就这样犯错了</p>
<h3 id="测试答案"><a href="#测试答案" class="headerlink" title="测试答案"></a>测试答案</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$nums</span> = [<span class="number">3</span>, <span class="number">24</span>, <span class="number">50</span>, <span class="number">79</span>, <span class="number">88</span>, <span class="number">150</span>, <span class="number">345</span>];   </span><br><span class="line"><span class="variable">$target</span> = <span class="number">200</span>;                           </span><br><span class="line"><span class="title function_ invoke__">print_r</span>((<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">twoSum</span>(<span class="variable">$nums</span>, <span class="variable">$target</span>));     </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>其他</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>136 只出现一次的数字</title>
    <url>/posts/38281.html</url>
    <content><![CDATA[<p>利用异或，因为相同的值结果为零，把所有的数异或处理，就能得到只出现一次的值（题目已设定相同的值只会出现两次，要是出现三次这个方法就错了）</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">singleNumber</span>(<span class="params"><span class="variable">$nums</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$res</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$nums</span> <span class="keyword">as</span> <span class="variable">$num</span>) &#123;</span><br><span class="line">            <span class="variable">$res</span> ^= <span class="variable">$num</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$res</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$t</span> = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">singleNumber</span>(<span class="variable">$t</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>位运算</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>位运算</tag>
      </tags>
  </entry>
  <entry>
    <title>121 买卖股票的最佳时期</title>
    <url>/posts/55193.html</url>
    <content><![CDATA[<p>一次遍历，找到最小值，同时查看当天-最小值的差值</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer[] $prices</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">maxProfit</span>(<span class="params"><span class="variable">$prices</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$res</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$min</span> = <span class="title function_ invoke__">current</span>(<span class="variable">$prices</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$prices</span> <span class="keyword">as</span> <span class="variable">$price</span>) &#123;</span><br><span class="line">            <span class="variable">$min</span> = <span class="title function_ invoke__">min</span>(<span class="variable">$price</span>, <span class="variable">$min</span>);</span><br><span class="line">            <span class="variable">$res</span> = <span class="title function_ invoke__">max</span>(<span class="variable">$price</span> - <span class="variable">$min</span>, <span class="variable">$res</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$res</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$prices</span> = [<span class="number">7</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>];</span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">maxProfit</span>(<span class="variable">$prices</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>其他</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>其他</tag>
      </tags>
  </entry>
  <entry>
    <title>141 环形队列</title>
    <url>/posts/29922.html</url>
    <content><![CDATA[<p>因为环形队列没有「结尾」，所以可以使用双指针之快慢针处理——可以设想一下，a+n&#x2F;m1 &#x3D; a+n&#x2F;m2</p>
<p>联想现实，就是在环形跑道上同向运动的两个小伙伴不管起点在哪，只要跑的足够久，肯定会碰到的。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hasCycle</span>(<span class="params"><span class="variable">$head</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$head</span> === <span class="literal">null</span> || <span class="variable">$head</span>-&gt;next === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$cur</span> = <span class="variable">$head</span>;</span><br><span class="line">        <span class="variable">$cur1</span> = <span class="variable">$head</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$cur</span>) &#123;</span><br><span class="line">            <span class="variable">$cur</span> = <span class="variable">$cur</span>-&gt;next;</span><br><span class="line">            <span class="variable">$cur1</span> = <span class="variable">$cur1</span>-&gt;next-&gt;next;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$cur</span> === <span class="variable">$cur1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>算法</category>
        <category>双指针</category>
        <category>快慢针</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>队列</tag>
        <tag>双指针</tag>
        <tag>快慢针</tag>
      </tags>
  </entry>
  <entry>
    <title>102 二叉树的层序遍历</title>
    <url>/posts/55538.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$val</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$left</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$right</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$val</span> = <span class="number">0</span>, <span class="variable">$left</span> = <span class="literal">null</span>, <span class="variable">$right</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;val = <span class="variable">$val</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;left = <span class="variable">$left</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;right = <span class="variable">$right</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">levelOrder</span>(<span class="params"><span class="variable">$root</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$ret</span> = [];</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$root</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$ret</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$queue</span> = [];</span><br><span class="line">        <span class="variable">$queue</span>[] = <span class="variable">$root</span>;</span><br><span class="line">        <span class="keyword">while</span> (!<span class="keyword">empty</span>(<span class="variable">$queue</span>)) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">dump</span>(<span class="variable">$queue</span>);</span><br><span class="line">            <span class="variable">$level</span> = [];</span><br><span class="line">            <span class="variable">$currentLevelSize</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$queue</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="variable">$currentLevelSize</span>; ++<span class="variable">$i</span>) &#123;</span><br><span class="line">                <span class="variable">$node</span> = <span class="title function_ invoke__">array_shift</span>(<span class="variable">$queue</span>);</span><br><span class="line">                <span class="variable">$level</span>[] = <span class="variable">$node</span>-&gt;val;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$node</span>-&gt;left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="variable">$queue</span>[] = <span class="variable">$node</span>-&gt;left;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$node</span>-&gt;right != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="variable">$queue</span>[] = <span class="variable">$node</span>-&gt;right;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$ret</span>[] = <span class="variable">$level</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$ret</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dump</span>(<span class="params"><span class="variable">$queue</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$queue</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$value</span>-&gt;val . <span class="string">&#x27;_&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">1</span>,</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">2</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">4</span>), <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">5</span>)),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">3</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">6</span>), <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">7</span>)));</span><br><span class="line"></span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">levelOrder</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>二叉树</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>二叉树</tag>
      </tags>
  </entry>
  <entry>
    <title>144 二叉树的前序遍历</title>
    <url>/posts/33791.html</url>
    <content><![CDATA[<p>没什么好说的，根左右。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     public $val = null;</span></span><br><span class="line"><span class="comment"> *     public $left = null;</span></span><br><span class="line"><span class="comment"> *     public $right = null;</span></span><br><span class="line"><span class="comment"> *     function __construct($val = 0, $left = null, $right = null) &#123;</span></span><br><span class="line"><span class="comment"> *         $this-&gt;val = $val;</span></span><br><span class="line"><span class="comment"> *         $this-&gt;left = $left;</span></span><br><span class="line"><span class="comment"> *         $this-&gt;right = $right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$val</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$left</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$right</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$val</span> = <span class="number">0</span>, <span class="variable">$left</span> = <span class="literal">null</span>, <span class="variable">$right</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;val = <span class="variable">$val</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;left = <span class="variable">$left</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;right = <span class="variable">$right</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$res</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  TreeNode  $root</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer[]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">preorderTraversal</span>(<span class="params"><span class="variable">$root</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">inorder</span>(<span class="variable">$root</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inorder</span>(<span class="params"><span class="variable">$root</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$root</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;res[] = <span class="variable">$root</span>-&gt;val;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">inorder</span>(<span class="variable">$root</span>-&gt;left);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">inorder</span>(<span class="variable">$root</span>-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">6</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">9</span>), <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">11</span>)), <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">2</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">3</span>) , <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">4</span>)));</span><br><span class="line"></span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">preorderTraversal</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>二叉树</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>二叉树</tag>
      </tags>
  </entry>
  <entry>
    <title>165 比较版本号</title>
    <url>/posts/10638.html</url>
    <content><![CDATA[<p>按逗号分割，分段比较。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">compareVersion</span>(<span class="params"><span class="variable">$version1</span>, <span class="variable">$version2</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$version1</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;.&#x27;</span>, <span class="variable">$version1</span>);</span><br><span class="line">        <span class="variable">$version2</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;.&#x27;</span>, <span class="variable">$version2</span>);</span><br><span class="line">        <span class="variable">$cnt</span> = <span class="title function_ invoke__">max</span>(<span class="title function_ invoke__">count</span>(<span class="variable">$version1</span>), <span class="title function_ invoke__">count</span>(<span class="variable">$version2</span>));</span><br><span class="line">        <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$i</span> &lt; <span class="variable">$cnt</span>) &#123;</span><br><span class="line">            <span class="variable">$v1</span> = <span class="title function_ invoke__">ceil</span>(<span class="variable">$version1</span>[<span class="variable">$i</span>]);</span><br><span class="line">            <span class="variable">$v2</span> = <span class="title function_ invoke__">ceil</span>(<span class="variable">$version2</span>[<span class="variable">$i</span>]);</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$v1</span> &gt; <span class="variable">$v2</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">elseif</span> (<span class="variable">$v1</span> &lt; <span class="variable">$v2</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++<span class="variable">$i</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>其他</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>其他</tag>
        <tag>中等</tag>
      </tags>
  </entry>
  <entry>
    <title>146 LRU缓存</title>
    <url>/posts/47856.html</url>
    <content><![CDATA[<p>直接取值用字典就够了。为实现有限存储位，就引入双向链表。最近存取的值放在开头，超过的就从结尾去除。</p>
<p>双向链表用于记录键值的顺序。</p>
<p>字典负责快速取值。字典的结构时 key-&gt;node。这样可以通过字典快速的操作链表</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DLNode</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$key</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$value</span>;</span><br><span class="line">    <span class="keyword">public</span> ?DLNode <span class="variable">$prev</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> ?DLNode <span class="variable">$next</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * DLNode constructor.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  int  $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  mixed  $value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$key</span> = <span class="number">0</span>, <span class="variable">$value</span> = <span class="number">0</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;key = <span class="variable">$key</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;value = <span class="variable">$value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="variable">$capacity</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="variable">$length</span>;</span><br><span class="line">    <span class="keyword">private</span> DLNode <span class="variable">$head</span>;</span><br><span class="line">    <span class="keyword">private</span> DLNode <span class="variable">$tail</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">array</span> <span class="variable">$cache</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  Integer  $capacity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$capacity</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;capacity = <span class="variable">$capacity</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;length = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;head = <span class="keyword">new</span> <span class="title class_">DLNode</span>();</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;tail = <span class="keyword">new</span> <span class="title class_">DLNode</span>();</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;head-&gt;next = <span class="variable language_">$this</span>-&gt;tail;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;tail-&gt;prev = <span class="variable language_">$this</span>-&gt;head;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;cache = [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  Integer  $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;cache[<span class="variable">$key</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$node</span> = <span class="variable language_">$this</span>-&gt;cache[<span class="variable">$key</span>];</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">moveToHead</span>(<span class="variable">$node</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$node</span>-&gt;value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  Integer  $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  mixed  $value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@void</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">put</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$key</span>, <span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;cache[<span class="variable">$key</span>])) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">moveToHead</span>(<span class="variable">$this</span>-&gt;cache[<span class="variable">$key</span>]);</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;cache[<span class="variable">$key</span>]-&gt;value;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$node</span> = <span class="keyword">new</span> <span class="title class_">DLNode</span>(<span class="variable">$key</span>, <span class="variable">$value</span>);</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;cache[<span class="variable">$key</span>] = <span class="variable">$node</span>;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">addToHead</span>(<span class="variable">$node</span>);</span><br><span class="line">            ++<span class="variable language_">$this</span>-&gt;length;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;length &gt; <span class="variable language_">$this</span>-&gt;capacity) &#123;</span><br><span class="line">                <span class="variable">$node</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">removeTail</span>();</span><br><span class="line">                <span class="keyword">unset</span>(<span class="variable language_">$this</span>-&gt;cache[<span class="variable">$node</span>-&gt;key]);</span><br><span class="line">                --<span class="variable language_">$this</span>-&gt;length;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">dump</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;DUMP:&quot;</span>;</span><br><span class="line">        <span class="variable">$cur</span> = <span class="variable language_">$this</span>-&gt;head;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$cur</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$cur</span>-&gt;value . <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">            <span class="variable">$cur</span> = <span class="variable">$cur</span>-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;END\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">addToHead</span>(<span class="params">DLNode <span class="variable">$node</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$node</span>-&gt;prev = <span class="variable language_">$this</span>-&gt;head;</span><br><span class="line">        <span class="variable">$node</span>-&gt;next = <span class="variable language_">$this</span>-&gt;head-&gt;next;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;head-&gt;next-&gt;prev = <span class="variable">$node</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;head-&gt;next = <span class="variable">$node</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">removeNode</span>(<span class="params">DLNode <span class="variable">$node</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$node</span>-&gt;prev-&gt;next = <span class="variable">$node</span>-&gt;next;</span><br><span class="line">        <span class="variable">$node</span>-&gt;next-&gt;prev = <span class="variable">$node</span>-&gt;prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">moveToHead</span>(<span class="params">DLNode <span class="variable">$node</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">removeNode</span>(<span class="variable">$node</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">addToHead</span>(<span class="variable">$node</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">removeTail</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$node</span> = <span class="variable language_">$this</span>-&gt;tail-&gt;prev;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">removeNode</span>(<span class="variable">$node</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$node</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// [&quot;LRUCache&quot;,&quot;put&quot;,&quot;put&quot;,&quot;get&quot;,&quot;put&quot;,&quot;get&quot;,&quot;put&quot;,&quot;get&quot;,&quot;get&quot;,&quot;get&quot;]</span></span><br><span class="line"><span class="comment">// [[2],[1,1],[2,2],[1],[3,3],[2],[4,4],[1],[3],[4]]</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$obj</span> = <span class="keyword">new</span> <span class="title class_">LRUCache</span>(<span class="number">2</span>);</span><br><span class="line"><span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">put</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">put</span>(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="number">1</span>), <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">put</span>(<span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="number">2</span>), <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">put</span>(<span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="number">1</span>), <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="number">3</span>), <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="number">4</span>), <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$obj</span>-&gt;<span class="title function_ invoke__">dump</span>();</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>链表</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>中等</tag>
        <tag>链表</tag>
        <tag>双向链表</tag>
      </tags>
  </entry>
  <entry>
    <title>189 轮转数组</title>
    <url>/posts/27444.html</url>
    <content><![CDATA[<h3 id="使用额外数组"><a href="#使用额外数组" class="headerlink" title="使用额外数组"></a>使用额外数组</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">rotate</span>(<span class="params">&amp;<span class="variable">$nums</span>, <span class="variable">$k</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$len</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$nums</span>);</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$k</span> % <span class="variable">$len</span>;</span><br><span class="line">        <span class="variable">$new</span> = [];</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$nums</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">            <span class="variable">$new</span>[<span class="variable">$key</span>] = <span class="variable">$nums</span>[<span class="variable">$key</span> - <span class="variable">$k</span>] ?? <span class="variable">$nums</span>[<span class="variable">$len</span> + <span class="variable">$key</span> - <span class="variable">$k</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$nums</span> = <span class="variable">$new</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="环状替换"><a href="#环状替换" class="headerlink" title="环状替换"></a>环状替换</h3><p>略过，官方答案一时没能看全。</p>
<h3 id="数组翻转"><a href="#数组翻转" class="headerlink" title="数组翻转"></a>数组翻转</h3><p>建立数学模型，发现轮转数组其实可以通过翻转的形式完成。</p>
<p>对于数组[a,b,c,d,e,f,g]，翻转3次，可以</p>
<ol>
<li>先把数组整体翻转 [g,f,e,d,c,b,a]</li>
<li>再反转数组后半没有「掉头」的部分 [g,f,e,a,b,c,d]</li>
</ol>
<p>代码略</p>
]]></content>
      <categories>
        <category>算法</category>
        <category>其他</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>中等</tag>
      </tags>
  </entry>
  <entry>
    <title>2 两数相加</title>
    <url>/posts/61118.html</url>
    <content><![CDATA[<p>这题没什么好说的，遍历链表依次相加。注意下进位就好了。</p>
]]></content>
      <categories>
        <category>算法</category>
        <category>链表</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>链表</tag>
      </tags>
  </entry>
  <entry>
    <title>20 有效的括号</title>
    <url>/posts/37727.html</url>
    <content><![CDATA[<h3 id="利用栈处理"><a href="#利用栈处理" class="headerlink" title="利用栈处理"></a>利用栈处理</h3><p>没什么难度。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isValid</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$s</span></span>): <span class="title">bool</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$cnt</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$s</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$cnt</span> &amp; <span class="number">1</span>==<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$isMatch</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$s1</span>, <span class="variable">$s2</span></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="variable">$s1</span>==<span class="string">&#x27;&#123;&#x27;</span> &amp;&amp; <span class="variable">$s2</span> ==<span class="string">&#x27;&#125;&#x27;</span>)</span><br><span class="line">                ||(<span class="variable">$s1</span>==<span class="string">&#x27;[&#x27;</span> &amp;&amp; <span class="variable">$s2</span> ==<span class="string">&#x27;]&#x27;</span>)</span><br><span class="line">                ||(<span class="variable">$s1</span>==<span class="string">&#x27;(&#x27;</span> &amp;&amp; <span class="variable">$s2</span> ==<span class="string">&#x27;)&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$stack</span> = <span class="keyword">new</span> <span class="built_in">SplStack</span>();</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$i</span> &lt; <span class="variable">$cnt</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable">$stack</span>-&gt;<span class="title function_ invoke__">isEmpty</span>() &amp;&amp; <span class="variable">$isMatch</span>(<span class="variable">$stack</span>-&gt;<span class="title function_ invoke__">top</span>(), <span class="variable">$s</span>[<span class="variable">$i</span>])) &#123;</span><br><span class="line">                <span class="variable">$stack</span>-&gt;<span class="title function_ invoke__">pop</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$stack</span>-&gt;<span class="title function_ invoke__">push</span>(<span class="variable">$s</span>[<span class="variable">$i</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            ++<span class="variable">$i</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stack</span>-&gt;<span class="title function_ invoke__">isEmpty</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h3><p>这个是刚刚看到的一个有趣的解法，尽管不够好，但是自己经常用，居然没有想到。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">isValid</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$s</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">strlen</span>(<span class="variable">$s</span>) &amp; <span class="number">1</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">false</span> !== <span class="title function_ invoke__">strpos</span>(<span class="variable">$s</span>, <span class="string">&#x27;()&#x27;</span>)</span><br><span class="line">            || <span class="literal">false</span> !== <span class="title function_ invoke__">strpos</span>(<span class="variable">$s</span>, <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">            || <span class="literal">false</span> !== <span class="title function_ invoke__">strpos</span>(<span class="variable">$s</span>, <span class="string">&#x27;[]&#x27;</span>)) &#123;</span><br><span class="line">            <span class="variable">$s</span> = <span class="title function_ invoke__">str_replace</span>([<span class="string">&#x27;()&#x27;</span>, <span class="string">&#x27;[]&#x27;</span>, <span class="string">&#x27;&#123;&#125;&#x27;</span>], <span class="string">&#x27;&#x27;</span>, <span class="variable">$s</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> == <span class="title function_ invoke__">strlen</span>(<span class="variable">$s</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>堆</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>堆</tag>
      </tags>
  </entry>
  <entry>
    <title>167 两数之和 有序数列</title>
    <url>/posts/17323.html</url>
    <content><![CDATA[<p>双指针之对撞指针</p>
<h3 id="双指针"><a href="#双指针" class="headerlink" title="双指针"></a>双指针</h3><p>如果数组本身是有顺序的。如下遍历，对于有递增数组，如果 ai + aj &gt; sum, 则 ai + a(j+x)  &gt; sum，反之如果 ai + aj &lt; sum,则 a(i-x) + aj &lt; sum。这样便可使用双指针之对撞指针。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">twoSum</span>(<span class="params"><span class="variable">$numbers</span>, <span class="variable">$target</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$len</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$numbers</span>);</span><br><span class="line">        <span class="variable">$l</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$r</span> = <span class="variable">$len</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$l</span> &lt;= <span class="variable">$r</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$numbers</span>[<span class="variable">$l</span>] + <span class="variable">$numbers</span>[<span class="variable">$r</span>] &gt; <span class="variable">$target</span>) &#123;</span><br><span class="line">                --<span class="variable">$r</span>;</span><br><span class="line">            &#125; <span class="keyword">elseif</span> (<span class="variable">$numbers</span>[<span class="variable">$l</span>] + <span class="variable">$numbers</span>[<span class="variable">$r</span>] &lt; <span class="variable">$target</span>) &#123;</span><br><span class="line">                ++<span class="variable">$l</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> [<span class="variable">$l</span>+<span class="number">1</span>, <span class="variable">$r</span>+<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">12</span>,<span class="number">83</span>,<span class="number">104</span>,<span class="number">129</span>,<span class="number">140</span>,<span class="number">184</span>,<span class="number">199</span>,<span class="number">300</span>,<span class="number">306</span>,<span class="number">312</span>,<span class="number">321</span>,<span class="number">325</span>,<span class="number">341</span>,<span class="number">344</span>,<span class="number">349</span>,<span class="number">356</span>,<span class="number">370</span>,<span class="number">405</span>,<span class="number">423</span>,<span class="number">444</span>,<span class="number">446</span>,<span class="number">465</span>,<span class="number">471</span>,<span class="number">491</span>,<span class="number">500</span>,<span class="number">506</span>,<span class="number">508</span>,<span class="number">530</span>,<span class="number">539</span>,<span class="number">543</span>,<span class="number">569</span>,<span class="number">591</span>,<span class="number">606</span>,<span class="number">607</span>,<span class="number">612</span>,<span class="number">614</span>,<span class="number">623</span>,<span class="number">627</span>,<span class="number">645</span>,<span class="number">662</span>,<span class="number">670</span>,<span class="number">685</span>,<span class="number">689</span>,<span class="number">726</span>,<span class="number">731</span>,<span class="number">737</span>,<span class="number">744</span>,<span class="number">747</span>,<span class="number">764</span>,<span class="number">773</span>,<span class="number">778</span>,<span class="number">787</span>,<span class="number">802</span>,<span class="number">805</span>,<span class="number">811</span>,<span class="number">819</span>,<span class="number">829</span>,<span class="number">841</span>,<span class="number">879</span>,<span class="number">905</span>,<span class="number">918</span>,<span class="number">918</span>,<span class="number">929</span>,<span class="number">955</span>,<span class="number">997</span>];</span><br><span class="line"><span class="variable">$target</span> = <span class="number">789</span>;</span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">twoSum</span>(<span class="variable">$numbers</span>, <span class="variable">$target</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>双指针</category>
        <category>对撞指针</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>双指针</tag>
        <tag>中等</tag>
        <tag>对撞指针</tag>
      </tags>
  </entry>
  <entry>
    <title>206 翻转链表</title>
    <url>/posts/5069.html</url>
    <content><![CDATA[<p>递归对调链接指向</p>
<span id="more"></span>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$val</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$next</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$val</span> = <span class="number">0</span>, <span class="variable">$next</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;val = <span class="variable">$val</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;next = <span class="variable">$next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleList</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$first</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params"><span class="variable">$val</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;first)) &#123;</span><br><span class="line">            <span class="variable">$cur</span> = <span class="variable language_">$this</span>-&gt;first;</span><br><span class="line">            <span class="keyword">while</span> (<span class="variable">$cur</span>-&gt;next) &#123;</span><br><span class="line">                <span class="variable">$cur</span> = <span class="variable">$cur</span>-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$cur</span>-&gt;next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="variable">$val</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;first = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="variable">$val</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ListNode $head</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ListNode</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reverseList</span>(<span class="params"><span class="variable">$head</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$cur</span> = <span class="variable">$head</span>;</span><br><span class="line">        <span class="variable">$prev</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$cur</span>-&gt;next !== <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="variable">$next</span> = <span class="variable">$cur</span>-&gt;next;</span><br><span class="line">            <span class="variable">$cur</span>-&gt;next = <span class="variable">$prev</span>;</span><br><span class="line">            <span class="variable">$prev</span> = <span class="variable">$cur</span>;</span><br><span class="line">            <span class="variable">$cur</span> = <span class="variable">$next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$cur</span>-&gt;next = <span class="variable">$prev</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$cur</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$singleList</span> = <span class="keyword">new</span> <span class="title class_">SingleList</span>();</span><br><span class="line"><span class="variable">$head</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$head</span> <span class="keyword">as</span> <span class="variable">$item</span>) &#123;</span><br><span class="line">    <span class="variable">$singleList</span>-&gt;<span class="title function_ invoke__">insert</span>(<span class="variable">$item</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">reverseList</span>(<span class="variable">$singleList</span>-&gt;first);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$res</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>链表</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>链表</tag>
        <tag>简单</tag>
        <tag>todo</tag>
      </tags>
  </entry>
  <entry>
    <title>215 第K个最大值</title>
    <url>/posts/31953.html</url>
    <content><![CDATA[<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">findKthLargest</span>(<span class="params"><span class="variable">$nums</span>, <span class="variable">$k</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">rsort</span>(<span class="variable">$nums</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$nums</span>[<span class="variable">$k</span> - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$s</span> = <span class="keyword">new</span> <span class="title class_">Solution</span>();</span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$s</span>-&gt;<span class="title function_ invoke__">findKthLargest</span>([<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>], <span class="number">4</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>中等</tag>
        <tag>todo</tag>
      </tags>
  </entry>
  <entry>
    <title>278 第一个错误版本</title>
    <url>/posts/22894.html</url>
    <content><![CDATA[<p>采用 二分法 + 对撞指针。</p>
<span id="more"></span>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VersionControl</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$badVersion</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setBadVersion</span>(<span class="params"><span class="variable">$version</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;badVersion = <span class="variable">$version</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isBadVersion</span>(<span class="params"><span class="variable">$v</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$v</span> &gt;= <span class="variable language_">$this</span>-&gt;badVersion;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> <span class="keyword">extends</span> <span class="title">VersionControl</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $n</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">firstBadVersion</span>(<span class="params"><span class="variable">$n</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$left</span> = <span class="number">1</span>;</span><br><span class="line">        <span class="variable">$right</span> = <span class="variable">$n</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$left</span> &lt; <span class="variable">$right</span>) &#123;</span><br><span class="line">            <span class="variable">$middle</span> = (<span class="variable">$right</span> + <span class="variable">$left</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">isBadVersion</span>(<span class="variable">$middle</span>)) &#123;</span><br><span class="line">                <span class="variable">$right</span> = <span class="variable">$middle</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$left</span> = <span class="variable">$middle</span> + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$left</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$test</span> = <span class="keyword">new</span> <span class="title class_">Solution</span>();</span><br><span class="line"><span class="variable">$test</span>-&gt;<span class="title function_ invoke__">setBadVersion</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$test</span>-&gt;<span class="title function_ invoke__">firstBadVersion</span>(<span class="number">7</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>双指针</category>
        <category>对撞针</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>双指针</tag>
        <tag>中等</tag>
        <tag>对撞针</tag>
      </tags>
  </entry>
  <entry>
    <title>344 翻转字符串</title>
    <url>/posts/b3295724.html</url>
    <content><![CDATA[<p><a href="https://leetcode-cn.com/problems/reverse-string/">问题</a></p>
<p>采用双指针之对撞针</p>
<p>两头开花，对调后往中间靠拢</p>
<span id="more"></span>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  String[]  $s</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> NULL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reverseString</span>(<span class="params">&amp;<span class="variable">$s</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$len</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$s</span>);</span><br><span class="line">        <span class="variable">$l</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$r</span> = <span class="variable">$len</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$r</span> &gt; <span class="variable">$l</span>) &#123;</span><br><span class="line">            <span class="keyword">list</span>(<span class="variable">$s</span>[<span class="variable">$r</span>], <span class="variable">$s</span>[<span class="variable">$l</span>]) = [<span class="variable">$s</span>[<span class="variable">$l</span>], <span class="variable">$s</span>[<span class="variable">$r</span>]];</span><br><span class="line">            --<span class="variable">$r</span>;</span><br><span class="line">            ++<span class="variable">$l</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$s</span> = [<span class="string">&quot;H&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;h&quot;</span>];</span><br><span class="line">(<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">reverseString</span>(<span class="variable">$s</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$s</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>双指针</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>双指针</tag>
        <tag>简单</tag>
        <tag>对撞针</tag>
      </tags>
  </entry>
  <entry>
    <title>35 搜索插入位置</title>
    <url>/posts/40493.html</url>
    <content><![CDATA[<p>简单地使用二分法，特别要注意「边界」。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">searchInsert</span>(<span class="params"><span class="variable">$nums</span>, <span class="variable">$target</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$l</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$r</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$nums</span>) - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$l</span> &lt;= <span class="variable">$r</span>) &#123;</span><br><span class="line">            <span class="variable">$center</span> = (<span class="variable">$l</span> + <span class="variable">$r</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$nums</span>[<span class="variable">$center</span>] == <span class="variable">$target</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$center</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$nums</span>[<span class="variable">$center</span>] &gt; <span class="variable">$target</span>) &#123;</span><br><span class="line">                    <span class="variable">$r</span> = <span class="variable">$center</span> - <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable">$l</span> = <span class="variable">$center</span> + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$l</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>二分法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>二分法</tag>
      </tags>
  </entry>
  <entry>
    <title>53 最大子数和</title>
    <url>/posts/65317.html</url>
    <content><![CDATA[<p>一次循环搞定。</p>
<p>如果 a+b&lt;b，则 a+b+c&lt;b+c。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">maxSubArray</span>(<span class="params"><span class="variable">$nums</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$res</span> = <span class="variable">$temp</span> = <span class="variable">$nums</span>[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$nums</span> <span class="keyword">as</span> <span class="variable">$num</span>) &#123;</span><br><span class="line">            <span class="variable">$temp</span> = <span class="title function_ invoke__">max</span>(<span class="variable">$num</span>, (<span class="variable">$temp</span> + <span class="variable">$num</span>));</span><br><span class="line">            <span class="variable">$res</span> = <span class="title function_ invoke__">max</span>(<span class="variable">$temp</span>, <span class="variable">$res</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$res</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只要temp不为负，就可以递增。</p>
<p>不知道为什么，一开始想到的是 $temp &#x3D; max($temp, ($temp + $num)); 想破头也没看出啥不对。一开始思路错了，怎么也挽不回了~~~还是看了之前的代码才知道问题所在。</p>
]]></content>
      <categories>
        <category>算法</category>
        <category>回溯</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>回溯</tag>
      </tags>
  </entry>
  <entry>
    <title>283 移动零</title>
    <url>/posts/7b88d493.html</url>
    <content><![CDATA[<p><a href="https://leetcode-cn.com/problems/move-zeroes/">问题</a></p>
<p>采用双指针之快慢针。</p>
<p>快针找零，慢针纪录最后一个互换的位置。然后快慢两针对调</p>
<span id="more"></span>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  Integer[]  $nums</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> NULL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">moveZeroes</span>(<span class="params">&amp;<span class="variable">$nums</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$l</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$r</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$r</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$nums</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$nums</span>[<span class="variable">$r</span>] !== <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$l</span>.<span class="string">&#x27;--&#x27;</span>.<span class="variable">$r</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;<span class="keyword">switch</span>(<span class="variable">$nums</span>[<span class="variable">$r</span>], <span class="variable">$nums</span>[<span class="variable">$l</span>]);</span><br><span class="line">                ++<span class="variable">$l</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++<span class="variable">$r</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">switch</span>(<span class="params">&amp;<span class="variable">$a</span>, &amp;<span class="variable">$b</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$temp</span> = <span class="variable">$a</span>;</span><br><span class="line">        <span class="variable">$a</span> = <span class="variable">$b</span>;</span><br><span class="line">        <span class="variable">$b</span> = <span class="variable">$temp</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$nums</span> = [<span class="number">45192</span>, <span class="number">0</span>, -<span class="number">659</span>, -<span class="number">52359</span>, -<span class="number">99225</span>, -<span class="number">75991</span>, <span class="number">0</span>, -<span class="number">15155</span>, <span class="number">27382</span>, <span class="number">59818</span>, <span class="number">0</span>, -<span class="number">30645</span>, -<span class="number">17025</span>, <span class="number">81209</span>, <span class="number">887</span>, <span class="number">64648</span>];</span><br><span class="line">(<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">moveZeroes</span>(<span class="variable">$nums</span>);</span><br><span class="line"><span class="title function_ invoke__">print_R</span>(<span class="variable">$nums</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>双指针</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>双指针</tag>
        <tag>快慢针</tag>
        <tag>简单</tag>
      </tags>
  </entry>
  <entry>
    <title>415 字符串相加</title>
    <url>/posts/9472ef25.html</url>
    <content><![CDATA[<p><a href="https://leetcode-cn.com/problems/add-strings/">问题</a></p>
<p>注意进位</p>
<span id="more"></span>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> String $num1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> String $num2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addStrings</span>(<span class="params"><span class="variable">$num1</span>, <span class="variable">$num2</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$cnt1</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$num1</span>);</span><br><span class="line">        <span class="variable">$cnt2</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$num2</span>);</span><br><span class="line">        <span class="variable">$num1</span> = <span class="title function_ invoke__">strrev</span>(<span class="variable">$num1</span>);</span><br><span class="line">        <span class="variable">$num2</span> = <span class="title function_ invoke__">strrev</span>(<span class="variable">$num2</span>);</span><br><span class="line">        <span class="variable">$cnt</span> = <span class="title function_ invoke__">max</span>(<span class="variable">$cnt1</span>, <span class="variable">$cnt2</span>);</span><br><span class="line">        <span class="variable">$i</span> = <span class="variable">$carry</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$r</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$i</span> &lt; <span class="variable">$cnt</span> || <span class="variable">$carry</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable">$n1</span> = <span class="variable">$i</span> &lt; <span class="variable">$cnt1</span> ? <span class="variable">$num1</span>[<span class="variable">$i</span>] : <span class="number">0</span>;</span><br><span class="line">            <span class="variable">$n2</span> = <span class="variable">$i</span> &lt; <span class="variable">$cnt2</span> ? <span class="variable">$num2</span>[<span class="variable">$i</span>] : <span class="number">0</span>;</span><br><span class="line">            <span class="variable">$s</span> = <span class="variable">$n1</span> + <span class="variable">$n2</span> + <span class="variable">$carry</span>;</span><br><span class="line">            <span class="variable">$carry</span> = <span class="title function_ invoke__">intval</span>(<span class="variable">$s</span> / <span class="number">10</span>);</span><br><span class="line">            <span class="variable">$s</span> = <span class="variable">$s</span> % <span class="number">10</span>;</span><br><span class="line">            <span class="variable">$r</span> = <span class="variable">$s</span> . <span class="variable">$r</span>;</span><br><span class="line">            ++<span class="variable">$i</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$r</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>简单</tag>
      </tags>
  </entry>
  <entry>
    <title>567 字符串的排列</title>
    <url>/posts/aa6c1bb9.html</url>
    <content><![CDATA[<p><a href="https://leetcode-cn.com/problems/permutation-in-string/">问题</a></p>
<span id="more"></span>

]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>中等</tag>
      </tags>
  </entry>
  <entry>
    <title>557 翻转字符串中的单词</title>
    <url>/posts/bacb5d62.html</url>
    <content><![CDATA[<p><a href="https://leetcode-cn.com/problems/reverse-words-in-a-string-iii/">问题</a></p>
<span id="more"></span>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  String  $s</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">reverseWords</span>(<span class="params"><span class="variable">$s</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$len</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$s</span>);</span><br><span class="line">        <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$res</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$i</span> &lt; <span class="variable">$len</span>) &#123;</span><br><span class="line">            <span class="variable">$end</span> = <span class="variable">$i</span>;</span><br><span class="line">            <span class="keyword">while</span> (<span class="variable">$end</span> &lt; <span class="variable">$len</span> &amp;&amp; <span class="variable">$s</span>[<span class="variable">$end</span>] != <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$end</span>++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="variable">$end</span> - <span class="number">1</span>; <span class="variable">$j</span> &gt;= <span class="variable">$i</span>; <span class="variable">$j</span>--) &#123;</span><br><span class="line">                <span class="variable">$res</span> .= <span class="variable">$s</span>[<span class="variable">$j</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$end</span> &lt; <span class="variable">$len</span>) &#123;</span><br><span class="line">                <span class="variable">$res</span> .= <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    </span><br><span class="line">            <span class="variable">$i</span> = <span class="variable">$end</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$res</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$s</span> = <span class="string">&quot;abcde  abcde  &quot;</span>;</span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">reverseWords</span>(<span class="variable">$s</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>简单</tag>
      </tags>
  </entry>
  <entry>
    <title>70 爬楼梯</title>
    <url>/posts/48486.html</url>
    <content><![CDATA[<p>每一层的可能说都是 倒数第一层（爬一层） + 倒数第二层（爬两层），故得：</p>
<p>f(n) &#x3D; f(n-1) + f(n-2)</p>
<p>好吧，就是斐波那契数列</p>
<span id="more"></span>

<p>使用递归，从后往前推，直到推出f(1)或f(2)，不过这样其实已经超了</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">climbStairs</span>(<span class="params"><span class="variable">$n</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$n</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$n</span> == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">climbStairs</span>(<span class="variable">$n</span> - <span class="number">1</span>) + <span class="title function_ invoke__">climbStairs</span>(<span class="variable">$n</span> - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>换个方向，从前往后推，把每一层都推出来，直到最后，可以省下不少递归消耗的时空</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">climbStairs</span>(<span class="params"><span class="variable">$n</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$j</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$k</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="variable">$tmp</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$n</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="variable">$tmp</span> = <span class="variable">$j</span> + <span class="variable">$k</span>;</span><br><span class="line">        <span class="variable">$j</span> = <span class="variable">$k</span>;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$tmp</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$tmp</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>回溯</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>回溯</tag>
      </tags>
  </entry>
  <entry>
    <title>94 二叉树的中序遍历</title>
    <url>/posts/51317.html</url>
    <content><![CDATA[<p>没什么可说的，中序遍历就是 左根右</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$val</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$left</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$right</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$val</span> = <span class="number">0</span>, <span class="variable">$left</span> = <span class="literal">null</span>, <span class="variable">$right</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;val = <span class="variable">$val</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;left = <span class="variable">$left</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;right = <span class="variable">$right</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$res</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  TreeNode  $root</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Integer[]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inorderTraversal</span>(<span class="params"><span class="variable">$root</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">inorder</span>(<span class="variable">$root</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inorder</span>(<span class="params"><span class="variable">$root</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$root</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">inorder</span>(<span class="variable">$root</span>-&gt;left);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;res[] = <span class="variable">$root</span>-&gt;val;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">inorder</span>(<span class="variable">$root</span>-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">6</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">9</span>), <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">11</span>)), <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">2</span>, <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">3</span>) , <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">4</span>)));</span><br><span class="line"></span><br><span class="line"><span class="variable">$res</span> = (<span class="keyword">new</span> <span class="title class_">Solution</span>())-&gt;<span class="title function_ invoke__">inorderTraversal</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>二叉树</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>二叉树</tag>
      </tags>
  </entry>
  <entry>
    <title>88 合并两个有序数组</title>
    <url>/posts/38388.html</url>
    <content><![CDATA[<p>没啥好说的，细心就好了</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer[] $nums1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $m</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer[] $nums2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> Integer $n</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> NULL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params">&amp;<span class="variable">$nums1</span>, <span class="variable">$m</span>, <span class="variable">$nums2</span>, <span class="variable">$n</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$n</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$m</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="variable">$nums1</span> = <span class="variable">$nums2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$k</span> = <span class="variable">$m</span> + <span class="variable">$n</span> - <span class="number">1</span>;</span><br><span class="line">        <span class="variable">$m</span>--;</span><br><span class="line">        <span class="variable">$n</span>--;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$k</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$n</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$nums1</span>[<span class="variable">$k</span>] = <span class="variable">$nums1</span>[<span class="variable">$m</span>];</span><br><span class="line">                <span class="variable">$m</span>--;</span><br><span class="line">            &#125; <span class="keyword">elseif</span> (<span class="variable">$m</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$nums1</span>[<span class="variable">$k</span>] = <span class="variable">$nums2</span>[<span class="variable">$n</span>];</span><br><span class="line">                <span class="variable">$n</span>--;</span><br><span class="line">            &#125; <span class="keyword">elseif</span> (<span class="variable">$nums1</span>[<span class="variable">$m</span>] &lt; <span class="variable">$nums2</span>[<span class="variable">$n</span>]) &#123;</span><br><span class="line">                <span class="variable">$nums1</span>[<span class="variable">$k</span>] = <span class="variable">$nums2</span>[<span class="variable">$n</span>];</span><br><span class="line">                <span class="variable">$n</span>--;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$nums1</span>[<span class="variable">$k</span>] = <span class="variable">$nums1</span>[<span class="variable">$m</span>];</span><br><span class="line">                <span class="variable">$m</span>--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$k</span>--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>算法</category>
        <category>数组</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>数组</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 位运算</title>
    <url>/posts/12526.html</url>
    <content><![CDATA[<p><a href="https://www.php.net/manual/zh/language.operators.bitwise.php">位运算符</a></p>
<table>
<thead>
<tr>
<th>例子</th>
<th>名称</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>$a &amp; $b</td>
<td>And（按位与）</td>
<td>将把 $a 和 $b 中都为 1 的位设为 1。</td>
</tr>
<tr>
<td>$a &amp;#124; $b</td>
<td>Or（按位或）</td>
<td>将把 $a 和 $b 中任何一个为 1 的位设为 1。</td>
</tr>
<tr>
<td>$a ^ $b</td>
<td>Xor（按位异或）</td>
<td>将把 $a 和 $b 中一个为 1 另一个为 0 的位设为 1。</td>
</tr>
<tr>
<td>~ $a</td>
<td>Not（按位取反）</td>
<td>将 $a 中为 0 的位设为 1，反之亦然。</td>
</tr>
<tr>
<td>$a &lt;&lt; $b</td>
<td>Shift left（左移）</td>
<td>将 $a 中的位向左移动 $b 次（每一次移动都表示“乘以 2”）。</td>
</tr>
<tr>
<td>$a &gt;&gt; $b</td>
<td>Shift right（右移）</td>
<td>将 $a 中的位向右移动 $b 次（每一次移动都表示“除以 2”）。</td>
</tr>
</tbody></table>
]]></content>
      <tags>
        <tag>位运算</tag>
      </tags>
  </entry>
  <entry>
    <title>集合运算法则</title>
    <url>/posts/a1ef8378.html</url>
    <content><![CDATA[<h2 id="集合运算法则"><a href="#集合运算法则" class="headerlink" title="集合运算法则"></a>集合运算法则</h2><p>交换律：A∩B&#x3D;B∩A；A∪B&#x3D;B∪A</p>
<p>结合律：A∪(B∪C)&#x3D;(A∪B)∪C；A∩(B∩C)&#x3D;(A∩B)∩C</p>
<p>分配对偶律：A∩(B∪C)&#x3D;(A∩B)∪(A∩C)；A∪(B∩C)&#x3D;(A∪B)∩(A∪C)</p>
<p>对偶律：(A∪B)^C&#x3D;A^C∩B^C；(A∩B)^C&#x3D;A^C∪B^C</p>
<p>同一律：A∪∅&#x3D;A；A∩U&#x3D;A</p>
<p>求补律：A∪A’&#x3D;U；A∩A’&#x3D;∅</p>
<p>对合律：A’’&#x3D;A</p>
<p>等幂律：A∪A&#x3D;A；A∩A&#x3D;A</p>
<p>零一律：A∪U&#x3D;U；A∩∅&#x3D;∅</p>
<p>吸收律：A∪(A∩B)&#x3D;A；A∩(A∪B)&#x3D;A</p>
<p>反演律（德·摩根律）：(A∪B)’&#x3D;A’∩B’；(A∩B)’&#x3D;A’∪B’。文字表述：1.集合A与集合B的并集的补集等于集合A的补集与集合B的补集的交集;2.集合A与集合B的交集的补集等于集合A的补集与集合B的补集的并集。</p>
<p>容斥原理（特殊情况）：</p>
<p>card(A∪B)&#x3D;card(A)+card(B)-card(A∩B)</p>
<p>card(A∪B∪C)&#x3D;card(A)+card(B)+card(C)-card(A∩B)-card(B∩C)-card(C∩A)+card(A∩B∩C)。</p>
]]></content>
  </entry>
  <entry>
    <title>Excel简单应用</title>
    <url>/posts/17238.html</url>
    <content><![CDATA[<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><h3 id="筛选"><a href="#筛选" class="headerlink" title="筛选"></a>筛选</h3><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><ul>
<li>vlockup</li>
<li>sumif</li>
<li>sort</li>
</ul>
<h4 id="两对单元格比较"><a href="#两对单元格比较" class="headerlink" title="两对单元格比较"></a>两对单元格比较</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">=CONCAT(IF((A50=Log!F:F) * (B50=Log!B:B),Log!G:G,&quot;&quot;))</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<p>其中「*」是逻辑与，「+」是逻辑或。</p>
<p>逻辑非就只有 not() 了。</p>
<p>使用 concat 是因为两列数据都满足的情况可能不止一个，所以用此方法做了连接。</p>
<h3 id="透视表"><a href="#透视表" class="headerlink" title="透视表"></a>透视表</h3><ul>
<li>切片</li>
</ul>
]]></content>
      <categories>
        <category>Excel</category>
      </categories>
      <tags>
        <tag>Excel</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 遇到的问题</title>
    <url>/posts/56639.html</url>
    <content><![CDATA[<p>记录一下问题</p>
<ul>
<li>hexo-renderer-sass失效，原因是nodejs版本过高。这个其实是有链接提示的。</li>
<li>hexo-filter-kroki 安装失败，不清楚具体原因，后来删除 node_modules，并使用cnpm安装就解决了。</li>
<li>gitee pages 一直不刷新。好吧，gitee免费的gitee没有自动刷新，需要代码库-&gt;服务-&gt;gitee pages页面手动触发更新按钮。</li>
</ul>
<p>记录这次安装插件hexo-filter-kroki的过程：</p>
<p>没有系统地看过node，好多概念不知道。不少安装报错还是可以通过提示直接查到的。不过我也是后知后觉，都是跳过信息直接百度的。</p>
<p>主要是想使用markdown直接绘制思维导图等plantuml，百度到了插件hexo-filter-kroki。只是安装各种报错。</p>
<p>也没有细看错误信息，直接升级hexo。</p>
<p>然后css之类的不加载之类的问题出现了。</p>
<p>好吧，css不加载是主题依赖的插件hexo-renderer-sass失效了，失效的原因是我本地node版本过高，之前没有发现是没有执行过 hexo clean。</p>
<p>之后就是node降级（用的还是最笨的方法，卸载重安装）。现在终于好了。是得找空过一下nodejs。</p>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>刷题笔记</title>
    <url>/posts/32476.html</url>
    <content><![CDATA[<h3 id="二分法"><a href="#二分法" class="headerlink" title="二分法"></a>二分法</h3><p>二分法是找出有序集中的一个解。</p>
<p>写整数二分法的时候经常忘记边际条件，注意一下。</p>
<h3 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h3><p>三种遍历顺序其实就是根节点放在哪个位置，左右节点一直就是左右。比如前序遍历就是把根节点放在第一位。</p>
]]></content>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>PhpStorm 插件</title>
    <url>/posts/56968.html</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>常用插件名称</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td>KJump</td>
<td align="left">键盘操作的光标定位</td>
</tr>
<tr>
<td>Rainbow Brackets</td>
<td align="left">加强空格、tab、括号的展示效果</td>
</tr>
<tr>
<td>WakaTime</td>
<td align="left">记录编写代码的时间</td>
</tr>
<tr>
<td>LeetCode Editor</td>
<td align="left">可方便地使用idea刷题</td>
</tr>
<tr>
<td>Key Promoter X</td>
<td align="left">快捷键说明</td>
</tr>
<tr>
<td>Idea Mind Map</td>
<td align="left">简单的 Mind Map 绘制工具</td>
</tr>
<tr>
<td>Markdown</td>
<td align="left">markdown</td>
</tr>
<tr>
<td>IdeaVim</td>
<td align="left">Vim 编辑模式</td>
</tr>
<tr>
<td>PlantUml integration</td>
<td align="left">绘图，配合markdown、hexo食用效果不俗</td>
</tr>
<tr>
<td>Translation</td>
<td align="left">翻译软件</td>
</tr>
<tr>
<td>Key Promoter X</td>
<td align="left">快捷键提示</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>idea</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>VS code 设置</title>
    <url>/posts/42295.html</url>
    <content><![CDATA[<h1 id="使用的插件"><a href="#使用的插件" class="headerlink" title="使用的插件"></a>使用的插件</h1><ul>
<li>run code</li>
<li>PHP intelephense</li>
<li>MySQL</li>
<li></li>
<li></li>
</ul>
<h1 id="光标移动到折叠代码会自动打开折叠"><a href="#光标移动到折叠代码会自动打开折叠" class="headerlink" title="光标移动到折叠代码会自动打开折叠"></a>光标移动到折叠代码会自动打开折叠</h1><p>设置搜索 vim:foldfix 并开启它</p>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
      <categories>
        <category>vscode</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>JMeter 操作中遇到的坑</title>
    <url>/posts/20805.html</url>
    <content><![CDATA[<h3 id="Http-请求，从剪切板添加参数"><a href="#Http-请求，从剪切板添加参数" class="headerlink" title="Http 请求，从剪切板添加参数"></a>Http 请求，从剪切板添加参数</h3><p>「从剪切板复制」这个功能是不能识别从浏览器直接复制过来的json字符串的。</p>
<p>不过多了些转化，比一个个复制快得多了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rptfilters[countryregion.id]</span><br><span class="line">rptfilters[region.id]</span><br><span class="line">rptfilters[branch.id]</span><br><span class="line">rptfilters[office.id]</span><br><span class="line">rptfilters[month]	 2</span><br><span class="line">rptfilters[runyear]	 2020</span><br><span class="line">rptfilters[monthStart]	 0</span><br><span class="line">rptfilters[runyearStart]	 0</span><br><span class="line">rptfilters[monthEnd]	 0</span><br><span class="line">rptfilters[runyearEnd]	 0</span><br><span class="line">rptfilters[dateStart]</span><br><span class="line">rptfilters[dateEnd]</span><br><span class="line">rptfilters[currentsupercheck]	 1</span><br><span class="line">rptfilters[plannedsupercheck]	 1</span><br><span class="line">supervisor_select	 all</span><br><span class="line">run_select	 all</span><br><span class="line">rptfilters[building.id]_label</span><br><span class="line">rptfilters[building.id]</span><br><span class="line">hasactualbutnoplan</span><br><span class="line">otheroption[PlanVisitHours]	 on</span><br><span class="line">rptfilters[sortby]</span><br><span class="line">page	 1</span><br></pre></td></tr></table></figure>

<p>这样就行了。总结起来就是：</p>
<ol>
<li>删除所有的双引号</li>
<li>把「:」转化成「(\t)」</li>
<li>ba「,」转化成「(\n)」</li>
</ol>
<h3 id="Header请求头数据"><a href="#Header请求头数据" class="headerlink" title="Header请求头数据"></a>Header请求头数据</h3><p>同样也有「从剪切板复制」的功能。</p>
<p>复制请求头（firefox下需切换到原始头模式）就可以了。</p>
]]></content>
      <categories>
        <category>JMeter</category>
      </categories>
      <tags>
        <tag>测试</tag>
      </tags>
  </entry>
  <entry>
    <title>linux安装PHP开发环境</title>
    <url>/posts/35069.html</url>
    <content><![CDATA[<h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><p>1 下载</p>
<p>2 配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/local/php7 --with-config-file-path=/usr/local/php7/etc --with-mysql=/usr/local/mysql --with-pdo-mysql=mysqlnd --with-mysqli --with-libxml-dir --with-gd --with-jpeg-dir --with-png-dir --with-freetype-dir --with-iconv-dir --with-zlib-dir --with-bz2 --with-openssl --with-mcrypt --enable-soap --enable-gd-native-ttf --enable-mbstring --enable-sockets --enable-exif --enable-fpm</span><br></pre></td></tr></table></figure>

<p>3 make &amp;&amp; make install</p>
<h3 id="mysql8"><a href="#mysql8" class="headerlink" title="mysql8"></a>mysql8</h3>]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>plantUML生成的图片过大时无法显示全部</title>
    <url>/posts/32342.html</url>
    <content><![CDATA[<p>实际操作的时候发现，这个plantUML转化的图片大小是有个默认最大值(4086)。普通情况下超出部分不予显示，但缩放的话，字体就看不清了。</p>
<p>因为使用的是phpstorm，找了半天居然没有找到解决办法。也是在误打误撞的情况下，发现在命令行直接输入</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">java -DPLANTUML_LIMIT_SIZE=<span class="number">8192</span> -jar /<span class="built_in">path</span>/to/plantuml.jar ...</span><br></pre></td></tr></table></figure>
<p>可以生成比较大的图。</p>
<p>既然如此，就在「phpstorm64.exe.vmoptions」把「-DPLANTUML_LIMIT_SIZE&#x3D;8192」添加到最后一行。发现有效。</p>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>plantUML</tag>
      </tags>
  </entry>
  <entry>
    <title>wsl 配置PHP开发环境</title>
    <url>/posts/10249.html</url>
    <content><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>也是尽快配置环境，都是采用了 apt 安装。</p>
<p>mysql 初始账户密码</p>
<p>sudo vim &#x2F;etc&#x2F;mysql&#x2F;debian.cnf</p>
<p>启用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo service nginx start</span><br><span class="line">sudo service mysql start</span><br></pre></td></tr></table></figure>

<p>nginx 启动</p>
<p>编辑 &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;default</p>
<p>其中 root 可以设置站点路径</p>
<p>location ~ .php$ { 这部分被注释的部分，可以根据选择开启本地套接字或TCP端口监听</p>
<p>启动php-fpm</p>
<p>sudo php-fpm7.4 根据报错信息分配权限。其中*.sock文件可以手动mkdir并赋予权限，这是我没想到的~~~</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo php-fpm7.4</span><br><span class="line">[29-Apr-2022 09:04:44] ERROR: unable to bind listening socket for address &#x27;/run/php/php7.4-fpm.sock&#x27;: No such file or directory (2)</span><br><span class="line">[29-Apr-2022 09:04:44] ERROR: FPM initialization failed</span><br></pre></td></tr></table></figure>

<h1 id="网络问题"><a href="#网络问题" class="headerlink" title="网络问题"></a>网络问题</h1><h2 id="git-clone-连接不上"><a href="#git-clone-连接不上" class="headerlink" title="git clone 连接不上"></a>git clone 连接不上</h2><p>ping 一下 gitee.com</p>
<p>如果不行，就在 host 加上</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">153.3.137.123 gitee.com</span><br></pre></td></tr></table></figure>

<h2 id="宿主机-ping-不通"><a href="#宿主机-ping-不通" class="headerlink" title="宿主机 ping 不通"></a>宿主机 ping 不通</h2><p>配置下宿主机网络防火墙</p>
<p>高级安全防火墙 –&gt; 入站规则 –&gt; 找到文件和打印机共享（回显请求 - ICMPv4-In） –&gt; 启用它</p>
<h2 id="ping-不通-外网-MySQL"><a href="#ping-不通-外网-MySQL" class="headerlink" title="ping 不通 外网 MySQL"></a>ping 不通 外网 MySQL</h2><p><a href="https://www.jianshu.com/p/04eaefdcc862">重置了一下</a></p>
<h2 id="ngork"><a href="#ngork" class="headerlink" title="ngork"></a>ngork</h2><p><a href="https://ngrok.com/">下载下来，按要求配置一下就可以了</a></p>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>md</tag>
      </tags>
  </entry>
  <entry>
    <title>使用 PHP 把 plantuml 转化为 图片等</title>
    <url>/posts/d6256ea7.html</url>
    <content><![CDATA[<p><a href="https://plantuml.com/pte">官方接口文档</a></p>
<p>可以拿过来直接用</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基于官方API小改</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@link</span> https://plantuml.com/pte</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlantUmlGenerator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">string</span> <span class="variable">$content</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">string</span> <span class="variable">$type</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$content</span>, <span class="keyword">string</span> <span class="variable">$type</span> = <span class="string">&#x27;png&#x27;</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;content = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encodep</span>(<span class="variable">$content</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;type = <span class="variable">$type</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Encodes a UML text description into a special encoding.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $puml PlantUml diagram code, expected to be UTF-8.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string Encoded string</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> \RuntimeException Error with gzdeflate()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">encodep</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$puml</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$compressed</span> = <span class="title function_ invoke__">gzdeflate</span>(<span class="variable">$puml</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">false</span> === <span class="variable">$compressed</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">\RuntimeException</span>(<span class="string">&#x27;Error while compressing PlantUml diagram.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encode64</span>(<span class="variable">$compressed</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $compressed Compressed string</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string Encoded string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">encode64</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$compressed</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$encoded</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$length</span> = <span class="title function_ invoke__">mb_strlen</span>(<span class="variable">$compressed</span>, <span class="string">&#x27;8bit&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$length</span>; <span class="variable">$i</span> += <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (<span class="variable">$length</span>) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="variable">$i</span> + <span class="number">1</span>:</span><br><span class="line">                    <span class="variable">$encoded</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">append3bytes</span>(<span class="title function_ invoke__">ord</span>(<span class="variable">$compressed</span>[<span class="variable">$i</span>]), <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="variable">$i</span> + <span class="number">2</span>:</span><br><span class="line">                    <span class="variable">$encoded</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">append3bytes</span>(<span class="title function_ invoke__">ord</span>(<span class="variable">$compressed</span>[<span class="variable">$i</span>]), <span class="title function_ invoke__">ord</span>(<span class="variable">$compressed</span>[<span class="variable">$i</span> + <span class="number">1</span>]), <span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="variable">$encoded</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">append3bytes</span>(<span class="title function_ invoke__">ord</span>(<span class="variable">$compressed</span>[<span class="variable">$i</span>]), <span class="title function_ invoke__">ord</span>(<span class="variable">$compressed</span>[<span class="variable">$i</span> + <span class="number">1</span>]), <span class="title function_ invoke__">ord</span>(<span class="variable">$compressed</span>[<span class="variable">$i</span> + <span class="number">2</span>]));</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$encoded</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $b1 First byte</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $b2 Second byte</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $b3 Third byte</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">append3bytes</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$b1</span>, <span class="keyword">int</span> <span class="variable">$b2</span>, <span class="keyword">int</span> <span class="variable">$b3</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$c1</span> = <span class="variable">$b1</span> &gt;&gt; <span class="number">2</span>;</span><br><span class="line">        <span class="variable">$c2</span> = ( ( <span class="variable">$b1</span> &amp; <span class="number">0x3</span> ) &lt;&lt; <span class="number">4</span> ) | ( <span class="variable">$b2</span> &gt;&gt; <span class="number">4</span> );</span><br><span class="line">        <span class="variable">$c3</span> = ( ( <span class="variable">$b2</span> &amp; <span class="number">0xF</span> ) &lt;&lt; <span class="number">2</span> ) | ( <span class="variable">$b3</span> &gt;&gt; <span class="number">6</span> );</span><br><span class="line">        <span class="variable">$c4</span> = <span class="variable">$b3</span> &amp; <span class="number">0x3F</span>;</span><br><span class="line">        <span class="variable">$r</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encode6bit</span>(<span class="variable">$c1</span> &amp; <span class="number">0x3F</span>);</span><br><span class="line">        <span class="variable">$r</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encode6bit</span>(<span class="variable">$c2</span> &amp; <span class="number">0x3F</span>);</span><br><span class="line">        <span class="variable">$r</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encode6bit</span>(<span class="variable">$c3</span> &amp; <span class="number">0x3F</span>);</span><br><span class="line">        <span class="variable">$r</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encode6bit</span>(<span class="variable">$c4</span> &amp; <span class="number">0x3F</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$r</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $b</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">encode6bit</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$b</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$b</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">chr</span>(<span class="number">48</span> + <span class="variable">$b</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$b</span> -= <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$b</span> &lt; <span class="number">26</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">chr</span>(<span class="number">65</span> + <span class="variable">$b</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$b</span> -= <span class="number">26</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$b</span> &lt; <span class="number">26</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">chr</span>(<span class="number">97</span> + <span class="variable">$b</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$b</span> -= <span class="number">26</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$b</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$b</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;_&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;?&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;http://www.plantuml.com/plantuml/<span class="subst">&#123;$this-&gt;type&#125;</span>/<span class="subst">&#123;$this-&gt;content&#125;</span>&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>plantuml</tag>
      </tags>
  </entry>
  <entry>
    <title>Microsoft Teams 连接不上</title>
    <url>/posts/53804.html</url>
    <content><![CDATA[<p>我这大概率是翻墙导致的，重置网络连接并重启电脑解决了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netsh winsock reset </span><br><span class="line">netsh int ip reset </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>本站 Hexo 更换主题 Next</title>
    <url>/posts/49797.html</url>
    <content><![CDATA[<p>注意 hexo 的配置文件有两个，分配位于根目录下和主题目录下。有些配置项是不能混的。</p>
<span id="more"></span>

<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>根据文档，直接使用 npm 安装了最新版。值得注意的是，这样安装会把主题安装在了 node_modules 目录而非 themes 目录。此时主题的配置全都在 node_modules&#x2F;hexo-theme-next&#x2F;_config.yml 中。在 博客 目录下配置无效。</p>
<p>所以我就直接从 git 上克隆到 theme 下进行配置了，这样便于管理。</p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="分类和标签"><a href="#分类和标签" class="headerlink" title="分类和标签"></a>分类和标签</h2><p>配置 分类和标签 时，并没有展示出来。和 aath 不太相同，需要如下步骤操作：</p>
<ol>
<li>创建 分类 文件 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new page &quot;categories&quot;</span><br></pre></td></tr></table></figure></li>
<li>在生成的文件 categories&#x2F;index.md 添加 type:categories，此时改文件内容为 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2022-04-14 17:50:11</span><br><span class="line">type: categories</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li>
<li>标签和上述步骤一样</li>
</ol>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p>Next 自带了许多插件，在主题配置文件中可以看到许多「Dependencies」，对应插件放在 github 的代码，看看 readme 就知道该怎么安装了。</p>
<h2 id="hexo-filter-kroki"><a href="#hexo-filter-kroki" class="headerlink" title="hexo-filter-kroki"></a>hexo-filter-kroki</h2><p>绘制 plantuml 的，非常好用。</p>
<h2 id="hexo-symbols-count-time"><a href="#hexo-symbols-count-time" class="headerlink" title="hexo-symbols-count-time"></a>hexo-symbols-count-time</h2><p>字数统计插件名</p>
<p>直接 npm 安装就好了</p>
<h2 id="添加评论"><a href="#添加评论" class="headerlink" title="添加评论"></a>添加评论</h2><p><a href="https://blog.csdn.net/blue_zy/article/details/79071414">看这个博客就够了:为你的Hexo加上评论系统-Valine</a></p>
<h2 id="hexo-generator-feed"><a href="#hexo-generator-feed" class="headerlink" title="hexo-generator-feed"></a>hexo-generator-feed</h2><p>Rss 订阅。其中 type 有两个，atom 和 rss2。我使用第一个中文乱码，就使用第二个了。</p>
<h2 id="hexo-abbrlink"><a href="#hexo-abbrlink" class="headerlink" title="hexo-abbrlink"></a>hexo-abbrlink</h2><p>给文件名设置唯一路由</p>
<h2 id="hexo-asset-image"><a href="#hexo-asset-image" class="headerlink" title="hexo-asset-image"></a>hexo-asset-image</h2><p>需要开启 post_asset_folder ，后来发现和插件「hexo-filter-kroki」冲突就给卸了。</p>
<h2 id="hexo-generator-archive"><a href="#hexo-generator-archive" class="headerlink" title="hexo-generator-archive"></a>hexo-generator-archive</h2><p>设置归档的，可设置分页。另外开启动画效果会导致翻页过快时内容无法加载，就给关了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">archive_generator:</span><br><span class="line">  enabled: true</span><br><span class="line">  per_page: 10</span><br><span class="line">  yearly: true</span><br><span class="line">  monthly: true</span><br><span class="line">  daily: false</span><br><span class="line">  order_by: -date</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>本站 Hexo 配置</title>
    <url>/posts/7658.html</url>
    <content><![CDATA[<p>都是插件<a href="https://github.com/miao1007/hexo-filter-kroki">hexo-filter-kroki</a>的功劳，nodejs太强大了。</p>
<p>大致试了一下，都能实现。就是生成的图没有交互。以后可能会有的吧。只是不能等到事情齐备了之后才去做。</p>
<p>这个文件是为了测试「hexo-filter-kroki」是否生效。</p>
<p><a href="https://plantuml.com/zh/">官网已经很详细了，还自带中文，很容易看懂</a></p>
<h1 id="PlantUml-实际例子"><a href="#PlantUml-实际例子" class="headerlink" title="PlantUml 实际例子"></a>PlantUml 实际例子</h1><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>额，这个不是，只是用于说明码的时候数字不必要手动打123，会自动按行和tab排。</p>
<p>实际代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. edit plan</span><br><span class="line">1. add plans</span><br><span class="line">    1. update unit prefer</span><br><span class="line">    1. if</span><br><span class="line">        1. insert plan</span><br><span class="line">    1. lock exists plan</span><br></pre></td></tr></table></figure>

<p>效果展示：</p>
<ol>
<li>edit plan</li>
<li>add plans<ol>
<li>update unit prefer<ol>
<li>insert plan</li>
</ol>
</li>
<li>lock exists plan</li>
</ol>
</li>
</ol>
<h2 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h2><img class="kroki" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXMtYXNjaWkiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSI0MTZweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjM0OHB4O2hlaWdodDo0MTZweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNDggNDE2IiB3aWR0aD0iMzQ4cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNDAiIHg9IjEwIiB5PSIxODguODkwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwIiB4PSIyMCIgeT0iMjExLjg4NTciPk9TPC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI0OSIgeD0iMTAwIiB5PSIyMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI5IiB4PSIxMTAiIHk9IjQyLjk5NTEiPlVuaXg8L3RleHQ+PHBhdGggZD0iTTUwLDIwNy4wMzkxIEw2MCwyMDcuMDM5MSBDNzUsMjA3LjAzOTEgNzUsMzguMTQ4NCA5MCwzOC4xNDg0IEwxMDAsMzguMTQ4NCAiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI1NSIgeD0iMTAwIiB5PSI3Ni4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzUiIHg9IjExMCIgeT0iOTkuMjkyIj5MaW51eDwvdGV4dD48cGF0aCBkPSJNNTAsMjA3LjAzOTEgTDYwLDIwNy4wMzkxIEM3NSwyMDcuMDM5MSA3NSw5NC40NDUzIDkwLDk0LjQ0NTMgTDEwMCw5NC40NDUzICIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjY4IiB4PSIxMDAiIHk9IjEzMi41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDgiIHg9IjExMCIgeT0iMTU1LjU4ODkiPk1hY09TPC90ZXh0PjxwYXRoIGQ9Ik01MCwyMDcuMDM5MSBMNjAsMjA3LjAzOTEgQzc1LDIwNy4wMzkxIDc1LDE1MC43NDIyIDkwLDE1MC43NDIyIEwxMDAsMTUwLjc0MjIgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iODIiIHg9IjEwMCIgeT0iMTg4Ljg5MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MiIgeD0iMTEwIiB5PSIyMTEuODg1NyI+V2luZG93czwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMTA0IiB4PSIyMzIiIHk9Ijc2LjI5NjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NCIgeD0iMjQyIiB5PSI5OS4yOTIiPldpbmRvd3MgOTU8L3RleHQ+PHBhdGggZD0iTTE4MiwyMDcuMDM5MSBMMTkyLDIwNy4wMzkxIEMyMDcsMjA3LjAzOTEgMjA3LDk0LjQ0NTMgMjIyLDk0LjQ0NTMgTDIzMiw5NC40NDUzICIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjEwNCIgeD0iMjMyIiB5PSIxMzIuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0IiB4PSIyNDIiIHk9IjE1NS41ODg5Ij5XaW5kb3dzIDk4PC90ZXh0PjxwYXRoIGQ9Ik0xODIsMjA3LjAzOTEgTDE5MiwyMDcuMDM5MSBDMjA3LDIwNy4wMzkxIDIwNywxNTAuNzQyMiAyMjIsMTUwLjc0MjIgTDIzMiwxNTAuNzQyMiAiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI5NSIgeD0iMjMyIiB5PSIxODguODkwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc1IiB4PSIyNDIiIHk9IjIxMS44ODU3Ij5XaW5kb3dzIDc8L3RleHQ+PHBhdGggZD0iTTE4MiwyMDcuMDM5MSBMMTkyLDIwNy4wMzkxIEMyMDcsMjA3LjAzOTEgMjA3LDIwNy4wMzkxIDIyMiwyMDcuMDM5MSBMMjMyLDIwNy4wMzkxICIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9Ijk1IiB4PSIyMzIiIHk9IjI0NS4xODc1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzUiIHg9IjI0MiIgeT0iMjY4LjE4MjYiPldpbmRvd3MgODwvdGV4dD48cGF0aCBkPSJNMTgyLDIwNy4wMzkxIEwxOTIsMjA3LjAzOTEgQzIwNywyMDcuMDM5MSAyMDcsMjYzLjMzNTkgMjIyLDI2My4zMzU5IEwyMzIsMjYzLjMzNTkgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMTA0IiB4PSIyMzIiIHk9IjMwMS40ODQ0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQiIHg9IjI0MiIgeT0iMzI0LjQ3OTUiPldpbmRvd3MgMTA8L3RleHQ+PHBhdGggZD0iTTE4MiwyMDcuMDM5MSBMMTkyLDIwNy4wMzkxIEMyMDcsMjA3LjAzOTEgMjA3LDMxOS42MzI4IDIyMiwzMTkuNjMyOCBMMjMyLDMxOS42MzI4ICIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBhdGggZD0iTTUwLDIwNy4wMzkxIEw2MCwyMDcuMDM5MSBDNzUsMjA3LjAzOTEgNzUsMjA3LjAzOTEgOTAsMjA3LjAzOTEgTDEwMCwyMDcuMDM5MSAiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI4MSIgeD0iMTAwIiB5PSIyNDUuMTg3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYxIiB4PSIxMTAiIHk9IjI2OC4xODI2Ij5GcmVlQlNEPC90ZXh0PjxwYXRoIGQ9Ik01MCwyMDcuMDM5MSBMNjAsMjA3LjAzOTEgQzc1LDIwNy4wMzkxIDc1LDI2My4zMzU5IDkwLDI2My4zMzU5IEwxMDAsMjYzLjMzNTkgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNTkiIHg9IjEwMCIgeT0iMzU3Ljc4MTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzOSIgeD0iMTEwIiB5PSIzODAuNzc2NCI+T3RoZXI8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjQ3IiB4PSIyMDkiIHk9IjM1Ny43ODEzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjciIHg9IjIxOSIgeT0iMzgwLjc3NjQiPnRlc3Q8L3RleHQ+PHBhdGggZD0iTTE1OSwzNzUuOTI5NyBMMTY5LDM3NS45Mjk3IEMxODQsMzc1LjkyOTcgMTg0LDM3NS45Mjk3IDE5OSwzNzUuOTI5NyBMMjA5LDM3NS45Mjk3ICIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHBhdGggZD0iTTUwLDIwNy4wMzkxIEw2MCwyMDcuMDM5MSBDNzUsMjA3LjAzOTEgNzUsMzc1LjkyOTcgOTAsMzc1LjkyOTcgTDEwMCwzNzUuOTI5NyAiIGZpbGw9Im5vbmUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjwhLS1TUkM9W0xLdkRReTkwNEJ0bGh2WVo0WWc5QTRycGFnZWZJOEJJNjdsVTk2RFNJNlJCeGdual90cXRzV2cxV05jRnp5NVJNUFE2VXFMREJwejUwRmoyMTA2S2ZCdzdkb2JvRHYzQi1ndnlVQVYtaVh1LUNCbWlucEdVcVVTSDZzakhFN0ljMWw2cnMwbm1wblNxRG1rWlBSNTJsLWpsY3BYcWFoWkNDeFlZaUtlSkhCRHZFNV9DZWlkbnVZMzUyaTg4ZVpabmpybjBVTHAzODRfNXZFc0dXVE5FcjBZRGljbkt2VFpkZnM4ZGhuQlU3UjdnQ0c1b05JVHNmcG8xbWJOVTlYZFhiOGlEZGdOaDZCUEt3cVBIY19aZ3oyYU1jUUpNb1ZPX2tEUS1uX3BTc0l5MF0tLT48L2c+PC9zdmc+'>

<h2 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h2><img class="kroki" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXMtYXNjaWkiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSI5MDZweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjQ3OXB4O2hlaWdodDo5MDZweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA0NzkgOTA2IiB3aWR0aD0iNDc5cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48ZWxsaXBzZSBjeD0iMTg5LjUiIGN5PSIyMCIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MS4wOyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIyMDAiIHg9Ijg5LjUiIHk9IjUwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTgwIiB4PSI5OS41IiB5PSI3MS4xMzg3Ij5DbGlja1NlcnZsZXQuaGFuZGxlUmVxdWVzdCgpPC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI4MSIgeD0iMTQ5IiB5PSIxMDMuOTY4OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYxIiB4PSIxNTkiIHk9IjEyNS4xMDc0Ij5uZXcgcGFnZTwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTAxIiB4PSIxMzkiIHk9IjIwNi4zMzk4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODEiIHg9IjE0OSIgeT0iMjI3LjQ3ODUiPlBhZ2Uub25Jbml0KCk8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyNSIgeD0iMTI3IiB5PSIzMDguNzEwOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNSIgeD0iMTM3IiB5PSIzMjkuODQ5NiI+UHJvY2VzcyBjb250cm9sczwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjEyOSwzNjIuNjc5NywyNTAsMzYyLjY3OTcsMjYyLDM3NC42Nzk3LDI1MCwzODYuNjc5NywxMjksMzg2LjY3OTcsMTE3LDM3NC42Nzk3LDEyOSwzNjIuNjc5NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIxIiB4PSIxMjkiIHk9IjM3OC40ODc4Ij5jb250aW51ZSBwcm9jZXNzaW5nPzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNCIgeD0iMjYyIiB5PSIzNzIuMDg1NCI+bm88L3RleHQ+PGVsbGlwc2UgY3g9IjI5OCIgY3k9IjM3NC42Nzk3IiBmaWxsPSJub25lIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMjIyMjIyO3N0cm9rZS13aWR0aDoxLjA7Ii8+PGVsbGlwc2UgY3g9IjI5OCIgY3k9IjM3NC42Nzk3IiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MS4wOyIvPjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMTY5LDQzMS4xOTUzLDIxMCw0MzEuMTk1MywyMjIsNDQzLjE5NTMsMjEwLDQ1NS4xOTUzLDE2OSw0NTUuMTk1MywxNTcsNDQzLjE5NTMsMTY5LDQzMS4xOTUzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MSIgeD0iMTY5IiB5PSI0NDcuMDAzNCI+aXNQb3N0PzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMCIgeD0iMTM3IiB5PSI0NDAuNjAxMSI+eWVzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0IiB4PSIyMjIiIHk9IjQ0MC42MDExIj5ubzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTEwIiB4PSI3MSIgeT0iNDY1LjE5NTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5MCIgeD0iODEiIHk9IjQ4Ni4zMzQiPlBhZ2Uub25Qb3N0KCk8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEwNCIgeD0iMjAxIiB5PSI0NjUuMTk1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg0IiB4PSIyMTEiIHk9IjQ4Ni4zMzQiPlBhZ2Uub25HZXQoKTwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjE4OS41LDUwNS4xNjQxLDIwMS41LDUxNy4xNjQxLDE4OS41LDUyOS4xNjQxLDE3Ny41LDUxNy4xNjQxLDE4OS41LDUwNS4xNjQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI3IiB4PSIxMjYiIHk9IjU0OS4xNjQxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA3IiB4PSIxMzYiIHk9IjU3MC4zMDI3Ij5QYWdlLm9uUmVuZGVyKCk8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIxNTguNSwyNjAuMzA4NiwyMjAuNSwyNjAuMzA4NiwyMzIuNSwyNzIuMzA4NiwyMjAuNSwyODQuMzA4NiwxNTguNSwyODQuMzA4NiwxNDYuNSwyNzIuMzA4NiwxNTguNSwyNjAuMzA4NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQiIHg9IjE5My41IiB5PSIyOTQuNTE5Ij5ubzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MiIgeD0iMTU4LjUiIHk9IjI3Ni4xMTY3Ij5pc0ZvcndhcmQ/PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMTg5LjUsNjAzLjEzMjgsMjAxLjUsNjE1LjEzMjgsMTg5LjUsNjI3LjEzMjgsMTc3LjUsNjE1LjEzMjgsMTg5LjUsNjAzLjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMTI2LjUsMTU3LjkzNzUsMjUyLjUsMTU3LjkzNzUsMjY0LjUsMTY5LjkzNzUsMjUyLjUsMTgxLjkzNzUsMTI2LjUsMTgxLjkzNzUsMTE0LjUsMTY5LjkzNzUsMTI2LjUsMTU3LjkzNzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzIiB4PSIxOTMuNSIgeT0iMTkyLjE0NzkiPnRydWU8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI2IiB4PSIxMjYuNSIgeT0iMTczLjc0NTYiPlBhZ2Uub25TZWN1cml0eUNoZWNrPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI4IiB4PSIyNjQuNSIgeT0iMTY3LjM0MzMiPmZhbHNlPC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMTg5LjUsNjQ3LjEzMjgsMjAxLjUsNjU5LjEzMjgsMTg5LjUsNjcxLjEzMjgsMTc3LjUsNjU5LjEzMjgsMTg5LjUsNjQ3LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwb2x5Z29uIGZpbGw9IiNGMUYxRjEiIHBvaW50cz0iMTU1LjUsNjkxLjEzMjgsMjIzLjUsNjkxLjEzMjgsMjM1LjUsNzAzLjEzMjgsMjIzLjUsNzE1LjEzMjgsMTU1LjUsNzE1LjEzMjgsMTQzLjUsNzAzLjEzMjgsMTU1LjUsNjkxLjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY4IiB4PSIxNTUuNSIgeT0iNzA2Ljk0MDkiPmRvIHJlZGlyZWN0PzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMCIgeD0iMTIzLjUiIHk9IjcwMC41Mzg2Ij55ZXM8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzMy45Njg4IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyMyIgeD0iMTEiIHk9IjcyNS4xMzI4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAzIiB4PSIyMSIgeT0iNzQ2LjI3MTUiPnJlZGlyZWN0IHByb2Nlc3M8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0YxRjFGMSIgcG9pbnRzPSIyNzIuNSw3MjUuMTMyOCwzNDAuNSw3MjUuMTMyOCwzNTIuNSw3MzcuMTMyOCwzNDAuNSw3NDkuMTMyOCwyNzIuNSw3NDkuMTMyOCwyNjAuNSw3MzcuMTMyOCwyNzIuNSw3MjUuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjgiIHg9IjI3Mi41IiB5PSI3NDAuOTQwOSI+ZG8gZm9yd2FyZD88L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAiIHg9IjI0MC41IiB5PSI3MzQuNTM4NiI+eWVzPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0IiB4PSIzNTIuNSIgeT0iNzM0LjUzODYiPm5vPC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMjMiIHg9IjE2NCIgeT0iNzU5LjEzMjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDMiIHg9IjE3NCIgeT0iNzgwLjI3MTUiPkZvcndhcmQgcmVxdWVzdDwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTYxIiB4PSIzMDciIHk9Ijc1OS4xMzI4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQxIiB4PSIzMTciIHk9Ijc4MC4yNzE1Ij5SZW5kZXIgcGFnZSB0ZW1wbGF0ZTwvdGV4dD48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjMwNi41LDc5OS4xMDE2LDMxOC41LDgxMS4xMDE2LDMwNi41LDgyMy4xMDE2LDI5NC41LDgxMS4xMDE2LDMwNi41LDc5OS4xMDE2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48cG9seWdvbiBmaWxsPSIjRjFGMUYxIiBwb2ludHM9IjE4OS41LDgyOS4xMDE2LDIwMS41LDg0MS4xMDE2LDE4OS41LDg1My4xMDE2LDE3Ny41LDg0MS4xMDE2LDE4OS41LDgyOS4xMDE2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiLz48ZWxsaXBzZSBjeD0iMTg5LjUiIGN5PSI4ODQuMTAxNiIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MS4wOyIvPjxlbGxpcHNlIGN4PSIxODkuNSIgY3k9Ijg4NC4xMDE2IiBmaWxsPSIjMjIyMjIyIiByeD0iNiIgcnk9IjYiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjE4OS41IiB4Mj0iMTg5LjUiIHkxPSIzMCIgeTI9IjUwIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODUuNSw0MCwxODkuNSw1MCwxOTMuNSw0MCwxODkuNSw0NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMTg5LjUiIHgyPSIxODkuNSIgeTE9IjgzLjk2ODgiIHkyPSIxMDMuOTY4OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg1LjUsOTMuOTY4OCwxODkuNSwxMDMuOTY4OCwxOTMuNSw5My45Njg4LDE4OS41LDk3Ljk2ODgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjE4OS41IiB4Mj0iMTg5LjUiIHkxPSIzODYuNjc5NyIgeTI9IjQzMS4xOTUzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODUuNSw0MjEuMTk1MywxODkuNSw0MzEuMTk1MywxOTMuNSw0MjEuMTk1MywxODkuNSw0MjUuMTk1MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjYyIiB4Mj0iMjg3IiB5MT0iMzc0LjY3OTciIHkyPSIzNzQuNjc5NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjc3LDM3MC42Nzk3LDI4NywzNzQuNjc5NywyNzcsMzc4LjY3OTcsMjgxLDM3NC42Nzk3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIxODkuNSIgeDI9IjE4OS41IiB5MT0iMzQyLjY3OTciIHkyPSIzNjIuNjc5NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg1LjUsMzUyLjY3OTcsMTg5LjUsMzYyLjY3OTcsMTkzLjUsMzUyLjY3OTcsMTg5LjUsMzU2LjY3OTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjE1NyIgeDI9IjEyNiIgeTE9IjQ0My4xOTUzIiB5Mj0iNDQzLjE5NTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIxMjYiIHgyPSIxMjYiIHkxPSI0NDMuMTk1MyIgeTI9IjQ2NS4xOTUzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxMjIsNDU1LjE5NTMsMTI2LDQ2NS4xOTUzLDEzMCw0NTUuMTk1MywxMjYsNDU5LjE5NTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjIyMiIgeDI9IjI1MyIgeTE9IjQ0My4xOTUzIiB5Mj0iNDQzLjE5NTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIyNTMiIHgyPSIyNTMiIHkxPSI0NDMuMTk1MyIgeTI9IjQ2NS4xOTUzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyNDksNDU1LjE5NTMsMjUzLDQ2NS4xOTUzLDI1Nyw0NTUuMTk1MywyNTMsNDU5LjE5NTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjEyNiIgeDI9IjEyNiIgeTE9IjQ5OS4xNjQxIiB5Mj0iNTE3LjE2NDEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIxMjYiIHgyPSIxNzcuNSIgeTE9IjUxNy4xNjQxIiB5Mj0iNTE3LjE2NDEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE2Ny41LDUxMy4xNjQxLDE3Ny41LDUxNy4xNjQxLDE2Ny41LDUyMS4xNjQxLDE3MS41LDUxNy4xNjQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIyNTMiIHgyPSIyNTMiIHkxPSI0OTkuMTY0MSIgeTI9IjUxNy4xNjQxIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjUzIiB4Mj0iMjAxLjUiIHkxPSI1MTcuMTY0MSIgeTI9IjUxNy4xNjQxIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMTEuNSw1MTMuMTY0MSwyMDEuNSw1MTcuMTY0MSwyMTEuNSw1MjEuMTY0MSwyMDcuNSw1MTcuMTY0MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMTg5LjUiIHgyPSIxODkuNSIgeTE9IjUyOS4xNjQxIiB5Mj0iNTQ5LjE2NDEiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4NS41LDUzOS4xNjQxLDE4OS41LDU0OS4xNjQxLDE5My41LDUzOS4xNjQxLDE4OS41LDU0My4xNjQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIxODkuNSIgeDI9IjE4OS41IiB5MT0iMjg0LjMwODYiIHkyPSIzMDguNzEwOSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg1LjUsMjk4LjcxMDksMTg5LjUsMzA4LjcxMDksMTkzLjUsMjk4LjcxMDksMTg5LjUsMzAyLjcxMDkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjIzMi41IiB4Mj0iMzMxIiB5MT0iMjcyLjMwODYiIHkyPSIyNzIuMzA4NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzI3LDQxNi42Nzk3LDMzMSw0MjYuNjc5NywzMzUsNDE2LjY3OTcsMzMxLDQyMC42Nzk3IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIzMzEiIHgyPSIzMzEiIHkxPSIyNzIuMzA4NiIgeTI9IjYxNS4xMzI4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMzMxIiB4Mj0iMjAxLjUiIHkxPSI2MTUuMTMyOCIgeTI9IjYxNS4xMzI4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyMTEuNSw2MTEuMTMyOCwyMDEuNSw2MTUuMTMyOCwyMTEuNSw2MTkuMTMyOCwyMDcuNSw2MTUuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMTg5LjUiIHgyPSIxODkuNSIgeTE9IjU4My4xMzI4IiB5Mj0iNjAzLjEzMjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4NS41LDU5My4xMzI4LDE4OS41LDYwMy4xMzI4LDE5My41LDU5My4xMzI4LDE4OS41LDU5Ny4xMzI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIxODkuNSIgeDI9IjE4OS41IiB5MT0iMjQwLjMwODYiIHkyPSIyNjAuMzA4NiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg1LjUsMjUwLjMwODYsMTg5LjUsMjYwLjMwODYsMTkzLjUsMjUwLjMwODYsMTg5LjUsMjU0LjMwODYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjE4OS41IiB4Mj0iMTg5LjUiIHkxPSIxODEuOTM3NSIgeTI9IjIwNi4zMzk4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODUuNSwxOTYuMzM5OCwxODkuNSwyMDYuMzM5OCwxOTMuNSwxOTYuMzM5OCwxODkuNSwyMDAuMzM5OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjY0LjUiIHgyPSIzNTMiIHkxPSIxNjkuOTM3NSIgeTI9IjE2OS45Mzc1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIzNDksMzk2LjY3OTcsMzUzLDQwNi42Nzk3LDM1NywzOTYuNjc5NywzNTMsNDAwLjY3OTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjM1MyIgeDI9IjM1MyIgeTE9IjE2OS45Mzc1IiB5Mj0iNjU5LjEzMjgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIzNTMiIHgyPSIyMDEuNSIgeTE9IjY1OS4xMzI4IiB5Mj0iNjU5LjEzMjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIxMS41LDY1NS4xMzI4LDIwMS41LDY1OS4xMzI4LDIxMS41LDY2My4xMzI4LDIwNy41LDY1OS4xMzI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIxODkuNSIgeDI9IjE4OS41IiB5MT0iNjI3LjEzMjgiIHkyPSI2NDcuMTMyOCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTg1LjUsNjM3LjEzMjgsMTg5LjUsNjQ3LjEzMjgsMTkzLjUsNjM3LjEzMjgsMTg5LjUsNjQxLjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjE4OS41IiB4Mj0iMTg5LjUiIHkxPSIxMzcuOTM3NSIgeTI9IjE1Ny45Mzc1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODUuNSwxNDcuOTM3NSwxODkuNSwxNTcuOTM3NSwxOTMuNSwxNDcuOTM3NSwxODkuNSwxNTEuOTM3NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjYwLjUiIHgyPSIyMjUuNSIgeTE9IjczNy4xMzI4IiB5Mj0iNzM3LjEzMjgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIyMjUuNSIgeDI9IjIyNS41IiB5MT0iNzM3LjEzMjgiIHkyPSI3NTkuMTMyOCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjIxLjUsNzQ5LjEzMjgsMjI1LjUsNzU5LjEzMjgsMjI5LjUsNzQ5LjEzMjgsMjI1LjUsNzUzLjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjM1Mi41IiB4Mj0iMzg3LjUiIHkxPSI3MzcuMTMyOCIgeTI9IjczNy4xMzI4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMzg3LjUiIHgyPSIzODcuNSIgeTE9IjczNy4xMzI4IiB5Mj0iNzU5LjEzMjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM4My41LDc0OS4xMzI4LDM4Ny41LDc1OS4xMzI4LDM5MS41LDc0OS4xMzI4LDM4Ny41LDc1My4xMzI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIyMjUuNSIgeDI9IjIyNS41IiB5MT0iNzkzLjEwMTYiIHkyPSI4MTEuMTAxNiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjIyNS41IiB4Mj0iMjk0LjUiIHkxPSI4MTEuMTAxNiIgeTI9IjgxMS4xMDE2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyODQuNSw4MDcuMTAxNiwyOTQuNSw4MTEuMTAxNiwyODQuNSw4MTUuMTAxNiwyODguNSw4MTEuMTAxNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMzg3LjUiIHgyPSIzODcuNSIgeTE9Ijc5My4xMDE2IiB5Mj0iODExLjEwMTYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIzODcuNSIgeDI9IjMxOC41IiB5MT0iODExLjEwMTYiIHkyPSI4MTEuMTAxNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzI4LjUsODA3LjEwMTYsMzE4LjUsODExLjEwMTYsMzI4LjUsODE1LjEwMTYsMzI0LjUsODExLjEwMTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjE0My41IiB4Mj0iNzIuNSIgeTE9IjcwMy4xMzI4IiB5Mj0iNzAzLjEzMjgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSI3Mi41IiB4Mj0iNzIuNSIgeTE9IjcwMy4xMzI4IiB5Mj0iNzI1LjEzMjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjY4LjUsNzE1LjEzMjgsNzIuNSw3MjUuMTMyOCw3Ni41LDcxNS4xMzI4LDcyLjUsNzE5LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjIzNS41IiB4Mj0iMzA2LjUiIHkxPSI3MDMuMTMyOCIgeTI9IjcwMy4xMzI4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMzA2LjUiIHgyPSIzMDYuNSIgeTE9IjcwMy4xMzI4IiB5Mj0iNzI1LjEzMjgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjMwMi41LDcxNS4xMzI4LDMwNi41LDcyNS4xMzI4LDMxMC41LDcxNS4xMzI4LDMwNi41LDcxOS4xMzI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSI3Mi41IiB4Mj0iNzIuNSIgeTE9Ijc1OS4xMDE2IiB5Mj0iODQxLjEwMTYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSI3Mi41IiB4Mj0iMTc3LjUiIHkxPSI4NDEuMTAxNiIgeTI9Ijg0MS4xMDE2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNjcuNSw4MzcuMTAxNiwxNzcuNSw4NDEuMTAxNiwxNjcuNSw4NDUuMTAxNiwxNzEuNSw4NDEuMTAxNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMzA2LjUiIHgyPSIzMDYuNSIgeTE9IjgyMy4xMDE2IiB5Mj0iODQxLjEwMTYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIzMDYuNSIgeDI9IjIwMS41IiB5MT0iODQxLjEwMTYiIHkyPSI4NDEuMTAxNiIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjExLjUsODM3LjEwMTYsMjAxLjUsODQxLjEwMTYsMjExLjUsODQ1LjEwMTYsMjA3LjUsODQxLjEwMTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjE4OS41IiB4Mj0iMTg5LjUiIHkxPSI2NzEuMTMyOCIgeTI9IjY5MS4xMzI4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODUuNSw2ODEuMTMyOCwxODkuNSw2OTEuMTMyOCwxOTMuNSw2ODEuMTMyOCwxODkuNSw2ODUuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMTg5LjUiIHgyPSIxODkuNSIgeTE9Ijg1My4xMDE2IiB5Mj0iODczLjEwMTYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4NS41LDg2My4xMDE2LDE4OS41LDg3My4xMDE2LDE5My41LDg2My4xMDE2LDE4OS41LDg2Ny4xMDE2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48IS0tU1JDPVtQTEF6UmVDbTREeHo1QlNMWGkxa1hXd0hNZE1CYVlUbXBHNU1aNHRpOHI3VWxsdTFJZmw5Zl9qLXpEc1R0bVFZb1ZFd2RoR21EOC13YWRRaVhJSHJMX0d5ajRocUplbzdSb0oxYzJWWFlGNlpMbDl3R05WTklES1dKQWxuWkJTUEZITGJteFoxMXFvWW51UWYzZWZKZzJmaEJZWGQ1bm9GMHlmaDJKSVdXT0JTWjJLM3UwbGZvd1hhMEgyTG9kek96bjJrVkxfdm5hUHN2M2locU5rR3JmMnBzWlVmN0tNbmV5b0NDNk1BQ2xzQjdDMkpkTEE5ZmJLVHN6SkFkd29kSlYxNGxvaE1ZMTdGNE9ET1V6b3hoZm5GX0FLYV9wcnUzWXJxNlN6ZWprYjRVNGdzMThmWE1XaUVNLUxHbFlKWUF4MkVzSUlOUE41MXNGdFJ0M085TnRPUWhERjVLZW1fU18yU0M5cUcyQ1ZtQ0dYdFFORjBqQzRWXS0tPjwvZz48L3N2Zz4='>

<h2 id="时序图"><a href="#时序图" class="headerlink" title="时序图"></a>时序图</h2><img class="kroki" src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXMtYXNjaWkiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSI5MjZweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjc2NnB4O2hlaWdodDo5MjZweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA3NjYgOTI2IiB3aWR0aD0iNzY2cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE4OC42NjQxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHdpZHRoPSIxMCIgeD0iMjEiIHk9IjMxMi4wOTM4Ii8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxMzAuMzk4NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjE5MyIgeT0iMzQxLjIyNjYiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE1NC41MzEzIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHdpZHRoPSIxMCIgeD0iMTkzIiB5PSI1MDAuNzU3OCIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjY1Ljc5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSIyNzIuNSIgeT0iNDYuMjk2OSIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjAwLjUzMTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSIyNzcuNSIgeT0iNzUuNDI5NyIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSIyODIuNSIgeT0iMjQ3Ljk2MDkiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM5LjY5OTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSIyNzIuNSIgeT0iNjk0Ljk4ODMiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI5LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSIyNzIuNSIgeT0iNzg3Ljk1MzEiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjEwMS4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHdpZHRoPSIxMCIgeD0iNTA5LjUiIHk9IjEwOS41NjI1Ii8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjUxNC41IiB5PSIxNDYuNjk1MyIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTAxLjI2NTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSI1MDkuNSIgeT0iMzcwLjM1OTQiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHdpZHRoPSIxMCIgeD0iNTE0LjUiIHk9IjQwNy40OTIyIi8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxMjUuMzk4NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjUwOS41IiB5PSI1MjkuODkwNiIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSI1MTQuNSIgeT0iNTY3LjAyMzQiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM5LjY5OTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSI1MDkuNSIgeT0iNjk0Ljk4ODMiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI5LjEzMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSI1MDkuNSIgeT0iNzg3Ljk1MzEiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjIxNS4wNjI1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSI1MzgiIHg9IjIyMi41IiB5PSI2MTcuMDIzNCIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNzUuMzk4NCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMzQxIiB4PSIyMzIuNSIgeT0iNzQ5LjY4NzUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUuMCw1LjA7IiB4MT0iMjYiIHgyPSIyNiIgeTE9IjM2LjI5NjkiIHkyPSI4OTEuMjE4OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41O3N0cm9rZS1kYXNoYXJyYXk6NS4wLDUuMDsiIHgxPSIxOTcuNSIgeDI9IjE5Ny41IiB5MT0iMzYuMjk2OSIgeTI9Ijg5MS4yMTg4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7c3Ryb2tlLWRhc2hhcnJheTo1LjAsNS4wOyIgeDE9IjI3Ny41IiB4Mj0iMjc3LjUiIHkxPSIzNi4yOTY5IiB5Mj0iODkxLjIxODgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTtzdHJva2UtZGFzaGFycmF5OjUuMCw1LjA7IiB4MT0iNTE0LjUiIHgyPSI1MTQuNSIgeTE9IjM2LjI5NjkiIHkyPSI4OTEuMjE4OCIvPjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNDIiIHg9IjUiIHk9IjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOCIgeD0iMTIiIHk9IjI0Ljk5NTEiPiYjMjk5OTI7JiMyNTE0Mzs8L3RleHQ+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0MiIgeD0iNSIgeT0iODkwLjIxODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOCIgeD0iMTIiIHk9IjkxMC4yMTM5Ij4mIzI5OTkyOyYjMjUxNDM7PC90ZXh0PjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjkiIHg9IjE2My41IiB5PSI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUiIHg9IjE3MC41IiB5PSIyNC45OTUxIj4mIzI0NDk0OyYjMjA0NDk7QVBQPC90ZXh0PjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNjkiIHg9IjE2My41IiB5PSI4OTAuMjE4OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU1IiB4PSIxNzAuNSIgeT0iOTEwLjIxMzkiPiYjMjQ0OTQ7JiMyMDQ0OTtBUFA8L3RleHQ+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI3MCIgeD0iMjQyLjUiIHk9IjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NiIgeD0iMjQ5LjUiIHk9IjI0Ljk5NTEiPiYjMjE4MzA7JiMyNTE0MzsmIzIxNTE4OyYjMjE0ODg7PC90ZXh0PjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNzAiIHg9IjI0Mi41IiB5PSI4OTAuMjE4OCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjU2IiB4PSIyNDkuNSIgeT0iOTEwLjIxMzkiPiYjMjE4MzA7JiMyNTE0MzsmIzIxNTE4OyYjMjE0ODg7PC90ZXh0PjxyZWN0IGZpbGw9IiNFMkUyRjAiIGhlaWdodD0iMzAuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTgiIHg9IjQ2NS41IiB5PSI1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQiIHg9IjQ3Mi41IiB5PSIyNC45OTUxIj4mIzI0NDk0OyYjMjA0NDk7JiMyNTkwMzsmIzIwMTg0OyYjMzE5OTU7JiMzMjQ3OTs8L3RleHQ+PHJlY3QgZmlsbD0iI0UyRTJGMCIgaGVpZ2h0PSIzMC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI5OCIgeD0iNDY1LjUiIHk9Ijg5MC4yMTg4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQiIHg9IjQ3Mi41IiB5PSI5MTAuMjEzOSI+JiMyNDQ5NDsmIzIwNDQ5OyYjMjU5MDM7JiMyMDE4NDsmIzMxOTk1OyYjMzI0Nzk7PC90ZXh0PjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTg4LjY2NDEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSIyMSIgeT0iMzEyLjA5MzgiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjEzMC4zOTg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHdpZHRoPSIxMCIgeD0iMTkzIiB5PSIzNDEuMjI2NiIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTU0LjUzMTMiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSIxOTMiIHk9IjUwMC43NTc4Ii8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyNjUuNzk2OSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjI3Mi41IiB5PSI0Ni4yOTY5Ii8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMDAuNTMxMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjI3Ny41IiB5PSI3NS40Mjk3Ii8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjI4Mi41IiB5PSIyNDcuOTYwOSIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzkuNjk5MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjI3Mi41IiB5PSI2OTQuOTg4MyIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjkuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjI3Mi41IiB5PSI3ODcuOTUzMSIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTAxLjI2NTYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSI1MDkuNSIgeT0iMTA5LjU2MjUiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHdpZHRoPSIxMCIgeD0iNTE0LjUiIHk9IjE0Ni42OTUzIi8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxMDEuMjY1NiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjUwOS41IiB5PSIzNzAuMzU5NCIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgd2lkdGg9IjEwIiB4PSI1MTQuNSIgeT0iNDA3LjQ5MjIiLz48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjEyNS4zOTg0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHdpZHRoPSIxMCIgeD0iNTA5LjUiIHk9IjUyOS44OTA2Ii8+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjUxNC41IiB5PSI1NjcuMDIzNCIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzkuNjk5MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjUwOS41IiB5PSI2OTQuOTg4MyIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjkuMTMyOCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB3aWR0aD0iMTAiIHg9IjUwOS41IiB5PSI3ODcuOTUzMSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjI4Mi41IiB4Mj0iMzI5LjUiIHkxPSI2Mi40Mjk3IiB5Mj0iNjIuNDI5NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjMyOS41IiB4Mj0iMzI5LjUiIHkxPSI2Mi40Mjk3IiB5Mj0iNzUuNDI5NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjI4OC41IiB4Mj0iMzI5LjUiIHkxPSI3NS40Mjk3IiB5Mj0iNzUuNDI5NyIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjk4LjUsNzEuNDI5NywyODguNSw3NS40Mjk3LDI5OC41LDc5LjQyOTcsMjk0LjUsNzUuNDI5NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIiIHg9IjI5NC41IiB5PSI1Ny4zNjM4Ij4mIzI5OTgzOyYjMjUxMDQ7JiMzNTc0NjsmIzIxMzMzOzwvdGV4dD48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ5Ny41LDEwNS41NjI1LDUwNy41LDEwOS41NjI1LDQ5Ny41LDExMy41NjI1LDUwMS41LDEwOS41NjI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIyODcuNSIgeDI9IjUwMy41IiB5MT0iMTA5LjU2MjUiIHkyPSIxMDkuNTYyNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg1IiB4PSIyOTQuNSIgeT0iMTA0LjQ5NjYiPiYjMzU4NDM7JiMzMjQ3OTsmIzE5OTY4OyYjMTk5Nzk7JiMyMTMzMztBUEk8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iNTI0LjUiIHgyPSI1NjYuNSIgeTE9IjEzOC42OTUzIiB5Mj0iMTM4LjY5NTMiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSI1NjYuNSIgeDI9IjU2Ni41IiB5MT0iMTM4LjY5NTMiIHkyPSIxNTEuNjk1MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjUyNS41IiB4Mj0iNTY2LjUiIHkxPSIxNTEuNjk1MyIgeTI9IjE1MS42OTUzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1MzUuNSwxNDcuNjk1Myw1MjUuNSwxNTEuNjk1Myw1MzUuNSwxNTUuNjk1Myw1MzEuNSwxNTEuNjk1MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEiIHg9IjUzMS41IiB5PSIxMzMuNjI5NCI+JiMyOTk4MzsmIzI1MTA0OyYjMzkwNDQ7JiMyNTkwMzsmIzIwMTg0OyYjMjAxMzI7JiMyNjEzMTs8L3RleHQ+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyOTguNSwyMDYuODI4MSwyODguNSwyMTAuODI4MSwyOTguNSwyMTQuODI4MSwyOTQuNSwyMTAuODI4MSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7c3Ryb2tlLWRhc2hhcnJheToyLjAsMi4wOyIgeDE9IjI5Mi41IiB4Mj0iNTEzLjUiIHkxPSIyMTAuODI4MSIgeTI9IjIxMC44MjgxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1IiB4PSIzMDQuNSIgeT0iMjA1Ljc2MjIiPjogJiMzNjgyMDsmIzIyMjM4OyYjMzkwNDQ7JiMyNTkwMzsmIzIwMTg0OyYjMjAxMzI7JiMyNjEzMTsmIzM4MTQyOyYjMjU1MDk7PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjI5Mi41IiB4Mj0iMzM0LjUiIHkxPSIyMzkuOTYwOSIgeTI9IjIzOS45NjA5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMzM0LjUiIHgyPSIzMzQuNSIgeTE9IjIzOS45NjA5IiB5Mj0iMjUyLjk2MDkiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIyOTMuNSIgeDI9IjMzNC41IiB5MT0iMjUyLjk2MDkiIHkyPSIyNTIuOTYwOSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMzAzLjUsMjQ4Ljk2MDksMjkzLjUsMjUyLjk2MDksMzAzLjUsMjU2Ljk2MDksMjk5LjUsMjUyLjk2MDkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2OSIgeD0iMjk5LjUiIHk9IjIzNC44OTUiPiYjMjM1NTg7JiMyNTkwMzsmIzIwMTg0OyYjMjAxMzI7JiMyNjEzMTsmIzM4MTQyOyYjMjU1MDk7JiMzNjcxNjsmIzIxMjcwOyYjMjUxMDQ7JiMyMDEwODsmIzMyNTAwOyYjMzA3MjE7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDIsMzA4LjA5MzgsMzIsMzEyLjA5MzgsNDIsMzE2LjA5MzgsMzgsMzEyLjA5MzgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wO3N0cm9rZS1kYXNoYXJyYXk6Mi4wLDIuMDsiIHgxPSIzNiIgeDI9IjI3Ni41IiB5MT0iMzEyLjA5MzgiIHkyPSIzMTIuMDkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNyIgeD0iNDgiIHk9IjMwNy4wMjc4Ij4mIzI1MjI2OyYjMjAxMDg7JiMzMjUwMDsmIzMwNzIxOyYjMjM2Mzc7JiMzMTAzNDsmIzMyNDczOyYjMjk5OTI7JiMyNTE0Mzs8L3RleHQ+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxODEsMzM3LjIyNjYsMTkxLDM0MS4yMjY2LDE4MSwzNDUuMjI2NiwxODUsMzQxLjIyNjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjMxIiB4Mj0iMTg3IiB5MT0iMzQxLjIyNjYiIHkyPSIzNDEuMjI2NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNyIgeD0iMzgiIHk9IjMzNi4xNjA2Ij4mIzI5OTkyOyYjMjUxNDM7JiMyNTE3MTsmIzI0MzIwOyYjMjQ0OTQ7JiMyMDQ0OTsmIzI1MTk1OyYjMTk5Njg7JiMyNTE5NTs8L3RleHQ+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0OTcuNSwzNjYuMzU5NCw1MDcuNSwzNzAuMzU5NCw0OTcuNSwzNzQuMzU5NCw1MDEuNSwzNzAuMzU5NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjAzIiB4Mj0iNTAzLjUiIHkxPSIzNzAuMzU5NCIgeTI9IjM3MC4zNTk0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzgiIHg9IjIxMCIgeT0iMzY1LjI5MzUiPiYjMjU1NTI7JiMyMDEzMjsmIzI1MTk1OyYjMjU1NTE7JiMzODE0MjsmIzI1NTA5OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSI1MjQuNSIgeDI9IjU2Ni41IiB5MT0iMzk5LjQ5MjIiIHkyPSIzOTkuNDkyMiIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjU2Ni41IiB4Mj0iNTY2LjUiIHkxPSIzOTkuNDkyMiIgeTI9IjQxMi40OTIyIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iNTI1LjUiIHgyPSI1NjYuNSIgeTE9IjQxMi40OTIyIiB5Mj0iNDEyLjQ5MjIiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUzNS41LDQwOC40OTIyLDUyNS41LDQxMi40OTIyLDUzNS41LDQxNi40OTIyLDUzMS41LDQxMi40OTIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQiIHg9IjUzMS41IiB5PSIzOTQuNDI2MyI+JiMzOTU2NDsmIzM1Nzc3OyYjMzgxNDI7JiMyNTUwOTsmIzI2MTU5OyYjMjE1NDI7JiMyNjM3NzsmIzI1OTI4OzwvdGV4dD48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjIwOSw0NjcuNjI1LDE5OSw0NzEuNjI1LDIwOSw0NzUuNjI1LDIwNSw0NzEuNjI1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDtzdHJva2UtZGFzaGFycmF5OjIuMCwyLjA7IiB4MT0iMjAzIiB4Mj0iNTEzLjUiIHkxPSI0NzEuNjI1IiB5Mj0iNDcxLjYyNSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNCIgeD0iMjE1IiB5PSI0NjYuNTU5MSI+JiMzNjgyMDsmIzIyMjM4OyYjMzg2NTY7JiMzNTIwMTsmIzI1OTAzOyYjMjAxODQ7JiMyNTQ4MDsmIzI2NDM1OzwvdGV4dD48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE4MSw0OTYuNzU3OCwxOTEsNTAwLjc1NzgsMTgxLDUwNC43NTc4LDE4NSw1MDAuNzU3OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjYiIHgyPSIxODciIHkxPSI1MDAuNzU3OCIgeTI9IjUwMC43NTc4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQzIiB4PSIzMyIgeT0iNDk1LjY5MTkiPiYjMjk5OTI7JiMyNTE0MzsmIzMwODMwOyYjMzU3NDg7JiMyNTkwMzsmIzIwMTg0OyYjNjUyOTI7JiMzNjc1NTsmIzIwODM3OyYjMjM0OTQ7JiMzMDcyMTs8L3RleHQ+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0OTcuNSw1MjUuODkwNiw1MDcuNSw1MjkuODkwNiw0OTcuNSw1MzMuODkwNiw1MDEuNSw1MjkuODkwNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjAzIiB4Mj0iNTAzLjUiIHkxPSI1MjkuODkwNiIgeTI9IjUyOS44OTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzgiIHg9IjIxMCIgeT0iNTI0LjgyNDciPiYjMjU1NTI7JiMyMDEzMjsmIzI1OTAzOyYjMjAxODQ7JiMyNTQ4MDsmIzI2NDM1OzwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSI1MjQuNSIgeDI9IjU2Ni41IiB5MT0iNTU5LjAyMzQiIHkyPSI1NTkuMDIzNCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjU2Ni41IiB4Mj0iNTY2LjUiIHkxPSI1NTkuMDIzNCIgeTI9IjU3Mi4wMjM0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iNTI1LjUiIHgyPSI1NjYuNSIgeTE9IjU3Mi4wMjM0IiB5Mj0iNTcyLjAyMzQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjUzNS41LDU2OC4wMjM0LDUyNS41LDU3Mi4wMjM0LDUzNS41LDU3Ni4wMjM0LDUzMS41LDU3Mi4wMjM0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMiIHg9IjUzMS41IiB5PSI1NTMuOTU3NSI+JiMzOTU2NDsmIzM1Nzc3OyYjMjU5MDM7JiMyMDE4NDsmIzI1NDgwOyYjMjY0MzU7JiM2NTI5MjsmIzIzNDM2OyYjMjUxMDQ7JiMyMDEzMjsmIzI2MTMxOzwvdGV4dD48cGF0aCBkPSJNMjIyLjUsNjE3LjAyMzQgTDI4Ni41LDYxNy4wMjM0IEwyODYuNSw2MjQuMTU2MyBMMjc2LjUsNjM0LjE1NjMgTDIyMi41LDYzNC4xNTYzIEwyMjIuNSw2MTcuMDIzNCAiIGZpbGw9IiNFRUVFRUUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIvPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjE1LjA2MjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjUzOCIgeD0iMjIyLjUiIHk9IjYxNy4wMjM0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5IiB4PSIyMzcuNSIgeT0iNjMwLjA5MDMiPmFsdDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTQiIHg9IjMwMS41IiB5PSI2MjkuMjMzOSI+WyYjMjQxODI7JiMzNDg5MjsmIzIyNzg4OyYjMjk3MDI7XTwvdGV4dD48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjI4OC41LDY1MS4yODkxLDI3OC41LDY1NS4yODkxLDI4OC41LDY1OS4yODkxLDI4NC41LDY1NS4yODkxIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDtzdHJva2UtZGFzaGFycmF5OjIuMCwyLjA7IiB4MT0iMjgyLjUiIHgyPSI1MTMuNSIgeTE9IjY1NS4yODkxIiB5Mj0iNjU1LjI4OTEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDgiIHg9IjI5NC41IiB5PSI2NTAuMjIzMSI+JiMzNjgyMDsmIzIyMjM4OyYjMjU5MDM7JiMyMDE4NDsmIzMyNDY3OyYjMjY1MjQ7JiM2NTI5MjsmIzIxNDU3OyYjMzY4NjU7JiMzMDcwMTsmIzIwNDQ5OyYjMjE2NDQ7JiMyODA0MDsmIzI0Njg3OyYjMjU1NTI7JiMzMTAzNDs8L3RleHQ+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyOTMuNSw2OTAuOTg4MywyODMuNSw2OTQuOTg4MywyOTMuNSw2OTguOTg4MywyODkuNSw2OTQuOTg4MyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjg3LjUiIHgyPSI1MDguNSIgeTE9IjY5NC45ODgzIiB5Mj0iNjk0Ljk4ODMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYiIHg9IjI5OS41IiB5PSI2ODkuOTIyNCI+JiMyNDMyMjsmIzI3NDkzOyYjMzY4OTA7JiMzMDY5MzsmIzIxODMwOyYjMjUxNDM7JiMyMTUxODsmIzIxNDg4OyYjMjU5MDM7JiMyMDE4NDsmIzMyNDY3OyYjMjY1MjQ7PC90ZXh0PjxwYXRoIGQ9Ik01MjQsNjY4LjI4OTEgTDUyNCw3MDguMjg5MSBMNzU1LDcwOC4yODkxIEw3NTUsNjc4LjI4OTEgTDc0NSw2NjguMjg5MSBMNTI0LDY2OC4yODkxICIgZmlsbD0iI0ZFRkZERCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7Ii8+PHBhdGggZD0iTTc0NSw2NjguMjg5MSBMNzQ1LDY3OC4yODkxIEw3NTUsNjc4LjI4OTEgTDc0NSw2NjguMjg5MSAiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMCIgeD0iNTMwIiB5PSI2ODUuMzU2Ij4mIzM2ODI1OyYjMzczMjQ7JiMxOTk4MTsmIzMwNjkzOyYjMzY5NDc7JiMyNDU5MDsmIzIwMDQwOyYjMjIyMzg7JiMyMDEwNzsmIzY1MjkyOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMTAiIHg9IjUzMCIgeT0iNzAwLjQ4ODgiPiYjMjQ1MTc7JiMzOTAzNTsmIzI1OTE4OyYjMjIzMTI7YWN0aXZhdGUgcGF5X3N5c3RlbSYjMTk5Nzg7JiMzODc1NDs8L3RleHQ+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI1MDIuNSw3MzAuNjg3NSw1MTIuNSw3MzQuNjg3NSw1MDIuNSw3MzguNjg3NSw1MDYuNSw3MzQuNjg3NSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7c3Ryb2tlLWRhc2hhcnJheToyLjAsMi4wOyIgeDE9IjI3Ny41IiB4Mj0iNTA4LjUiIHkxPSI3MzQuNjg3NSIgeTI9IjczNC42ODc1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMwIiB4PSIyODQuNSIgeT0iNzI5LjYyMTYiPiYjMjE1Nzg7JiMzMDY5MzsmIzI1OTAzOyYjMjAxODQ7JiMzMjQ2NzsmIzI2NTI0OyYjMjU1MDk7JiMyMTQ2MzsmIzI0NzczOyYjMjA5MTc7PC90ZXh0PjxwYXRoIGQ9Ik0yMzIuNSw3NDkuNjg3NSBMMjk2LjUsNzQ5LjY4NzUgTDI5Ni41LDc1Ni44MjAzIEwyODYuNSw3NjYuODIwMyBMMjMyLjUsNzY2LjgyMDMgTDIzMi41LDc0OS42ODc1ICIgZmlsbD0iI0VFRUVFRSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjU7Ii8+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI3NS4zOTg0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTsiIHdpZHRoPSIzNDEiIHg9IjIzMi41IiB5PSI3NDkuNjg3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOSIgeD0iMjQ3LjUiIHk9Ijc2Mi43NTQ0Ij5hbHQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc2IiB4PSIzMTEuNSIgeT0iNzYxLjg5NzkiPlsmIzIxMDI4OyYjMjYwMjk7JiMyNTkwMzsmIzIwMTg0OyYjMjkzNjY7JiMyNDU3NztdPC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iNDk3LjUsNzgzLjk1MzEsNTA3LjUsNzg3Ljk1MzEsNDk3LjUsNzkxLjk1MzEsNTAxLjUsNzg3Ljk1MzEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjI4Mi41IiB4Mj0iNTAzLjUiIHkxPSI3ODcuOTUzMSIgeTI9Ijc4Ny45NTMxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTgiIHg9IjI4OS41IiB5PSI3ODIuODg3MiI+JiMzNTg0MzsmIzI5OTkyOyYjMjY1OTc7JiMzNTgxMDsmIzM1NzQ2OyYjMjEzMzM7QVBJPC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMjg4LjUsODEzLjA4NTksMjc4LjUsODE3LjA4NTksMjg4LjUsODIxLjA4NTksMjg0LjUsODE3LjA4NTkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wO3N0cm9rZS1kYXNoYXJyYXk6Mi4wLDIuMDsiIHgxPSIyODIuNSIgeDI9IjUxMy41IiB5MT0iODE3LjA4NTkiIHkyPSI4MTcuMDg1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijc4IiB4PSIyOTQuNSIgeT0iODEyLjAyIj4mIzM2ODIwOyYjMjIyMzg7JiMyNTkwMzsmIzIwMTg0OyYjMjkzNjY7JiMyNDU3Nzs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7IiB4MT0iMjc3LjUiIHgyPSIzMTkuNSIgeTE9Ijg2NS4yMTg4IiB5Mj0iODY1LjIxODgiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiIHgxPSIzMTkuNSIgeDI9IjMxOS41IiB5MT0iODY1LjIxODgiIHkyPSI4NzguMjE4OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS4wOyIgeDE9IjI3Mi41IiB4Mj0iMzE5LjUiIHkxPSI4NzguMjE4OCIgeTI9Ijg3OC4yMTg4Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIyODIuNSw4NzQuMjE4OCwyNzIuNSw4NzguMjE4OCwyODIuNSw4ODIuMjE4OCwyNzguNSw4NzguMjE4OCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjUiIHg9IjI4NC41IiB5PSI4NjAuMTUyOCI+JiMyMTQ1NzsmIzM2MTM1OyYjMzE1NjE7JiMyNTgwNTsmIzIwMzE2OzwvdGV4dD48IS0tU1JDPVtiTFJIS2pmMDU3dEZMc0h5em1UeVNDUjdsbGExZFVjYWFoNUNzdlc5ZUpFLTlMTGZtNFltMFFpallaMVdkTGgwSllyNVdsV3BzVHRhZ1JfR3RHSFg0eEEwVU0wMlQtIC12enZ2eHhidmFHTDdKTXNiUGE1SC0xUE1sZVY1dFhIU29WM09aQWZuQzZ5NmV1cHhNRHBPdDB4aVdvcDVwOU9UekdRYThoRGxXbjZqWHctc3NpZkVMS2FhdWlEbnJkTEZxc3E1RUJKV2syeGtsQ2hpUExOcEYyTGxnWlg5Yzg0ZmdNanFEZWVyVkFUWm5CdkdkU0tyXzQ1SUhGaVJaUF9mclROdHdsaVFaU1dxUTlRX0owNFVMdTIwQjgwdW8zUmg2VXhUeGswZ3RoeGR6R3VvcGlWYll1WEExZjFCYk95X0s1OEtFeV9DUi1vNVZ4ZzA5Si1xUHhzS1lmQ0hiSlljWWNiS2FORDlaNk5veFlDTnJ4SDRpamhaYktMY2lXemxTQkF4dHkxRU85eFhRVHMwWXZtdlR3am5DVkdiRGVKQThNVGFNQWdfTFRRQXBESHVNMmZFdXU1UzVER1Y4RUdsZFdLaTZjY2VqSzJoMTlJLWh3cllpZjc3NDVVUGpDREo2WWlfVk84ZFdwd1pFWUJHZFRTZm9qRnRHQVg2QXlaVkdpY0JpQi1lY0lyNy0zekZod1k0T0ZFczJxWE1pdmM3NVU5UGE1dWlmNURBSlpnZ1FUd003Qk9UNTB2eGxTT2tIQUNpSkhwRnllZGg3d3BIM3U3ejNxbmxQdUEwNWtaYVk3aWVfUTEwdDB5VVlFdnhkbDVoZHFxbjN1Vm4wbm1wcTdIZFlVVVpwVUhSVWdKb3V4dGJyNHBKdEtJZDd3ZHpxLUNBTVpFelZudU9OTFBBUFRVbmhFZ2dyaUwzMVBuRnMzQVh0Q0hydTNaWHM4aDRNQ1ZLTmNWdFhIelhrLVRmTkw2bEhFdURFdzViUWQ3U3ZhNFZRbUpPYmxWcjY5Uk1WLVB6Q2p0LTRXX2t3M1JNWVVzeldEanAxOElSWGZHR1UzX293MHlpWktCckVZRWxzMl92djh1OFVrS2ZlME8zWjBXdjJMdUs3M2JYVnVEdTFvRnJYSkhFWlhjSndlcEdHQ0hYRFVEOFVub3BxZUFRcFNnTEo5VWlCSnJFanZOS1J1SVBhUloxNlVpbGtlOWNCV1BkZ2lzYlhkMTJiNTY2Nll0ekZfQUYwTjVWTWlOVnQ3Uk5wcTN2bzd3aDktIC0wX10tLT48L2c+PC9zdmc+'>

<span id="more"></span>

<h1 id="Hexo-的设置"><a href="#Hexo-的设置" class="headerlink" title="Hexo 的设置"></a>Hexo 的设置</h1><h2 id="附上我的-package-json"><a href="#附上我的-package-json" class="headerlink" title="附上我的 package.json"></a>附上我的 package.json</h2><p>这个其实不重要，hexo init 自动生成的。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo-site&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5.4.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-deployer-git&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-filter-kroki&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-archive&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-ejs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-marked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-sass&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-stylus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-theme-landscape&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.0.3&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: https://hexo.io/docs/configuration.html</span><br><span class="line">## Source: https://github.com/hexojs/hexo/</span><br><span class="line"></span><br><span class="line"># Site</span><br><span class="line">title: 陈孟辉的学习笔记</span><br><span class="line">subtitle: 加油吧骚年</span><br><span class="line">description: &quot;日积月藏，不做咸鱼。这里是陈孟辉的个人学习笔记，日常工作是开发公众号和小程序。&quot;</span><br><span class="line">keywords: 开发菜鸟 陈孟辉</span><br><span class="line">author: 陈孟辉</span><br><span class="line">language: zh</span><br><span class="line"># timezone:</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="line">url: https://chenmenghui.gitee.io</span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: true # Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br><span class="line">  trailing_html: true # Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br><span class="line"></span><br><span class="line"># Directory</span><br><span class="line">source_dir: source</span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"># Writing</span><br><span class="line">new_post_name: :title.md # File name of new posts</span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: false # Transform title into titlecase</span><br><span class="line">external_link:</span><br><span class="line">  enable: true # Open external links in new tab</span><br><span class="line">  field: site # Apply to the whole site</span><br><span class="line">  exclude: &#x27;&#x27;</span><br><span class="line">filename_case: 0</span><br><span class="line">render_drafts: false</span><br><span class="line">post_asset_folder: false</span><br><span class="line">relative_link: true</span><br><span class="line">future: true</span><br><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace: &#x27;&#x27;</span><br><span class="line">  wrap: true</span><br><span class="line">  hljs: false</span><br><span class="line">prismjs:</span><br><span class="line">  enable: false</span><br><span class="line">  preprocess: true</span><br><span class="line">  line_number: true</span><br><span class="line">  tab_replace: &#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># Home page setting</span><br><span class="line"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span><br><span class="line"># per_page: Posts displayed per page. (0 = disable pagination)</span><br><span class="line"># order_by: Posts order. (Order by date descending by default)</span><br><span class="line">index_generator:</span><br><span class="line">  path: &#x27;&#x27;</span><br><span class="line">  per_page: 10</span><br><span class="line">  order_by: -date</span><br><span class="line"></span><br><span class="line"># Category &amp; Tag</span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"># Metadata elements</span><br><span class="line">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span><br><span class="line">meta_generator: true</span><br><span class="line"></span><br><span class="line"># Date / Time format</span><br><span class="line">## Hexo uses Moment.js to parse and display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">## http://momentjs.com/docs/#/displaying/format/</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line">## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;</span><br><span class="line">updated_option: &#x27;mtime&#x27;</span><br><span class="line"></span><br><span class="line"># Pagination</span><br><span class="line">## Set per_page to 0 to disable pagination</span><br><span class="line">per_page: 10</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"># Include / Exclude file(s)</span><br><span class="line">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span><br><span class="line">include:</span><br><span class="line">exclude:</span><br><span class="line">ignore:</span><br><span class="line"></span><br><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line"># theme: landscape</span><br><span class="line">theme: aath</span><br><span class="line"></span><br><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo:</span><br><span class="line">    gitee: git@gitee.com:chenmenghui/chenmenghui.git</span><br><span class="line">    github: git@github.com:chenmenghui/chenmenghui.github.com.git</span><br><span class="line">  branch: &quot;master&quot;</span><br><span class="line">  message: &quot;&#123;&#123; now(&#x27;YYYY-MM-DD HH:mm:ss&#x27;) &#125;&#125; &quot;</span><br><span class="line"></span><br><span class="line"># favicon</span><br><span class="line">favicon: /favicon.ico</span><br><span class="line"></span><br><span class="line"># Aside</span><br><span class="line">## search</span><br><span class="line">## avatar</span><br><span class="line">## aside-description</span><br><span class="line">## links</span><br><span class="line">search: false</span><br><span class="line">#avatar: http://olnzpdi2u.bkt.clouddn.com/avatar.jpg</span><br><span class="line">avatar: /src/brain.jpg</span><br><span class="line">aside-description: &quot;日积月藏，不做咸鱼&quot;</span><br><span class="line">links:</span><br><span class="line">  PHP手册: http://php.net/manual/zh/</span><br><span class="line">  PHP/Laravel社区: https://laravel-china.org/docs</span><br><span class="line">  Linux命令大全: http://man.linuxde.net/</span><br><span class="line">  W3Cschool: https://www.w3cschool.cn/</span><br><span class="line">  微信小程序教程: https://developers.weixin.qq.com/miniprogram/dev/</span><br><span class="line">  廖雪峰的官网网站: https://www.liaoxuefeng.com/</span><br><span class="line">  正则表达式: http://tool.oschina.net/uploads/apidocs/jquery/regexp.html</span><br><span class="line">  算法图示: https://www.cs.usfca.edu/~galles/visualization/Algorithms.html</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 常用命令</title>
    <url>/posts/817c7d82.html</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>名称</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>sz</td>
<td>从服务器下载</td>
</tr>
<tr>
<td>tail</td>
<td>从尾到头读取</td>
</tr>
<tr>
<td>find</td>
<td>查找</td>
</tr>
</tbody></table>
<h3 id="sz"><a href="#sz" class="headerlink" title="sz"></a>sz</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sz xxx</span><br></pre></td></tr></table></figure>

<h3 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h3><ul>
<li>-f</li>
<li>-n</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tail -f xxx</span><br></pre></td></tr></table></figure>

<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>完美解决浏览器输入http被自动跳转至https问题</title>
    <url>/posts/c903a917.html</url>
    <content><![CDATA[<p>在本地开发，经常发现http被浏览器换成了https，之后也只能通过清理浏览器纪录还原，一次又一次的就很烦了。</p>
<p>本地开发URL不以 .com 结尾，比如 .test ，就能解决这个问题。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://laratool.test/</span><br></pre></td></tr></table></figure>

<p>另外百度了一个方法，但这个也不怎么保险，留下参考：</p>
<p><a href="https://zhuanlan.zhihu.com/p/379637201">完美解决浏览器输入http被自动跳转至https问题</a></p>
<p>Edge 浏览器：</p>
<ol>
<li>地址栏中输入chrome:&#x2F;&#x2F;net-internals&#x2F;#hsts。</li>
<li>在Delete domain中输入项目的域名，并Delete（删除）。</li>
<li>可以在Query domain测试是否删除成功。</li>
</ol>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
  </entry>
  <entry>
    <title>PHP之《深入PHP面向对象、模式与实践》</title>
    <url>/posts/50791.html</url>
    <content><![CDATA[<h1 id="对象基础"><a href="#对象基础" class="headerlink" title="对象基础"></a>对象基础</h1><p>本章主要内容有</p>
<ul>
<li>类和对象:声明类及实例化对象</li>
<li>构造方法:自动加载对象</li>
<li>基本数据类型和类的类型:</li>
<li>继承:为什么需要继承和如何是用继承</li>
<li>可见性:整合对象接口并保护类中的方法和属性不受干涉</li>
</ul>
<h2 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h2><h3 id="编写第一个类"><a href="#编写第一个类" class="headerlink" title="编写第一个类"></a>编写第一个类</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShopProduce</span> </span>&#123;</span><br><span class="line">    <span class="comment">// todo</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单的说,类是用于生成对象的代码模板.使用class关键字和一个任意的类名来声明类.类名可以是任意数字和字母的组合,但不能以数字开头.和一个类关联的代码必须用大括号括起来.</p>
<h3 id="第一个对象-或两个"><a href="#第一个对象-或两个" class="headerlink" title="第一个对象(或两个)"></a>第一个对象(或两个)</h3><p>如果类是声明对象的模板,那么对象是根据类中定义的模板所构造的数据.对象可以被说成类的”实例”,它是由类定义的数据类型.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$product1</span> = <span class="keyword">new</span> <span class="title class_">ShopProducee</span>();</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$product1</span>); <span class="comment">// 可以看到包含对象ID的字符串</span></span><br></pre></td></tr></table></figure>

<h2 id="设置类中的属性"><a href="#设置类中的属性" class="headerlink" title="设置类中的属性"></a>设置类中的属性</h2><blockquote>
<p>类的属性和标准的变量很相似,不过必须在声明和赋值前加一个代表可见性的关键字.这个关键字可以是public,protected或private,它决定了属性的作用域.</p>
</blockquote>
<p>类可以定义被称为属性的特定变量.属性也称为成员变量,用来存放对象之间互不相同的数据.</p>
<p>虽然php并没有强制所有的属性都要在类中声明,但是那种动态地增加属性到对象的方式并不值得推荐.比如:</p>
<ul>
<li>特定意义不明显,难以及时发现属性中语法之外的错误</li>
<li>类太过松散,因为属性都是在客户端代码中实现的</li>
<li>不得不重复做出一些经常做的事情</li>
</ul>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><blockquote>
<p>function关键字在方法名之前.方法名之后的圆括号是可选的参数列表.方法体用大括号括起来</p>
</blockquote>
<p>属性可以让对象存储数据,类方法则可以让对象执行任务.方法是类中声明的特殊函数.</p>
<h2 id="参数和类型"><a href="#参数和类型" class="headerlink" title="参数和类型"></a>参数和类型</h2><p>数据类型决定了PHP代码中处理数据的方式—-从更高层次的意义上来说,每个类都定义一种数据类型.</p>
<p>在PHP中,定义方法和函数时不需要指定参数的数据类型,在便利的同时,也带来了一些隐患.在需要特殊指定类型的场合,这种便利会带来一些隐患</p>
<h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><p>数据的类型决定了PHP代码中处理数据的方式.比如,使用字符串类型显示字符数据并用字符串函数处理这些数据等等.这些类型被称为<strong>基本类型</strong>.</p>
<p>从更高层次上来说,每一个类都定义了一种数据类型.因此ShopProduct对象属于基本类型,但同时也属于ShopProduct类这一类型.</p>
<h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4><p>需要时刻留意代码中的数据类型,比如”false”和false两者结果相反的解析可能会导致截然不同的结果.解决这种问题的方法总结如下</p>
<ul>
<li>检测类型</li>
<li>转换类型</li>
<li>依赖良好清晰的文档(无论哪种模式,都需要这个)</li>
</ul>
<p>无论如何解决这类问题,都要认真考虑一件事情:类型处理.PHP是一种弱类型的语言.我们不能依赖编译器来防止类型相关的bug,必须考虑当非法数据类型的参数传递给方法是,会产生什么样的后果.我们不能完全信任客户端程序员,应始终在方法中处理他们引入的无用信息.</p>
<h4 id="获得提示-对象类型"><a href="#获得提示-对象类型" class="headerlink" title="获得提示:对象类型"></a>获得提示:对象类型</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params">ShopProduct <span class="variable">$shopProduct</span></span>) </span>&#123; </span><br><span class="line">    <span class="comment">// todo</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最新的php7也可以把string之类东西作为类型提示.刚刚说的处理这类问题需要<em>检测类型</em>,<em>转化类型</em>或<em>良好的文档</em>,现在就会通过直接指定解决了.</p>
<p>需要注意的是,虽然自动类型检查是防止bug的极佳途径,但是自动类型检查实在代码运行的时候才能生效.</p>
<p>数据类型和类确有很多相似之处,他们有一个关键的不同之处:定义一个类也就定义了一个类型,但是一个类型可以用于描述一个家族的众多类.<br>这种将不同的类放在一个类型之下的机制被称为继承.</p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>继承是从一个基类得到一个或多个派生类的机制</p>
<p>继承自另外一个类的类被称为该类的子类.子类将继承父类的特性.这些特性由属性和方法组成.子类可以增加父类之外的新功能.</p>
<h3 id="继承问题"><a href="#继承问题" class="headerlink" title="继承问题"></a>继承问题</h3><h3 id="使用继承"><a href="#使用继承" class="headerlink" title="使用继承"></a>使用继承</h3><p>创建继承的第一步是找到现有的基类元素中不适合放在一起,或者不需要进行特殊处理的类方法.</p>
<h4 id="构造方法和继承"><a href="#构造方法和继承" class="headerlink" title="构造方法和继承"></a>构造方法和继承</h4><p>在子类中定义构造方法是,需要传递参数给父类的构造方法,否则得到的可能是一个构造不完整的对象.<br>要调用父类的方法,首先要找到一个引用类本身的途径:句柄(handle).PHP在这里提供了parent关键字.<br>要引用一个类而不是对象的方法,可以使用::而不是-&gt;</p>
<h4 id="调用被覆写的方法"><a href="#调用被覆写的方法" class="headerlink" title="调用被覆写的方法"></a>调用被覆写的方法</h4><p>parent关键字可以在任何覆写父类方法中使用.覆写一个父类的方法是,并不希望删除父类的功能,而是扩展它,通过在当前对象中调用父类的方法可以达到这个目的.</p>
<h3 id="public-private-protected-管理类的访问"><a href="#public-private-protected-管理类的访问" class="headerlink" title="public private protected:管理类的访问"></a>public private protected:管理类的访问</h3><p>类中的元素可以被声明为public private protected</p>
<ul>
<li>public:在任何地方都可以访问</li>
<li>private:只能在当前类中才能访问,即使是子类也不可以</li>
<li>protected: 可在当前类及其子类中访问,外部代码无权访问</li>
</ul>
<h1 id="高级特性"><a href="#高级特性" class="headerlink" title="高级特性"></a>高级特性</h1><p>本章的主要内容有:</p>
<ul>
<li>静态方法和属性:通过类而不是对象来获取数据和功能</li>
<li>抽象类和接口:设计和实现相分离</li>
<li>错误处理:异常</li>
<li>Final类和方法:限制继承</li>
<li>拦截器方法:自动委托</li>
<li>析构方法:对象销毁前的清理工作</li>
<li>克隆对象:创建对象的副本</li>
<li>把对象解析成字符串:创建摘要型方法</li>
<li>回调:用匿名函数为组件添加功能</li>
</ul>
<h2 id="静态方法和属性"><a href="#静态方法和属性" class="headerlink" title="静态方法和属性"></a>静态方法和属性</h2><p>我们不仅可以通过对象访问方法和属性,还可以通过类来访问它们.这样的方法和属性是”静态的”,必须使用static关键字来声明</p>
<p>静态方法是以类为作用域的函数.静态方法不能访问这个类中的普通属性,因为那些属性属于一个对象,但可以访问静态属性.如果修改一个静态属性,那么这个类的所有实例都能访问到这个新值.<br>因为通过类而不是实例来访问静态元素,所以访问静态元素时不需要引用对象的变量,而是使用::来连接类名和属性或者类名和方法.</p>
<blockquote>
<p>只用使用parent关键字调用方法时,才能对一个非静态方法进行静态形式的调用.其他任何情况都需要先生成一个对象,然后使用-&gt;符号调用对象中的方法.<br>也就是说,除非访问一个被覆写的方法,否则永远只能用::访问被明确声明为static的方法或属性.</p>
</blockquote>
<h2 id="常量属性"><a href="#常量属性" class="headerlink" title="常量属性"></a>常量属性</h2><p>虽然常量属性是公共的,可静态访问的,但客户端代码不能改变它们.</p>
<p>常量属性只包含基本数据类型的值.不能将一个对象指派给常量.像静态属性一样，只能通过类而不能通过类的实例访问常量属性.</p>
<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><p>抽象类不能直接实例化.抽象类中只定义或部分实现子类需要的方法.子类可以继承它并且通过实现其中的抽象方法,使抽象类具体化.</p>
<p>抽象类的每个子类都必须实现抽象类中的所有抽象方法,或者把他们自身也声明为抽象方法.扩展类不仅仅负责简单实现抽象类中的方法,还必须重新声明方法.新的实现方法的访问控制不能比抽象方法的访问控制更加严格.新实现方法的参数个数应该和抽象方法的参数个数一样,重新生成对应的类型提示.</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>抽象类提供了具体实现的标准,而接口(interface)则是纯粹的模板.接口只能定义功能而不包含实现内容.接口可用关键字interface声明.接口可以包含属性和方法声明,但是方法体为空. </p>
<h2 id="trait"><a href="#trait" class="headerlink" title="trait"></a>trait</h2><p>和java一样，php不支持多重继承。但接口可以帮助我们解决这个问题。换言之，php中的类只能有一个父类，却可以实现多个接口，这个类对于实现的每个接口都有相应的类型。</p>
<p>接口可以提供没有任何实现的类型。但如果我们希望在继承层次中共享实现，可以是使用trait。</p>
<p>trait是类似类的结构，它本身不能被实例化，但可以混合到类中。trait中定义的任何方法都可以被使用它的任何类所使用的。trait可以改变类的结构，但无法更改其类型。我们可以把trait视为包含到类中的部分。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">PriceUtilities</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="comment">//    private $tax_rate = 17;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> float $price</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> float</span></span><br><span class="line"><span class="comment">*/</span><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">calculateTax</span>(<span class="params"><span class="keyword">float</span> <span class="variable">$price</span></span>): <span class="title">float</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getTaxRate</span>() * <span class="variable">$price</span> / <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">getTaxRate</span>(<span class="params"></span>): <span class="title">float</span></span>; <span class="comment">// trait中定义抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">StaticPriceUtilities</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$tax_rate</span> = <span class="number">17</span>; <span class="comment">// 改变trait中方法的访问权限</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">calculateTax</span>(<span class="params"><span class="keyword">float</span> <span class="variable">$price</span></span>): <span class="title">float</span> // <span class="title">trait</span> 可以使用静态方法</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$tax_rate</span> * <span class="variable">$price</span> / <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">TaxTools</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">calculateTax</span>(<span class="params"><span class="keyword">float</span> <span class="variable">$price</span></span>): <span class="title">float</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">222</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShopProduct</span> <span class="keyword">implements</span> <span class="title">IdentityObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">PriceUtilities</span>, <span class="title">IdentityTrait</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTaxRate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">17</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StaticShopProduct</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">StaticPriceUtilities</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Service</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UtilityService</span> <span class="keyword">extends</span> <span class="title">Service</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">PriceUtilities</span>, <span class="title">TaxTools</span> &#123;</span><br><span class="line">        <span class="title">TaxTools</span>::<span class="title">calculateTax</span> <span class="title">insteadof</span> <span class="title">PriceUtilities</span>; <span class="comment">// 使用instanceof管理方法名冲突</span></span><br><span class="line">        <span class="title class_">PriceUtilities</span>::<span class="variable constant_">calculateTax</span> <span class="keyword">as</span> basicTax;           <span class="comment">// 使用别名重写trait的方法 </span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getTaxRate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">IdentityTrait</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">generateId</span>(<span class="params"></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">uniqid</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IdentityObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">generateId</span>(<span class="params"></span>): <span class="title">string</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$p</span> = <span class="keyword">new</span> <span class="title class_">ShopProduct</span>();</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$p</span>-&gt;<span class="title function_ invoke__">calculateTax</span>(<span class="number">100</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$p</span>-&gt;<span class="title function_ invoke__">generateId</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$u</span> = <span class="keyword">new</span> <span class="title class_">UtilityService</span>();</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$u</span>-&gt;<span class="title function_ invoke__">calculateTax</span>(<span class="number">100</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$u</span>-&gt;<span class="title function_ invoke__">basicTax</span>(<span class="number">100</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$sp</span> = <span class="keyword">new</span> <span class="title class_">StaticShopProduct</span>();</span><br><span class="line"><span class="keyword">print</span> <span class="variable">$sp</span>::<span class="title function_ invoke__">calculateTax</span>(<span class="number">100</span>) . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="延迟静态绑定-static关键字"><a href="#延迟静态绑定-static关键字" class="headerlink" title="延迟静态绑定:static关键字"></a>延迟静态绑定:static关键字</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">DomainObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">static</span>(); <span class="comment">// #1 return new self();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">DomainObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>self指的不是调用上下文,而是解析上下文.所以,上代码中的#1的static如果换成self就会出错.因为这里的self被解析成create()的DomainObject,而不是解析为调用self的User</p>
<p>static类似于self,但它指的是被调用的类而不是包含类.在本例中,它的意思是调用User::create()将生成一个新的User对象,而不是试图实例化一个DomainObject对象.</p>
<p>static关键字不仅仅可以用于实例化.和self及parent一样,static还可以用作静态方法调用的标识符,甚至是从非静态上下文中调用.</p>
<p>假设想为DomainObject引入组的概念.默认所有类属于default级别,同时也可以为继承层次结构的某些分支重写类别.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">DomainObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$group</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;group = <span class="built_in">static</span>::<span class="title function_ invoke__">getGroup</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">static</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getGroup</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Default&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">DomainObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Document</span> <span class="keyword">extends</span> <span class="title">DomainObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getGroup</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Document&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpreadSheet</span> <span class="keyword">extends</span> <span class="title">Document</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title class_">User</span>::<span class="title function_ invoke__">create</span>());</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title class_">SpreadSheet</span>::<span class="title function_ invoke__">create</span>());</span><br></pre></td></tr></table></figure>

<p><a href="http://php.net/manual/zh/language.oop5.late-static-bindings.php">注意static的问题</a>:</p>
<p>在非静态环境下，所调用的类即为该对象实例所属的类.由于 $this-&gt; 会在同一作用范围内尝试调用私有方法，而 static:: 则可能给出不同结果.另一个区别是 static:: 只能用于静态属性.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;success!\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">foo</span>();</span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">foo</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">   <span class="comment">/* foo() will be copied to B, hence its scope will still be A and</span></span><br><span class="line"><span class="comment">    * the call be successful */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">/* original method is replaced; the scope of the new one is C */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$b</span> = <span class="keyword">new</span> <span class="title function_ invoke__">B</span>();</span><br><span class="line"><span class="variable">$b</span>-&gt;<span class="title function_ invoke__">test</span>();</span><br><span class="line"><span class="variable">$c</span> = <span class="keyword">new</span> <span class="title function_ invoke__">C</span>();</span><br><span class="line"><span class="variable">$c</span>-&gt;<span class="title function_ invoke__">test</span>();   <span class="comment">// fail 此处A中static::foo()会调用C中的私有方法foo(),故会报错</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>后期静态绑定的解析会一直到取得一个完全解析了的静态调用为止.另一方面，如果静态调用使用 parent:: 或者 self:: 将转发调用信息.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">who</span>(); <span class="comment">// 留意此处,static究竟指向谁</span></span><br><span class="line">                       <span class="comment">// 如果是self::who(),就都是A了.这就是特别需要注意的地方</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        A::<span class="title function_ invoke__">foo</span>(); <span class="comment">// 非转发调用</span></span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">foo</span>();</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">foo</span>(); <span class="comment">//</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="title function_ invoke__">foo</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">C::<span class="title function_ invoke__">test</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出<br>    A<br>    C<br>    C<br>    C</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">who</span>(); <span class="comment">// 留意此处,static究竟指向谁</span></span><br><span class="line">        <span class="comment">// 如果是self::who(),就都是A了.这就是特别需要注意的地方</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="built_in">static</span>::<span class="variable language_">class</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        A::<span class="title function_ invoke__">foo</span>(); <span class="comment">// 非转发调用</span></span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">foo</span>();</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">foo</span>(); <span class="comment">//</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="title function_ invoke__">foo</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="built_in">static</span>::<span class="variable language_">class</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line"><span class="comment">//    public static function who() &#123;</span></span><br><span class="line"><span class="comment">//        echo static::class;</span></span><br><span class="line"><span class="comment">//        echo __CLASS__.&quot;\n&quot;;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">C::<span class="title function_ invoke__">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>输出<br>    AA<br>    CB<br>    CB<br>    CB</p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>通常我们喜欢封装好多类是完整和独立的,不需要从外部干预内部代码的执行.所以依赖程序员另外写代码来测试一个类中的方法是否出错,是非常不合理的.</p>
<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>异常时从PHP5内置的Exception类(或其子类)实例化得到的特殊对象.Exception类型的对象用于存放或报告错误信息.<br>Exception类的构造方法接受两个可选的参数:消息字符串和错误代码.其提供了一些有用的方法来分析错误条件:</p>
<p><strong>Exception类的public方法</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>getMessage()</td>
<td>获得传递给构造方法的消息字符串</td>
</tr>
<tr>
<td>getCode()</td>
<td>获得传递给构造方法的错误代买</td>
</tr>
<tr>
<td>getFile()</td>
<td>获得产生异常的文件</td>
</tr>
<tr>
<td>getLine()</td>
<td>获得产生异常的行号</td>
</tr>
<tr>
<td>getPrevious</td>
<td>获得一个嵌套的异常对象</td>
</tr>
<tr>
<td>getTrace()</td>
<td>获得一个多维数组,这个数组追踪导致异常的方法调用,包含方法,类,文件和参数数据</td>
</tr>
<tr>
<td>getTraceAsString()</td>
<td>获得getTrace()返回数据的字符串版本</td>
</tr>
<tr>
<td>__toString()</td>
<td>在字符串中使用Exception对象时自动调用.返回一个描述异常细节的字符串</td>
</tr>
</tbody></table>
<h3 id="异常的子类化"><a href="#异常的子类化" class="headerlink" title="异常的子类化"></a>异常的子类化</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XmlException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$error</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">LibXMLError <span class="variable">$error</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$shortfile</span> = <span class="title function_ invoke__">basename</span>(<span class="variable">$error</span>-&gt;file);</span><br><span class="line">        <span class="variable">$msg</span> = <span class="string">&quot;[<span class="subst">&#123;$shortfile&#125;</span>, line <span class="subst">&#123;$error-&gt;line&#125;</span>, col <span class="subst">&#123;$error-&gt;column&#125;</span>]<span class="subst">&#123;$error-&gt;message&#125;</span>&quot;</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;error = <span class="variable">$error</span>;</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>(<span class="variable">$msg</span>, <span class="variable">$error</span>-&gt;code);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getLibXmlError</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;error;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConfException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Conf</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;file = <span class="variable">$file</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$file</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileException</span>(<span class="string">&quot;file &#x27;<span class="subst">&#123;$file&#125;</span>&#x27; does not exist&#x27;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;xml = <span class="title function_ invoke__">simplexml_load_file</span>(<span class="variable">$file</span>, <span class="literal">null</span>, LIBXML_NOERROR);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_object</span>(<span class="variable">$this</span>-&gt;xml)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">XmlException</span>(<span class="title function_ invoke__">libxml_get_last_error</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">gettype</span>(<span class="variable">$this</span>-&gt;xml);</span><br><span class="line">        <span class="variable">$matches</span> = <span class="variable language_">$this</span>-&gt;xml-&gt;<span class="title function_ invoke__">xpath</span>(<span class="string">&quot;/conf&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">count</span>(<span class="variable">$matches</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConfException</span>(<span class="string">&quot;could not find root element: conf&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_writable</span>(<span class="variable">$this</span>-&gt;file)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileException</span>(<span class="string">&quot;file &#x27;<span class="subst">&#123;$this-&gt;file&#125;</span>&#x27; is not writeable&#x27;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$this</span>-&gt;file, <span class="variable">$this</span>-&gt;xml-&gt;<span class="title function_ invoke__">asXML</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Runner</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$conf</span> = <span class="keyword">new</span> <span class="title class_">Conf</span>(<span class="title function_ invoke__">dirname</span>(<span class="keyword">__FILE__</span>) . <span class="string">&quot;conf01.xml&quot;</span>);</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;user:<span class="subst">&#123;$conf-&gt;get(&#x27;user&#x27;)&#125;</span>\n&quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;user:<span class="subst">&#123;$conf-&gt;get(&#x27;host&#x27;)&#125;</span>\n&quot;</span>;</span><br><span class="line">            <span class="variable">$conf</span>-&gt;<span class="title function_ invoke__">set</span>(<span class="string">&#x27;pass&#x27;</span>, <span class="string">&#x27;newpass&#x27;</span>);</span><br><span class="line">            <span class="variable">$conf</span>-&gt;<span class="title function_ invoke__">write</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileException <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="comment">// todo 文件权限问题或者文件不存在</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (XmlException <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="comment">// todo XML文件损坏</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ConfException <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="comment">// todo 错误的XML文件格式</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="comment">// todo 后备捕捉器</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="内部错误类"><a href="#内部错误类" class="headerlink" title="内部错误类"></a>内部错误类</h2><p>try和catch子句主要针对的是php代码，而不是核心引擎.内部生成的错误会维护它们自己的逻辑.如果两者混为一谈，将会导致一片混乱.php7引用了error类来解决这个问题.error类和exception类实现了同一个内置接口Throwable.因此，可以使用相同的方法处理它们.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">eval</span>(<span class="string">&quot;echo &#x27;hello&#x27;&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span>(<span class="built_in">Error</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">print</span> <span class="title function_ invoke__">get_class</span>(<span class="variable">$e</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">print</span> <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="comment">// todo</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ParseError</span><br><span class="line">syntax error, unexpected end of file, expecting &#x27;,&#x27; or &#x27;;&#x27;</span><br></pre></td></tr></table></figure>

<p>如上所示，可以在catch子句中通过制定Error这个父类和其子类来捕捉相匹配的内部错误.内部错误有下:</p>
<table>
<thead>
<tr>
<th>错误</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ArithmeticError</td>
<td>当发生与数学计算（特别是位运算）相关的错误时被抛出</td>
</tr>
<tr>
<td>AssertionError</td>
<td>当assert()语言结构（调试中）断言失败时被抛出</td>
</tr>
<tr>
<td>DivisionByZeroError</td>
<td>进行除零计算时被抛出</td>
</tr>
<tr>
<td>ParseError</td>
<td>在运行时解析php出错时抛出</td>
</tr>
<tr>
<td>TypeError</td>
<td>当错误类型的参数被传递给方法，方法返回一个错误类型的参数，或是传递给方法的参数是的数量不正确时被抛出</td>
</tr>
</tbody></table>
<h2 id="Final类和方法"><a href="#Final类和方法" class="headerlink" title="Final类和方法"></a>Final类和方法</h2><p>final关键字可以终止类的继承.final类不能有子类,final方法不能被覆写.</p>
<h2 id="使用拦截器"><a href="#使用拦截器" class="headerlink" title="使用拦截器"></a>使用拦截器</h2><p><strong>拦截器方法</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>__get($property)</td>
<td>访问未定义的属性时被调用</td>
</tr>
<tr>
<td>__set($property, $value)</td>
<td>给未定义的属性赋值时被调用</td>
</tr>
<tr>
<td>__isset($property)</td>
<td>对未定义的属性调用isset()时被调用</td>
</tr>
<tr>
<td>__unset($property)</td>
<td>对未定义的属性调用unset()时被调用</td>
</tr>
<tr>
<td>__call($property, $arg_array)</td>
<td>调用未定义非静态的方法时被调用</td>
</tr>
<tr>
<td>__callStatic($property, $arg_array)</td>
<td>调用未定义的静态方法时被调用</td>
</tr>
</tbody></table>
<h2 id="析构方法"><a href="#析构方法" class="headerlink" title="析构方法"></a>析构方法</h2><p>在对象被垃圾收集器收集之前(即对象从内存中删除之前)自动调用.可以使用这个方法进行最后必要的清理工作.</p>
<h2 id="使用-clone-复制对象"><a href="#使用-clone-复制对象" class="headerlink" title="使用__clone()复制对象"></a>使用__clone()复制对象</h2><p>在对象调用clone时,可以通过__clone()实现控制复制什么.</p>
<p>在复制对象属性时只会复制引用,并不会复制引用的对象.<br>如果不希望对象属性(对象的属性是其他对象)在复制之后被共享,则可以显示地在__clone()方法中复制指向的对象.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;id = <span class="number">0</span>; <span class="comment">// 控制复制属性</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;account = <span class="keyword">clone</span> <span class="variable language_">$this</span>-&gt;account; <span class="comment">// 复制对象属性(不这样做会引用该对象属性)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="定义对象的字符串值"><a href="#定义对象的字符串值" class="headerlink" title="定义对象的字符串值"></a>定义对象的字符串值</h2><p>__toString()方法</p>
<h2 id="回调-匿名函数和闭包"><a href="#回调-匿名函数和闭包" class="headerlink" title="回调 匿名函数和闭包"></a>回调 匿名函数和闭包</h2><p>虽然匿名函数不是严格意义上的面向对象的特性,但是它非常有用.</p>
<p>利用回调,可以在运行时将与组件的核心任务没有直接关系的功能插入到组件中.有了组件回调,就可以在不知道上下文的情况下扩展他人的代码.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$price</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$price</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;price = <span class="variable">$price</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProcessSale</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$call_backs</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">registerCallBack</span>(<span class="params"><span class="variable">$call_back</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_callable</span>(<span class="variable">$call_back</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&quot;callback not callable&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;call_backs[] = <span class="variable">$call_back</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 回调方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $product</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sale</span>(<span class="params"><span class="variable">$product</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">&#123;$product-&gt;name&#125;</span>:processing\n&quot;</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable language_">$this</span>-&gt;call_backs <span class="keyword">as</span> <span class="variable">$call_back</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">call_user_func</span>(<span class="variable">$call_back</span>, <span class="variable">$product</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mailer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sendMail</span>(<span class="params"><span class="variable">$product</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Send Mail <span class="subst">&#123;$product-&gt;name&#125;</span>&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$logger</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$product</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;logging <span class="subst">&#123;$product-&gt;name&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 闭包</span></span><br><span class="line"><span class="comment"> * Class Totalizer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Totalizer</span></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">warnAmount</span>(<span class="params"><span class="variable">$amt</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$count</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$product</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$amt</span>, &amp;<span class="variable">$count</span></span>) </span>&#123;</span><br><span class="line">            <span class="variable">$count</span> += <span class="variable">$product</span>-&gt;price;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;\n<span class="subst">&#123;$product-&gt;name&#125;</span> is <span class="subst">&#123;$product-&gt;price&#125;</span>\n&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$count</span> &gt; <span class="variable">$amt</span>) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;High price reached <span class="subst">&#123;$count&#125;</span>\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$process</span> = <span class="keyword">new</span> <span class="title class_">ProcessSale</span>();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$process</span>-&gt;<span class="title function_ invoke__">registerCallBack</span>(<span class="variable">$logger</span>); <span class="comment">// 回调 匿名函数</span></span><br><span class="line">    <span class="variable">$process</span>-&gt;<span class="title function_ invoke__">registerCallBack</span>([<span class="keyword">new</span> <span class="title class_">Mailer</span>(), <span class="string">&#x27;sendMail&#x27;</span>]); <span class="comment">// 回调 对象方法 #1</span></span><br><span class="line">    <span class="variable">$process</span>-&gt;<span class="title function_ invoke__">registerCallBack</span>(<span class="title class_">Totalizer</span>::<span class="title function_ invoke__">warnAmount</span>(<span class="number">3</span>)); <span class="comment">// 回调 静态方法 闭包</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$process</span>-&gt;<span class="title function_ invoke__">sale</span>(<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&#x27;shoes&#x27;</span>, <span class="number">6</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="variable">$process</span>-&gt;<span class="title function_ invoke__">sale</span>(<span class="keyword">new</span> <span class="title class_">Product</span>(<span class="string">&#x27;pen&#x27;</span>, <span class="number">12</span>));</span><br></pre></td></tr></table></figure>

<p>注意在上述代码中的#1处的用法</p>
<p>这里传递了一个数组,其第一个元素是对象,第二个元素是对象中的方法名(字符串形式).is_callable可以智能检测这类数组.另外,这种写法在array_walk等中也常见</p>
<h2 id="匿名类"><a href="#匿名类" class="headerlink" title="匿名类"></a>匿名类</h2><p>当需要从很小的类中创建和继承实例，特别是这个类很简单且特定于局部上下文时，匿名类很有用。 </p>
<h1 id="对象工具"><a href="#对象工具" class="headerlink" title="对象工具"></a>对象工具</h1><p>本章主要内容:</p>
<ul>
<li>包:将代码按逻辑分类打包</li>
<li>命名空间:将代码封装在独立的单元中</li>
<li>包含路径:为类库代码设置访问路径</li>
<li>类函数和对象函数:测试对象,类,属性和方法的函数</li>
<li>反射API:一组强大的内置类,可以在代码运行时访问类信息</li>
</ul>
<h2 id="PHP和包"><a href="#PHP和包" class="headerlink" title="PHP和包"></a>PHP和包</h2><h2 id="PHP包和命名空间"><a href="#PHP包和命名空间" class="headerlink" title="PHP包和命名空间"></a>PHP包和命名空间</h2><p>尽管php本身不支持包的概念,开发人员却一直在使用<em>文件系统</em>和<em>命名模式</em>将代码组织成类似于包的结构.</p>
<h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><p>命名空间是一个容器,他可以将类 函数和变量放在其中.在命名空间中,可以无条件访问这些项.在命名空间之外,必须导入或引用命名空间,才能访问它所包含的项.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">才发现这个命名空间和那个函数作用域很像,居然可以这个样子来思考这个命名空间.</span><br></pre></td></tr></table></figure>

<h3 id="使用文件系统模拟包"><a href="#使用文件系统模拟包" class="headerlink" title="使用文件系统模拟包"></a>使用文件系统模拟包</h3><p>无论哪个版本的php中,都可以使用提供了包结构的文件系统来组织类.</p>
<h3 id="PEAR风格的命名方式"><a href="#PEAR风格的命名方式" class="headerlink" title="PEAR风格的命名方式"></a>PEAR风格的命名方式</h3><p>如果不使用命名空间,可以使用文件系统来定义包.每个类都根据包路径来命名,每个路径名以下划线分割.</p>
<h3 id="包含路径"><a href="#包含路径" class="headerlink" title="包含路径"></a>包含路径</h3><p>要使程序代码不再直接依赖于类库代码程序中包含的类库,需要将调用类库的代码和类库代码进行解耦,即让文件可以在系统的任何地方进行调用.这可以通过把包放到include_path指定引用目录中即可.</p>
<h2 id="自动加载"><a href="#自动加载" class="headerlink" title="自动加载"></a>自动加载</h2><p>__autoload()方法是一种根据类和文件的结构,管理类库文件包含的有效方法.</p>
<p>一个文件定义一个类,一一对应,便于管理.这种方法虽然会带来额外的开销(包含文件会带来开销),但这种组织方式特别有效.尤其是系统需要在运行时使用新类的时候.</p>
<h2 id="类函数和对象函数"><a href="#类函数和对象函数" class="headerlink" title="类函数和对象函数"></a>类函数和对象函数</h2><p>在PHP代码运行时可能无法知道正在使用的类是哪个,这是因为php中类是可以通过字符串动态加载到,而字符串是不固定的.</p>
<p>在实际开发中,需要先检查类是否存在,它是否拥有使用的方法等,以避免可能存在的风险.</p>
<h3 id="查找类"><a href="#查找类" class="headerlink" title="查找类"></a>查找类</h3><p>class_exists()函数接受表示类的字符串,检查并返回布尔值.</p>
<p>print_r(get_declared_classess())可以列出用户定义的类和php内置的类.注意它只返回在函数调用时已声明的类.可以继续运行require等增加脚本中类的数目.</p>
<h3 id="了解对象或类"><a href="#了解对象或类" class="headerlink" title="了解对象或类"></a>了解对象或类</h3><p><a href="http://php.net/manual/zh/function.get-class.php">get_class</a></p>
<p>返回对象实例 object 所属类的名字.</p>
<p><a href="http://php.net/manual/zh/language.operators.type.php">instanceof</a> </p>
<p>用于确定一个 PHP 变量是否属于某一类 class 的实例</p>
<h3 id="了解类中的方法"><a href="#了解类中的方法" class="headerlink" title="了解类中的方法"></a>了解类中的方法</h3><p>get_class_method () 获取一个类中所有的public方法</p>
<p>is_callable() 验证变量是否可以作为函数被调用</p>
<p>method_exists() 判断类中是否存在指定方法</p>
<h3 id="了解类的属性"><a href="#了解类的属性" class="headerlink" title="了解类的属性"></a>了解类的属性</h3><p>get_class_vars() 返回类中public属性</p>
<h3 id="了解继承"><a href="#了解继承" class="headerlink" title="了解继承"></a>了解继承</h3><p>get_parent_class()</p>
<p>is_subclass_of()<br>只会告诉继承关系,而不会告诉类是否实现了一个接口.</p>
<p>instanceof </p>
<p>class_implements()<br>返回由接口构成的数组.</p>
<h4 id="展示代码"><a href="#展示代码" class="headerlink" title="展示代码"></a>展示代码</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">test_private</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">get_class_methods</span>(<span class="keyword">new</span> <span class="title function_ invoke__">C</span>()));</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">is_callable</span>([<span class="keyword">new</span> <span class="title function_ invoke__">C</span>(), <span class="string">&#x27;foo&#x27;</span>])); <span class="comment">// true</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">is_callable</span>([<span class="keyword">new</span> <span class="title function_ invoke__">C</span>(), <span class="string">&#x27;test_private&#x27;</span>])); <span class="comment">// false</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">method_exists</span>(<span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">method_exists</span>(<span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;test_private&#x27;</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">get_parent_class</span>(<span class="keyword">new</span> <span class="title function_ invoke__">C</span>())); <span class="comment">// B</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">is_subclass_of</span>(<span class="keyword">new</span> <span class="title function_ invoke__">C</span>(),<span class="string">&quot;A&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="方法调用"><a href="#方法调用" class="headerlink" title="方法调用"></a>方法调用</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$product</span> = <span class="title function_ invoke__">getProduct</span>(); <span class="comment">// 获得对象</span></span><br><span class="line"><span class="variable">$method</span> = <span class="string">&#x27;getTitle&#x27;</span>; <span class="comment">// 定义方法名</span></span><br><span class="line"><span class="keyword">print</span> <span class="variable">$product</span>-&gt;<span class="variable">$method</span>(); <span class="comment">// 调用方法</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$returnVal</span> = <span class="title function_ invoke__">call_user_func</span>(<span class="string">&#x27;myFunction&#x27;</span>);</span><br><span class="line"><span class="variable">$returnVal</span> = <span class="title function_ invoke__">call_user_func</span>([<span class="variable">$myObject</span>, <span class="string">&#x27;methodName&#x27;</span>]); <span class="comment">// 调用类方法 call_user_function_array()</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$product</span> = <span class="title function_ invoke__">getProduct</span>(); <span class="comment">// 获得对象</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">call_user_func</span>([<span class="variable">$product</span>, <span class="string">&#x27;setDiscount&#x27;</span>], <span class="number">20</span>);</span><br><span class="line">等价于</span><br><span class="line"><span class="variable">$product</span>-&gt;<span class="title function_ invoke__">setDiscount</span>(<span class="number">20</span>);</span><br><span class="line">等价于</span><br><span class="line"><span class="variable">$method</span> = <span class="string">&#x27;setDiscount&#x27;</span>;</span><br><span class="line"><span class="variable">$product</span>-&gt;<span class="variable">$method</span>(<span class="number">20</span>);;</span><br></pre></td></tr></table></figure>

<h2 id="反射API"><a href="#反射API" class="headerlink" title="反射API"></a>反射API</h2><p>PHP中的反射API就像java中的java.lang.reflect包一样.它由一系列可以分析属性&#x2F;方法和类的内置类构成.这个比上述的类函数要有方便灵活有效地多.</p>
<h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>反射API的部分类</p>
<table>
<thead>
<tr>
<th>类</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Reflection</td>
<td>为类的摘要信息提供静态函数export()</td>
</tr>
<tr>
<td>ReflectionClass</td>
<td>类信息和工具</td>
</tr>
<tr>
<td>ReflectionMethod</td>
<td>类方法信息和工具</td>
</tr>
<tr>
<td>ReflectionParameter</td>
<td>方法参数信息</td>
</tr>
<tr>
<td>ReflectionProperty</td>
<td>类属性信息</td>
</tr>
<tr>
<td>ReflectionFunction</td>
<td>函数信息和工具</td>
</tr>
<tr>
<td>ReflectionExtension</td>
<td>PHP扩展信息</td>
</tr>
<tr>
<td>ReflectionException</td>
<td>错误类</td>
</tr>
<tr>
<td>ReflectionZendExtension</td>
<td>PHP Zend扩展信息</td>
</tr>
</tbody></table>
<p>利用反射API中的这些类,可以在运行时访问对象&#x2F;函数和脚本中的扩展的信息</p>
<p><em>个人理解</em></p>
<p><em>这本书有一个缺点,好多东西都是点到为止,对我这样的初学者来说还是有不少麻烦的.</em><br><em>这一章主要讲的就是代码结构化的概念,都是围绕着如何结构化的组织代码.</em><br><em>这本书出的有些早,都七八年了.所以有些都成了历史了.尤其是现在的开发大都基于框架的时候.有些东西成了共识,无需赘言.</em></p>
<p><em>其实也是分别对应了我写代码的一些历程.</em><br><em>一开始的时候我都是把所有的代码写在一个文件里.</em><br><em>慢慢的发现有些代码是重复的,所以就把那些重复的代码封装成函数,按需调用.</em><br><em>接着就是把常用的函数单独放到一个个文件中,需要的时候require.</em><br><em>然后接触到到类的概念,就把一些常用的东西封装成类.这个时候的类在我看来就是一堆函数的组合.也就是说,和函数相比其实也没有什么区别.对我而言,如今我能真正获取到的优势就是可以把功能相关的方法组合起来,方便记忆与调用.</em><br><em>接着接触到框架,知道了如何使用路径和名称把类放置到一个个合适的地方,以方便使用php自带的方法引用那些.在这里知道了namespace的概念.</em><br><em>其实我现在就是处在这个尴尬的位置.</em><br><em>因为我定义的所有类,就是一堆方法的零碎组合.这就是我需要学习的地方,即设计模式.其实就是从类的角度思考代码.</em>****</p>
<p><em>这一章于我而言,其实就是学到了反射这个概念.这是以后内容的基础.</em><br><em>所谓反射,在我看来,就是get_class_name之类的获取类信息的函数的升级版.</em><br><em>好吧,刚刚我也说出了我对对象和函数的认识.</em><br><em>不过说起来,一年多的代码编写中,我其实一直用的都是过程式的编程思维.所以这本书的内容对我而言是一个挑战,更是一个突破.</em><br><em>见识到了按接口编程,虽然现在不熟悉,但我肯定是能掌握的.</em><br><em>因为我这一步步走来,曾经不知道有多少坎如今看来已是寻常~~~</em></p>
<h1 id="对象与设计"><a href="#对象与设计" class="headerlink" title="对象与设计"></a>对象与设计</h1><p>本章内容:</p>
<ul>
<li>设计基础:设计是什么?面向对象设计和过程式编程有什么不同?</li>
<li>类的内容:如果决定一个类应该包含什么</li>
<li>封装:在类接口后面隐藏实现和数据</li>
<li>多态:使用一个共同的父类,允许在运行是透明地替换特定的子类</li>
<li>UML</li>
</ul>
<h1 id="什么是设计模式-为什么使用它们"><a href="#什么是设计模式-为什么使用它们" class="headerlink" title="什么是设计模式?为什么使用它们"></a>什么是设计模式?为什么使用它们</h1><p>本章内容:</p>
<ul>
<li>模式基础:什么是设计模式</li>
<li>模式结构:每个设计模式的关键元素</li>
<li>模式收益:为何模式值得花时间学习</li>
</ul>
<h1 id="模式原则"><a href="#模式原则" class="headerlink" title="模式原则"></a>模式原则</h1><p>本章内容:</p>
<ul>
<li>组合:如果通过聚合对象来获得比只是用继承更好的灵活性</li>
<li>解耦:如何降低系统中元素的依赖性</li>
<li>接口的作用:模式和多态</li>
<li>模式分类:模式类别</li>
</ul>
<h2 id="组合与继承"><a href="#组合与继承" class="headerlink" title="组合与继承"></a>组合与继承</h2><p>继承是一种强大的设计方式，它可以有效应对环境及上下文的改变。但是它也会限制灵活性，特别是类承担太多的职责的时候。</p>
<p>组合优于继承。</p>
<h1 id="生成对象"><a href="#生成对象" class="headerlink" title="生成对象"></a>生成对象</h1><p>本章内容</p>
<ul>
<li>单例（Singleton）模式：只生成一个对象实例的特殊类</li>
<li>工厂方法（Factory Method)模式：构建创造者类的继承层次</li>
<li>抽象工厂（Abstract Factory)模式：对功能相关的产品进行分组</li>
<li>原形（Prototype）模式：通过克隆生成对象</li>
<li>服务定位器（Service Locator）模式：向系统索要对象</li>
<li>依赖注入（Dependency Injection）模式：让系统给我们对象</li>
</ul>
<h2 id="生成对象的问题及解决方案"><a href="#生成对象的问题及解决方案" class="headerlink" title="生成对象的问题及解决方案"></a>生成对象的问题及解决方案</h2><h2 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h2><p>虽然全局变量是面向对象程序员都讨厌的东西，但是为了所有的类能够方便地访问变量，我们不惜代价忍受全局访问的缺陷。<br>命名空间可以在一定程度上避免命名的冲突，我们至少可以将变量作用域限制在包内，这意味着第三方库与我们自己库中的变量命名发生冲突的可能性大大降低了。即便如此，在命名空间内部依然有命名冲突的风险。</p>
<p>单例模式和全局变量相比如何？两者都容易被误用。因为系统中的任何地方都可以访问单例，所以也容易引发难以调试的依赖关系。在面向对象的设计中，单例优于全局变量，因为单例可以防止其他代码向单例写入错误的数据类型。</p>
<h2 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h2><p>面向对象的设计强调抽象类高于实现类，也就是说，我们应该尽量一般化，而不是特殊化。工厂方法模式能够解决代码关注抽象类型是如何创建对象实例的问题。答案就是用实现类负责实例化对象。</p>
]]></content>
      <categories>
        <category>图书</category>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>图书</tag>
      </tags>
  </entry>
  <entry>
    <title>延迟静态绑定</title>
    <url>/posts/18839.html</url>
    <content><![CDATA[<p>后期静态绑定，用于在继承范围内引用静态调用的类。</p>
<p>后期静态绑定工作原理是存储了在上一个“非转发调用”（non-forwarding call）的类名。当进行静态方法调用时，该类名即为明确指定的那个（通常在 :: 运算符左侧部分）；当进行非静态方法调用时，即为该对象所属的类。所谓的“转发调用”（forwarding call）指的是通过以下几种方式进行的静态调用：self::，parent::，static:: 以及 forward_static_call()。可用 get_called_class() 函数来得到被调用的方法所在的类名，static:: 则指出了其范围。</p>
<p>转发调用:<br>self:: 所在类<br>parent:: 父类<br>static:: 调用类</p>
<p>后期静态绑定的解析会一直到取得一个完全解析了的静态调用为止。另一方面，如果静态调用使用 parent:: 或者 self:: 将转发调用信息</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">who</span>(); <span class="comment">// 留意此处,static究竟指向谁</span></span><br><span class="line">        <span class="comment">// 如果是self::who(),就都是A了.这就是特别需要注意的地方</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="built_in">static</span>::<span class="variable language_">class</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        A::<span class="title function_ invoke__">foo</span>(); <span class="comment">// 非转发调用</span></span><br><span class="line">        <span class="built_in">static</span>::<span class="title function_ invoke__">foo</span>();</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">foo</span>(); <span class="comment">//</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="title function_ invoke__">foo</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">who</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="built_in">static</span>::<span class="variable language_">class</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="keyword">__CLASS__</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">C::<span class="title function_ invoke__">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AA</span><br><span class="line">CB</span><br><span class="line">CB</span><br><span class="line">CB</span><br></pre></td></tr></table></figure>

<p>对于方法who()中<br>static::class是调用类的类名<br>__CLASS__是对象实例所属类的类名</p>
<p>个人对运行结果的看法</p>
<p>第一个AA<br>    1. C::test() &#x3D;&gt; C-&gt;B::test(){A::foo()}<br>    2. A::foo(){static::who()} &#x3D;&gt; A::who()</p>
<p>第二个CB<br>    1. C::test() &#x3D;&gt; C-&gt;B::test(){<em>static::foo()</em>}<br>    2. C-&gt;B::test(){static::foo()} &#x3D;&gt; C-&gt;B-&gt;A::foo(){static::who()} &#x3D; C::who() &#x3D; C-&gt;B::who() # 类C没有foo,所以向最近的被继承类中找</p>
<p>第三个CB<br>    1. C::test() &#x3D;&gt; C-&gt;B::test(){<em>parent::foo()</em>}<br>    2. C-&gt;B-&gt;A::foo(){static::who()} &#x3D;&gt; C-&gt;B::who() # 直接找类A中的foo</p>
<p>第三个CB<br>    1. C::test() &#x3D;&gt; C-&gt;B::test(){<em>self::foo()</em>}<br>    2. C-&gt;B-&gt;A::foo(){static::who()} &#x3D;&gt; C-&gt;B::who() # 类B没有foo,所以向最近的被继承类中找</p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>学习Yii</title>
    <url>/posts/11629.html</url>
    <content><![CDATA[<h1 id="依赖注入-控制反转-依赖倒置"><a href="#依赖注入-控制反转-依赖倒置" class="headerlink" title="依赖注入 控制反转 依赖倒置"></a>依赖注入 控制反转 依赖倒置</h1><p><a href="https://blog.csdn.net/moreorless/article/details/4510859">依赖倒置、控制反转和依赖注入辨析</a></p>
<p>其实<a href="https://www.zhihu.com/search?type=content&q=%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC">知乎上就有非常好的解析</a>。</p>
<p>说起来自己看了这个概念也快两年了，一直没能够理解。一方面是代码量太少，另一方面其实没有概念，只扣字眼是看不出什么的。这个时候生动的例子就格外重要了。</p>
<p>说起来，自己写的代码里也一直没有用到这些东西。</p>
<p>背历史政治的时候最怕的就是什么背景啊意义啊什么的。太多搞不明白其中有什么区别的情况。现在是工作，没必要扣字眼。</p>
<p>简单的来说，控制反转是思想，依赖注入是方法。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmailSender</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;发送邮件&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$email</span> = <span class="keyword">new</span> <span class="title class_">EmailSender</span>;</span><br><span class="line">        <span class="variable">$email</span>-&gt;<span class="title function_ invoke__">send</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如下修改之后</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#2</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">EmailSender</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmailSenderByQq</span> <span class="keyword">implements</span> <span class="title">EmailSender</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;通过qq发送邮件&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$_emailSenderObject</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">EmailSender <span class="variable">$_emailSenderObject</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;_emailSenderObject = <span class="variable">$_emailSenderObject</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;_emailSenderObject-&gt;<span class="title function_ invoke__">send</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="keyword">new</span> <span class="title class_">EmailSenderByQq</span>()); <span class="comment">// 依赖注入 依赖倒置原则</span></span><br><span class="line"><span class="variable">$user</span>-&gt;<span class="title function_ invoke__">register</span>();</span><br></pre></td></tr></table></figure>

<p>看到上面两端代码，应该可以看到其中的区别。#1 是我常用的方式，其缺点显而易见，就是 User 类内部绑死了 EmailSender。这种操作应该就是「正向控制流程」。那「控制反转」自然就是反向操作——在User 类内部绑死的类被移交到 User 外部绑定，这就是依赖注入。</p>
<p>其实我在实际工作中体会不到这种优势，因为工作流程大都固定，类的数量较少，其中关联关系的数量就更少了。加上更多是在框架上敲业务代码，不免就远离了这些。</p>
<p>不要抱怨什么了。书到用时方恨少。这些都是前人的总结，浪费就太可惜了。</p>
<h1 id="Yii的依赖注入容器"><a href="#Yii的依赖注入容器" class="headerlink" title="Yii的依赖注入容器"></a>Yii的依赖注入容器</h1><p>Yii中包含一个重要的基类「BaseObject」，几乎所有的类都会继承于它。覆写了那些魔术方法及构造函数。</p>
<p>Yii的配置比较灵活。比如可以方便地对框架自带的类属性进行覆写。<br>简单看就是设置类属性。把类属性设置和类声明分开，可以实现统一设置多处引用效果。</p>
<p>以分页类为例。查阅代码可知两个重要的参数「page（当前页）」「per-page（每页条数）」，在框架中有自己的定义。可以这般实现自定义。</p>
<p><em>最基本的用法</em></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">controllers</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Yii</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">data</span>\<span class="title">Pagination</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">web</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这里就是直接在实例化类的时候通过构造函数初始化那些预设的属性</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">actionIndex</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$pagination</span> = <span class="keyword">new</span> <span class="title class_">Pagination</span>([</span><br><span class="line">            <span class="string">&#x27;totalCount&#x27;</span> =&gt; <span class="number">9</span>,</span><br><span class="line">            <span class="string">&#x27;pageParam&#x27;</span>      =&gt; <span class="string">&#x27;page-index&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pageSizeParam&#x27;</span> =&gt; <span class="string">&#x27;page-size&#x27;</span>,</span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">halt</span>(<span class="variable">$pagination</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>进而</em>可以这样</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">controllers</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Yii</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">data</span>\<span class="title">Pagination</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">web</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 利用容器——其中一点和单例模式挺像的，每每实例化类的时候先看看其中有没有，有的话就直接返回了</span></span><br><span class="line"><span class="comment">     *（容器的另一个特点是可以自动实例化那些被当下实例化类所依赖的类）</span></span><br><span class="line"><span class="comment">     * 利用这点，可以在保存在容器前利用构造函数覆盖类中的属性，这样之后的调用就可以拿到「自定义」一些属性的类了</span></span><br><span class="line"><span class="comment">     * 下面几个方法就是这一点的更进一步的运用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">actionIndex</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">set</span>(<span class="title class_">Pagination</span>::<span class="variable language_">class</span>,[</span><br><span class="line">            <span class="string">&#x27;pageParam&#x27;</span>      =&gt; <span class="string">&#x27;page-index&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pageSizeParam&#x27;</span> =&gt; <span class="string">&#x27;page-size&#x27;</span>,</span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$pagination</span> = <span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="title class_">Pagination</span>::<span class="variable language_">class</span>, [],[</span><br><span class="line">            <span class="string">&#x27;totalCount&#x27;</span>    =&gt; <span class="number">9</span></span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">halt</span>(<span class="variable">$pagination</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>然后</em>可以把那两个自定义的参数封装到bootstrap中（bootstrap是在入口脚本处引入的）</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//frontend/config/bootstrap.php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">data</span>\<span class="title">Pagination</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">set</span>(<span class="title class_">Pagination</span>::<span class="variable language_">class</span>, [</span><br><span class="line">    <span class="string">&#x27;pageParam&#x27;</span>      =&gt; <span class="string">&#x27;page-index&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pageSizeParam&#x27;</span> =&gt; <span class="string">&#x27;page-size&#x27;</span>,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<p>现在就可以在frontend模块中所有的地方使用</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">controllers</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Yii</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">data</span>\<span class="title">Pagination</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">web</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">actionIndex</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$pagination</span> = <span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="title class_">Pagination</span>::<span class="variable language_">class</span>, [],[</span><br><span class="line">            <span class="string">&#x27;totalCount&#x27;</span>    =&gt; <span class="number">9</span></span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">halt</span>(<span class="variable">$pagination</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>再进一步</em>，bootstrap的那段可以自定义引导类更灵活的配置</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//frontend/bootstrap/DiBootstrap.php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">bootstrap</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Yii</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">data</span>\<span class="title">Pagination</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">base</span>\<span class="title">BootstrapInterface</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这里使用了接口「BootstrapInterface」</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DiBootstrap</span> <span class="keyword">implements</span> <span class="title">BootstrapInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bootstrap</span>(<span class="params"><span class="variable">$app</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">set</span>(<span class="title class_">Pagination</span>::<span class="variable language_">class</span>, [</span><br><span class="line">            <span class="string">&#x27;pageParam&#x27;</span>     =&gt; <span class="string">&#x27;page-index&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pageSizeParam&#x27;</span> =&gt; <span class="string">&#x27;page-size&#x27;</span>,</span><br><span class="line">        ]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时在需要的模块配置文件中配置好引导类，像这样</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//frontend/config/main.php</span></span><br><span class="line">...</span><br><span class="line"><span class="string">&#x27;bootstrap&#x27;</span> =&gt; [<span class="string">&#x27;log&#x27;</span>, \frontend\bootstrap<span class="title class_">\DiBootstrap</span>::<span class="variable language_">class</span>],</span><br><span class="line">..  .</span><br></pre></td></tr></table></figure>

<p>调用和上一个方式一样</p>
<h1 id="Yii中创建对象的三种方法"><a href="#Yii中创建对象的三种方法" class="headerlink" title="Yii中创建对象的三种方法"></a>Yii中创建对象的三种方法</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">models</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 只需要简单的创建一个类</span></span><br><span class="line"><span class="comment"> * Class User</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span> frontend\models</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">frontend</span>\<span class="title">models</span>\<span class="title">User</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">defined</span>(<span class="string">&#x27;YII_DEBUG&#x27;</span>) <span class="keyword">or</span> <span class="title function_ invoke__">define</span>(<span class="string">&#x27;YII_DEBUG&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="title function_ invoke__">defined</span>(<span class="string">&#x27;YII_ENV&#x27;</span>) <span class="keyword">or</span> <span class="title function_ invoke__">define</span>(<span class="string">&#x27;YII_ENV&#x27;</span>, <span class="string">&#x27;dev&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../../vendor/autoload.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../../vendor/yiisoft/yii2/Yii.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 向此容器注册一个类定义</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">set</span>(<span class="title class_">User</span>::<span class="variable language_">class</span>, [</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span>   =&gt; <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Grey&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">26</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实例化的三种方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$user1</span> = <span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="title class_">User</span>::<span class="variable language_">class</span>);</span><br><span class="line"><span class="variable">$user2</span> = <span class="title class_">Yii</span>::<span class="title function_ invoke__">createObject</span>(<span class="title class_">User</span>::<span class="variable language_">class</span>);</span><br><span class="line"><span class="variable">$user3</span> = \yii\di<span class="title class_">\Instance</span>::<span class="title function_ invoke__">ensure</span>(<span class="title class_">User</span>::<span class="variable language_">class</span>);</span><br></pre></td></tr></table></figure>

<h1 id="容器扩展"><a href="#容器扩展" class="headerlink" title="容器扩展"></a>容器扩展</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../../vendor/autoload.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../../vendor/yiisoft/yii2/Yii.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$val</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="variable">$id</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$age</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">private</span> Foo <span class="variable">$foo</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Foo <span class="variable">$foo</span>, <span class="variable">$id</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;foo = <span class="variable">$foo</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;id = <span class="variable">$id</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> \<span class="title">yii</span>\<span class="title">base</span>\<span class="title">BaseObject</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="variable">$id</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$age</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">string</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">private</span> Foo <span class="variable">$foo</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params">Foo <span class="variable">$foo</span>, <span class="variable">$id</span>, <span class="variable">$config</span> = []</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>(<span class="variable">$config</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;foo = <span class="variable">$foo</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;id = <span class="variable">$id</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$container</span> = <span class="title class_">Yii</span>::<span class="variable">$container</span>;</span><br><span class="line"><span class="variable">$user</span> = <span class="variable">$container</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="title class_">User</span>::<span class="variable language_">class</span>, [<span class="number">1</span> =&gt; <span class="number">123</span>], [</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Grey&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>  =&gt; <span class="number">28</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="variable">$student</span> = <span class="variable">$container</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="title class_">Student</span>::<span class="variable language_">class</span>,</span><br><span class="line">    [<span class="number">1</span> =&gt; <span class="number">123</span>, ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">26</span>,</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Red&#x27;</span></span><br><span class="line">    ]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">die</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>注意上述代码中类 User 和类 Student 的参数不同之处。</p>
<p>Yii 会使用__set&#x2F;__get对类中已声明的属性进行覆盖。但对于继承 BaseObject 的类，就需要配置第三个参数「$config」来覆盖了。</p>
<h1 id="模仿-laravel-中的-Facade"><a href="#模仿-laravel-中的-Facade" class="headerlink" title="模仿 laravel 中的 Facade"></a>模仿 laravel 中的 Facade</h1><ol start="0">
<li>创建 接口 和 类</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">service</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IUserService</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">findAll</span>(<span class="params"><span class="variable">$offset</span>, <span class="variable">$limit</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">findOne</span>(<span class="params"><span class="variable">$id</span></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">service</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">IUserService</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">findAll</span>(<span class="params"><span class="variable">$offset</span>, <span class="variable">$limit</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="variable">$offset</span>, <span class="variable">$limit</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">findOne</span>(<span class="params"><span class="variable">$id</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$id</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="0">
<li>在 bootstrap 中绑定接口和类</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// frontend/config/bootstrap.php</span></span><br><span class="line"><span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">set</span>(\frontend\service<span class="title class_">\IUserService</span>::<span class="variable language_">class</span>, \frontend\service<span class="title class_">\UserServiceImpl</span>::<span class="variable language_">class</span>);</span><br></pre></td></tr></table></figure>

<ol start="0">
<li>创建 Facade</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">facade</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Yii</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">frontend</span>\<span class="title">service</span>\<span class="title">IUserService</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Class UserFacade</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span> frontend\facade</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> IUserService findAll($offset, $limit)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> IUserService findOne($id)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserFacade</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span>, <span class="keyword">array</span> <span class="variable">$arguments</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">/** <span class="doctag">@var</span> IUserService $service */</span></span><br><span class="line">        <span class="variable">$service</span> = <span class="title class_">Yii</span>::<span class="variable">$container</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="title class_">IUserService</span>::<span class="variable language_">class</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">call_user_func_array</span>([<span class="variable">$service</span>, <span class="variable">$name</span>], <span class="variable">$arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="0">
<li>调用</li>
</ol>
<p>比如在控制器中</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// \frontend\controllers\ApiController</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">actionService3</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">halt</span>(<span class="title class_">StudentFacade</span>::<span class="title function_ invoke__">findAll</span>(<span class="number">60</span>,<span class="number">20</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="0">
<li>更进一步，创建一个 Facade 基类</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">facade</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">base</span>\<span class="title">InvalidConfigException</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">di</span>\<span class="title">Instance</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseFacade</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> object|string|array|static</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InvalidConfigException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getFacadeAccessor</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InvalidConfigException</span>(<span class="string">&#x27;Facade does not implement getFacadeAccessor method&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $arguments</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InvalidConfigException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">__callStatic</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$arguments</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$server</span> = <span class="title class_">Instance</span>::<span class="title function_ invoke__">ensure</span>(<span class="built_in">static</span>::<span class="title function_ invoke__">getFacadeAccessor</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">call_user_func_array</span>([<span class="variable">$server</span>, <span class="variable">$name</span>], <span class="variable">$arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在创建类</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">facade</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">frontend</span>\<span class="title">service</span>\<span class="title">IUserService</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Class UserFacade</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span> frontend\facade</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> IUserService findAll($offset, $limit)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> IUserService findOne($id)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentFacade</span> <span class="keyword">extends</span> <span class="title">BaseFacade</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getFacadeAccessor</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">IUserService</span>::<span class="variable language_">class</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用方式和4一致</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// \frontend\controllers\ApiController</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">actionService3</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">halt</span>(<span class="title class_">StudentFacade</span>::<span class="title function_ invoke__">findAll</span>(<span class="number">60</span>,<span class="number">20</span>));</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<ol start="0">
<li>利用这一点可以更「方便」的使用诸如Redis。</li>
</ol>
<p>注意 Yii 中的 redis 模块是 composer 另外安装的。所以在ide中没有代码提示的功能</p>
<p>安装之后，需要配置在 config 中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// common/config/main-local.php</span><br><span class="line">&lt;?php</span><br><span class="line">return [</span><br><span class="line">    &#x27;components&#x27; =&gt; [</span><br><span class="line">        ...</span><br><span class="line">        &#x27;redis&#x27;  =&gt; [</span><br><span class="line">            &#x27;class&#x27;    =&gt; &#x27;yii\redis\Connection&#x27;,</span><br><span class="line">            &#x27;hostname&#x27; =&gt; &#x27;127.0.0.1&#x27;,</span><br><span class="line">            &#x27;port&#x27;     =&gt; 6379,</span><br><span class="line">            &#x27;database&#x27; =&gt; 0,</span><br><span class="line">        ],</span><br><span class="line">        ...</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>这个时候就可以使用 Yii::$app-&gt;redis 来调用 redis 类中的方法了</p>
<p>其中的注释也是必要的，从 yii\redis\Connection 中复制后在每个 method 后加 static，ide可以据此提供代码提示的功能</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">frontend</span>\<span class="title class_">facade</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">frontend</span>\<span class="title">service</span>\<span class="title">IUserService</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Yii</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">yii</span>\<span class="title">redis</span>\<span class="title">LuaScriptBuilder</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ...</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> static mixed set($key, $value, ...$options) Set the string value of a key. &lt;https://redis.io/commands/set&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@method</span> static mixed get($key) Get the value of a key. &lt;https://redis.io/commands/get&gt;</span></span><br><span class="line"><span class="comment"> * ...</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Redis</span> <span class="keyword">extends</span> <span class="title">BaseFacade</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 其实5中的基类就是实现这个功能</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// public static function __callStatic($name, $arguments)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     if (isset(Yii::$app-&gt;redis)) &#123;</span></span><br><span class="line">    <span class="comment">//         $service = Yii::$app-&gt;redis;</span></span><br><span class="line">    <span class="comment">//         return call_user_func_array([$service, $name], $arguments);</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Instance::ensure(&#x27;redis&#x27;) 在这里其实就是调用了 Yii::$app-&gt;redi</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getFacadeAccessor</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;redis&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结起来，这一步其实就是对 __callstatic 和 Instance 的实际应用</p>
<p>代码很容易读懂，使用也比较舒服。</p>
<h3 id="控制器生命周期"><a href="#控制器生命周期" class="headerlink" title="控制器生命周期"></a>控制器生命周期</h3><ol start="0">
<li>在控制器创建和配置之后，yii\base\Controller::init()方法会被调用</li>
<li>控制器根据请求ID创建一个操作对象：<ul>
<li>如果操作ID没有指定，会使用default action ID默认操作ID</li>
<li>如果在action map找到操作ID, 会创建一个独立操作</li>
<li>如果操作ID对应操作方法,会创建一个内联操作</li>
<li>否则会抛出yii\base\InvalidRouteException异常</li>
</ul>
</li>
<li>控制器按顺序调用应用主题,模块(如果控制器属于模块),控制器的beforeAction方法<ul>
<li>如果任意一个调用返回false,后面为调用的beforeAction()会跳过并且操作执行会被取消</li>
<li>默认情况下每个beforeAciton()方法会触发一个beforeAction事件,在事件中可以追加事件处理操作</li>
</ul>
</li>
<li>控制器执行操作<ul>
<li>请求数据解析和填入到操作参数</li>
</ul>
</li>
<li>控制器按顺序调用控制器,模块(如果控制器属于模块),应用主体的afterAction()<ul>
<li>默认情况下每个afterAction()会触发一个afterAction事件,在事件中可以追加事件处理操作</li>
</ul>
</li>
<li>应用主体获取操作结果并赋值给响应</li>
</ol>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>文件下载.md</title>
    <url>/posts/308458a5.html</url>
    <content><![CDATA[<p>文件下载</p>
<h2 id="header"><a href="#header" class="headerlink" title="header"></a>header</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">        <span class="comment">// echo &quot;&lt;script&gt;window.open(&#x27;&#123;$_SERVER[&#x27;REDIRECT_SCRIPT_URI&#x27;]&#125;/exportsheet?export=1&amp;sheetname=&#123;$sheetName&#125;&#x27;, &#x27;_self&#x27;);&lt;/script&gt;&quot;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">window.location.href=<span class="string">&#x27;about:blank&#x27;</span>;</span><br><span class="line">window.<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> &gt;</span></span><br><span class="line">                    let link = document.createElement(&#x27;a&#x27;);</span><br><span class="line">                    // link.download = \&quot;&#123;$sheetName&#125;.zip\&quot;;</span><br><span class="line">                    link.style.display = &#x27;none&#x27;;</span><br><span class="line">                    link.href = \&quot;&#123;$_SERVER[&#x27;REDIRECT_SCRIPT_URI&#x27;]&#125;/?exportsheet=1&amp;sheetname=&#123;$sheetName&#125;\&quot;;</span><br><span class="line">                    // link.target=\&quot;_blandk\&quot;</span><br><span class="line">                    document.body.appendChild(link);</span><br><span class="line">                    link.click();</span><br><span class="line">                    document.body.removeChild(link);</span><br><span class="line"></span><br><span class="line">                    // window.location.href=&#x27;about:blank&#x27;;</span><br><span class="line">                    // window.close();</span><br><span class="line">                <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">ob_end_clean</span>();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$aTmpSql</span> <span class="keyword">as</span> <span class="variable">$sTmpSql</span>) &#123;</span><br><span class="line">    <span class="variable">$db_read_service</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="variable">$sTmpSql</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;console.log(&#x27;For flush: &quot;</span> . <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>) . <span class="string">&quot;&#x27;)&lt;/script&gt;&quot;</span>;</span><br><span class="line">    <span class="title function_ invoke__">ob_flush</span>();</span><br><span class="line">    <span class="title function_ invoke__">flush</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>杂项</category>
      </categories>
      <tags>
        <tag>杂项</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery一些不常见的属性选择器</title>
    <url>/posts/31082.html</url>
    <content><![CDATA[<h3 id="jQuery获取属性名带特殊符号的dom"><a href="#jQuery获取属性名带特殊符号的dom" class="headerlink" title="jQuery获取属性名带特殊符号的dom"></a>jQuery获取属性名带特殊符号的dom</h3><p>像</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;frm_schedule[2][ScheduleMethod]&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;frm_schedule[2][ScheduleMethod]&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个，使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#frm_schedule[2][ScheduleMethod]&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;id&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>是获取不到值的<br>使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;input[id=&quot;frm_schedule[2][ScheduleMethod]&quot;]&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;id&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>才行~~~</p>
<h3 id="使用正则"><a href="#使用正则" class="headerlink" title="使用正则"></a>使用正则</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _select = $(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&#x27;select[id^=&quot;frm_schedule&quot;][id$=&quot;\[Point\]&quot;]&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>注意其中 id 的值「^&#x3D;」和「$&#x3D;」同时匹配 id 的头和尾。即「且」的关系。</p>
<p>如果写成</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _select = $(<span class="variable language_">this</span>).<span class="title function_">find</span>(<span class="string">&#x27;select[id^=&quot;frm_schedule&quot;],[id$=&quot;\[Point\]&quot;]&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>这就是「或」的关系</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取get中的参数</title>
    <url>/posts/59755.html</url>
    <content><![CDATA[<p>除了使用ajaxForm,也可以这样做</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">content</span>=<span class="string">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myText&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myText1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span> <span class="attr">id</span>=<span class="string">&quot;image&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#submit&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> formobj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myForm&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>(formobj);</span></span><br><span class="line"><span class="language-javascript">            formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, $(<span class="string">&#x27;#image&#x27;</span>)[<span class="number">0</span>].<span class="property">files</span>[<span class="number">0</span>]); <span class="comment">// 注意,文件特殊</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> data = formData;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>: <span class="string">&quot;../ajaxForm/index.php&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: data,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&quot;Post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">cache</span>: <span class="literal">false</span>,<span class="comment">//上传文件无需缓存</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">processData</span>: <span class="literal">false</span>,<span class="comment">//用于对data参数进行序列化处理 这里必须false</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">contentType</span>: <span class="literal">false</span>, <span class="comment">//必须</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&quot;上传完成!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>原生JS遍历getElementsByClassName</title>
    <url>/posts/5129.html</url>
    <content><![CDATA[<h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><p>把class下的所有input设置成disabled</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-2.1.4.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">setInputDisabled</span>(<span class="params">elements</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (elements.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 这里很奇怪，使用Array.isArray判断是错的，但可以使用length获取长度。</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; elements.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">setInputDisabled</span>(elements[i]);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> tagElements;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> tags = [<span class="string">&#x27;input&#x27;</span>, <span class="string">&#x27;select&#x27;</span>, <span class="string">&#x27;textarea&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> tags) &#123;</span></span><br><span class="line"><span class="language-javascript">                    tagElements = elements.<span class="title function_">getElementsByTagName</span>(tags[i]);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; tagElements.<span class="property">length</span>; j++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        tagElements[j].<span class="property">disabled</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setInputDisabled</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;box&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>注意箭头函数</title>
    <url>/posts/12786.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> time2stamp = <span class="keyword">function</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    time = time.<span class="title function_">substring</span>(<span class="number">0</span>,<span class="number">19</span>);</span><br><span class="line">    time = time.<span class="title function_">replace</span>(<span class="regexp">/-/g</span>,<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(time).<span class="title function_">getTime</span>()/<span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stamp2time = <span class="keyword">function</span>(<span class="params">stamp</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(stamp * <span class="number">1000</span>);    <span class="comment">//根据时间戳生成的时间对象</span></span><br><span class="line">    <span class="keyword">var</span> date = (d.<span class="title function_">getFullYear</span>()) + <span class="string">&quot;-&quot;</span> +</span><br><span class="line">        (d.<span class="title function_">getMonth</span>() + <span class="number">1</span>) + <span class="string">&quot;-&quot;</span> +</span><br><span class="line">        (d.<span class="title function_">getDate</span>()) + <span class="string">&quot; &quot;</span> +</span><br><span class="line">        (d.<span class="title function_">getHours</span>()) + <span class="string">&quot;:&quot;</span> +</span><br><span class="line">        (d.<span class="title function_">getMinutes</span>()) + <span class="string">&quot;:&quot;</span> +</span><br><span class="line">        (d.<span class="title function_">getSeconds</span>());</span><br><span class="line">    <span class="keyword">return</span> date;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>JS 循环数组</title>
    <url>/posts/5099.html</url>
    <content><![CDATA[<h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><p>循环处理的时候for in多了一项，<br>多了个if判断。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">picker</span> &#123;</span><br><span class="line">    <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> unpickBoxes) &#123;</span><br><span class="line">            <span class="keyword">if</span> (unpickBoxes.<span class="title function_">hasOwnProperty</span>(i)) &#123;</span><br><span class="line">                frm.<span class="property">elements</span>[(<span class="variable language_">this</span>.#<span class="title function_">getBox</span>(unpickBoxes[i]))].<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                restrictions.<span class="title function_">change</span>(<span class="variable language_">this</span>.#<span class="title function_">getBox</span>(unpickBoxes[i]), <span class="string">&#x27;^.*$&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #getBox = <span class="function"><span class="params">v</span> =&gt;</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h3><p>循环数组，在对象中注意this的指向。<br>另外这货不能使用break终止，还有就是return只能终止本次循环。想终止只能使用throw。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Picker</span> &#123;</span><br><span class="line">    <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">        unpickBoxes.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">element</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;element&#x27;</span>, element);</span><br><span class="line">            <span class="keyword">let</span> box1 = <span class="variable language_">this</span>.#<span class="title function_">getBox</span>(element);</span><br><span class="line">            frm.<span class="property">elements</span>[<span class="variable language_">this</span>.#<span class="title function_">getBox</span>(element)].<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            restrictions.<span class="title function_">change</span>(<span class="variable language_">this</span>.#<span class="title function_">getBox</span>(element), <span class="string">&#x27;^.*$&#x27;</span>);</span><br><span class="line">        &#125;, <span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>大小比较</title>
    <url>/posts/44019.html</url>
    <content><![CDATA[<ol>
<li>总是转换为相同的原始类型再做判断</li>
<li>逻辑值总是转换为数值类型</li>
<li>数值类型和字符串类型比较,总是把字符串转为数值</li>
<li>对象(引用类型)总是转换为原始类型再比较（ obj.valueOf(), arr.toString() )</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2020-7-22 11:08:42&#x27;</span>)));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2020-7-22 11:08:42&#x27;</span>)).<span class="title function_">toString</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2020-7-22 11:08:42&#x27;</span>)).<span class="title function_">valueOf</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2020-7-22 11:08:42&#x27;</span>).<span class="title function_">getTime</span>());</span><br></pre></td></tr></table></figure>

<p>结果如下:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1595387322000</span><br><span class="line">Wed Jul 22 2020 11:08:42 GMT+0800 (中国标准时间)</span><br><span class="line">1595387322000</span><br><span class="line">1595387322000</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>常用js片段</title>
    <url>/posts/26889.html</url>
    <content><![CDATA[<h3 id="单选菜单之类的"><a href="#单选菜单之类的" class="headerlink" title="单选菜单之类的"></a>单选菜单之类的</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> selectCategory = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">addClass</span>(<span class="string">&#x27;selected&#x27;</span>).<span class="title function_">siblings</span>(<span class="string">&#x27;.selected&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;selected&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>小程序中多个倒计时</title>
    <url>/posts/42291.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/test/test.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">times</span>: [</span><br><span class="line">            <span class="string">&quot;2019-02-26 16:14:58&quot;</span>,</span><br><span class="line">            <span class="string">&quot;2019-03-24 16:34:58&quot;</span>,</span><br><span class="line">            <span class="string">&quot;2019-02-27 16:14:58&quot;</span>,</span><br><span class="line">            <span class="string">&quot;2019-02-24 12:14:58&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">count_downs</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">countDown</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> timepiece = &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 时间戳转化成时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">stamp</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">stamp2time</span>: <span class="keyword">function</span> (<span class="params">stamp</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(stamp * <span class="number">1000</span>);    <span class="comment">//根据时间戳生成的时间对象</span></span><br><span class="line">        <span class="keyword">var</span> date = (d.<span class="title function_">getFullYear</span>()) + <span class="string">&quot;-&quot;</span> +</span><br><span class="line">            (d.<span class="title function_">getMonth</span>() + <span class="number">1</span>) + <span class="string">&quot;-&quot;</span> +</span><br><span class="line">            (d.<span class="title function_">getDate</span>()) + <span class="string">&quot; &quot;</span> +</span><br><span class="line">            (d.<span class="title function_">getHours</span>()) + <span class="string">&quot;:&quot;</span> +</span><br><span class="line">            (d.<span class="title function_">getMinutes</span>()) + <span class="string">&quot;:&quot;</span> +</span><br><span class="line">            (d.<span class="title function_">getSeconds</span>());</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 时间转化成时间戳</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">stamp</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">time2stamp</span>: <span class="keyword">function</span> (<span class="params">time</span>) &#123;</span><br><span class="line">        time = time.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">19</span>);</span><br><span class="line">        time = time.<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(time).<span class="title function_">getTime</span>() / <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 秒转化成时分秒的形式</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">second</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">second2hour</span>: <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> secondTime = <span class="built_in">parseInt</span>(value);</span><br><span class="line">        <span class="keyword">var</span> minuteTime = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> hourTime = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (secondTime &gt; <span class="number">60</span>) &#123;</span><br><span class="line">            minuteTime = <span class="built_in">parseInt</span>(secondTime / <span class="number">60</span>);</span><br><span class="line">            secondTime = <span class="built_in">parseInt</span>(secondTime % <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">if</span> (minuteTime &gt; <span class="number">60</span>) &#123;</span><br><span class="line">                hourTime = <span class="built_in">parseInt</span>(minuteTime / <span class="number">60</span>);</span><br><span class="line">                minuteTime = <span class="built_in">parseInt</span>(minuteTime % <span class="number">60</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (hourTime &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            hourTime = <span class="string">`0<span class="subst">$&#123;hourTime&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (minuteTime &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            minuteTime = <span class="string">`0<span class="subst">$&#123;minuteTime&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (secondTime &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            secondTime = <span class="string">`0<span class="subst">$&#123;secondTime&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> result = <span class="string">`<span class="subst">$&#123;hourTime&#125;</span>:<span class="subst">$&#123;minuteTime&#125;</span>:<span class="subst">$&#123;secondTime&#125;</span>`</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 时间和当前时间的差值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">time</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">remain</span>: <span class="keyword">function</span> (<span class="params">time</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> now = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() / <span class="number">1000</span>);</span><br><span class="line">        time = <span class="variable language_">this</span>.<span class="title function_">time2stamp</span>(time);</span><br><span class="line">        time = time - now;</span><br><span class="line">        <span class="keyword">if</span> (time &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            time = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">second2hour</span>(time);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 倒计时</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">that</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">times</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> countDown = <span class="keyword">function</span> (<span class="params">that</span>) &#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> counts = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> that.<span class="property">data</span>.<span class="property">times</span>) &#123;</span><br><span class="line">            counts[i] = timepiece.<span class="title function_">remain</span>(that.<span class="property">data</span>.<span class="property">times</span>[i])</span><br><span class="line">        &#125;</span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">count_downs</span>: counts</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>样式选择器-正则</title>
    <url>/posts/9ce9bb84.html</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;frm_maintenanceentry[2302][planvsactualsetid]&quot;</span> <span class="attr">name</span>=<span class="string">&quot;frm_maintenanceentry[2302][planvsactualsetid]&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;65&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;input[id^=frm_maintenanceentry][id$=\\[planvsactualsetid\\]]&quot;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">index, element</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>($(element).<span class="title function_">val</span>());</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>值得注意的是，「[]」这种特殊符号，需要两个「\」。毕竟中括号在jQuery样式选择器中有特殊含义。</p>
<p>比如</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;frm_maintenanceentry[2302][plantasksetid]&quot;</span> <span class="attr">name</span>=<span class="string">&quot;frm_maintenanceentry[2302][plantasksetid]&quot;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">value</span>=<span class="string">&quot;139&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> &gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="string">&#x27;#frm_maintenanceentry\\[2302\\]\\[plantasksetid\\]&#x27;</span>).<span class="title function_">val</span>() </span></span><br><span class="line"><span class="language-javascript"><span class="comment">// or</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;frm_maintenanceentry[2302][plantasksetid]&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>注意箭头函数</title>
    <url>/posts/12787.html</url>
    <content><![CDATA[<p>箭头函数完全修复了this的指向，this总是指向词法作用域，也就是外层调用者obj：</p>
<p>查看下面一个例子</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.sort-area&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.sort-item&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;$(this).attr(&#x27;class&#x27;)&quot;</span>, $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;class&#x27;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>其中的this指向的是window</p>
<p>而匿名函数的写法里</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.sort-area&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;.sort-item&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;$(this).attr(&#x27;class&#x27;)&quot;</span>, $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;class&#x27;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>this指向的是事件的触发者</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>手机端返回上一页并刷新</title>
    <url>/posts/55820.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">history</span>.<span class="title function_">go</span>(-<span class="number">1</span>) <span class="comment">// 在手机端往往不行</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="variable language_">document</span>.<span class="property">referrer</span> <span class="comment">// 这个直接跳转到上一层的url，还可以</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取get中的参数</title>
    <url>/posts/59756.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">GetRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> url = location.<span class="property">search</span>; <span class="comment">//获取url中含&quot;?&quot;符后的字串</span></span><br><span class="line">    <span class="keyword">var</span> theRequest = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">if</span> (url.<span class="title function_">indexOf</span>(<span class="string">&quot;?&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> str = url.<span class="title function_">substr</span>(<span class="number">1</span>);</span><br><span class="line">        strs = str.<span class="title function_">split</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; strs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            theRequest[strs[i].<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>)[<span class="number">0</span>]] = <span class="built_in">decodeURIComponent</span>(strs[i].<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>)[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> theRequest;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> url = <span class="title class_">GetRequest</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;url:&quot;</span>, url);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL进阶</title>
    <url>/posts/37559.html</url>
    <content><![CDATA[<h1 id="第一章-神奇的SQL"><a href="#第一章-神奇的SQL" class="headerlink" title="第一章 神奇的SQL"></a>第一章 神奇的SQL</h1><h2 id="CASE表达式"><a href="#CASE表达式" class="headerlink" title="CASE表达式"></a>CASE表达式</h2><h3 id="CASE表达式概述"><a href="#CASE表达式概述" class="headerlink" title="CASE表达式概述"></a>CASE表达式概述</h3><p>写法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 简单CASE 表达式</span><br><span class="line">CASE sex</span><br><span class="line">WHEN &#x27;1&#x27; THEN &#x27;男&#x27;</span><br><span class="line">WHEN &#x27;2&#x27; THEN &#x27;女&#x27;</span><br><span class="line">ELSE &#x27;其他&#x27; END</span><br><span class="line"></span><br><span class="line">-- 搜索CASE 表达式</span><br><span class="line">CASE WHEN sex = &#x27;1&#x27; THEN &#x27;男&#x27;</span><br><span class="line">WHEN sex = &#x27;2&#x27; THEN &#x27;女&#x27;</span><br><span class="line">ELSE &#x27;其他&#x27; END</span><br></pre></td></tr></table></figure>

<p>注意事项：</p>
<ul>
<li>统一各分支返回的数据类型</li>
<li>不要忘记写END<ul>
<li>这是个语法结构，是必选项而非可选项。</li>
</ul>
</li>
<li>养成写ELSE子句的习惯<ul>
<li>不写的话，其不在WHEN条件中的项结果是NULL</li>
</ul>
</li>
</ul>
<h3 id="将已有编号方式转换为新的方式并统计"><a href="#将已有编号方式转换为新的方式并统计" class="headerlink" title="将已有编号方式转换为新的方式并统计"></a>将已有编号方式转换为新的方式并统计</h3><p>在进行非定制化统计时，我们经常会遇到将已有编号方式转换为另外一种便于分析的方式并进行统计的需求。</p>
<p>如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 把县编号转换成地区编号(1)</span><br><span class="line">SELECT CASE pref_name</span><br><span class="line">           WHEN &#x27;德岛&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;香川&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;爱媛&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;高知&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;福冈&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">           WHEN &#x27;佐贺&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">           WHEN &#x27;长崎&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">           ELSE &#x27;其他&#x27; END AS district,</span><br><span class="line">       SUM(population)</span><br><span class="line">FROM PopTbl</span><br><span class="line">GROUP BY CASE pref_name</span><br><span class="line">             WHEN &#x27;德岛&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">             WHEN &#x27;香川&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">             WHEN &#x27;爱媛&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">             WHEN &#x27;高知&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">             WHEN &#x27;福冈&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">             WHEN &#x27;佐贺&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">             WHEN &#x27;长崎&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">             ELSE &#x27;其他&#x27; END;</span><br></pre></td></tr></table></figure>
<p>在mysql等数据库中，可以简化成</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT CASE pref_name</span><br><span class="line">           WHEN &#x27;德岛&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;香川&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;爱媛&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;高知&#x27; THEN &#x27;四国&#x27;</span><br><span class="line">           WHEN &#x27;福冈&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">           WHEN &#x27;佐贺&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">           WHEN &#x27;长崎&#x27; THEN &#x27;九州&#x27;</span><br><span class="line">           ELSE &#x27;其他&#x27; END AS district,</span><br><span class="line">       SUM(population)</span><br><span class="line">FROM PopTbl</span><br><span class="line">GROUP BY district;</span><br></pre></td></tr></table></figure>

<p>补充：MySQL 中的 order by 子句可以识别 select 中定义的别称，如上列中的「district」</p>
<h3 id="用一条SQL语句进行不同条件的统计"><a href="#用一条SQL语句进行不同条件的统计" class="headerlink" title="用一条SQL语句进行不同条件的统计"></a>用一条SQL语句进行不同条件的统计</h3><p>进行不同条件的统计是 CASE 表达式的著名用法之一。</p>
<p>例如，我们需要往存储各县人口数量的表 PopTbl 里添加上「性别」列，然后求按性别、县名汇总的人数。具体来说，就是统计表 PopTbl2 中的数据，然后求出如表「统计结果」所示的结果。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT pref_name, sum(if(sex = 1, population, 0)) AS man, sum(if(sex = 2, population, 0)) as woman</span><br><span class="line">FROM PopTbl2</span><br><span class="line">GROUP BY pref_name;</span><br></pre></td></tr></table></figure>

<p><strong>打开思路，select 子句也可以进行条件分支</strong></p>
<h3 id="用-CHECK-约束定义多个列的条件关系"><a href="#用-CHECK-约束定义多个列的条件关系" class="headerlink" title="用 CHECK 约束定义多个列的条件关系"></a>用 CHECK 约束定义多个列的条件关系</h3><p>CASE 表达式和 CHECK 约束是很般配的一对组合，这里涉及到「蕴含式」这种和「逻辑与」不同的计算逻辑。「蕴含式」中的约束更为宽松。</p>
<p>但郁闷的是，在 MySQL 中，这个几乎是无效的。MySQL 在插入的时候不会处理蕴含关系。</p>
<p>逻辑与</p>
<table>
<thead>
<tr>
<th>P</th>
<th>Q</th>
<th>P∧Q</th>
</tr>
</thead>
<tbody><tr>
<td>T</td>
<td>T</td>
<td>T</td>
</tr>
<tr>
<td>T</td>
<td>U</td>
<td>U</td>
</tr>
<tr>
<td>T</td>
<td>F</td>
<td>F</td>
</tr>
<tr>
<td>U</td>
<td>T</td>
<td>U</td>
</tr>
<tr>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr>
<td>U</td>
<td>F</td>
<td>U</td>
</tr>
<tr>
<td>U</td>
<td>T</td>
<td>U</td>
</tr>
<tr>
<td>U</td>
<td>U</td>
<td>U</td>
</tr>
<tr>
<td>U</td>
<td>F</td>
<td>U</td>
</tr>
</tbody></table>
<p>蕴含式（只有当P为假Q为真时，则P-&gt;Q为假。 如果太阳从西边升起，则……）<br>逻辑与</p>
<table>
<thead>
<tr>
<th>P</th>
<th>Q</th>
<th>P-&gt;Q</th>
</tr>
</thead>
<tbody><tr>
<td>T</td>
<td>T</td>
<td>T</td>
</tr>
<tr>
<td>T</td>
<td>U</td>
<td>F</td>
</tr>
<tr>
<td>T</td>
<td>F</td>
<td>F</td>
</tr>
<tr>
<td>U</td>
<td>T</td>
<td>T</td>
</tr>
<tr>
<td>U</td>
<td>U</td>
<td>T</td>
</tr>
<tr>
<td>U</td>
<td>F</td>
<td>T</td>
</tr>
<tr>
<td>F</td>
<td>T</td>
<td>T</td>
</tr>
<tr>
<td>F</td>
<td>U</td>
<td>T</td>
</tr>
<tr>
<td>F</td>
<td>F</td>
<td>T</td>
</tr>
</tbody></table>
<p>蕴含式的结果没有 unknown 么？我所有可以想成 unknown 的结果都是 False。</p>
<h3 id="在-UPDATE-语句里进行条件分支"><a href="#在-UPDATE-语句里进行条件分支" class="headerlink" title="在 UPDATE 语句里进行条件分支"></a>在 UPDATE 语句里进行条件分支</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE Salaries</span><br><span class="line">SET salary = CASE</span><br><span class="line">                 WHEN salary &gt;= 300000 THEN salary * 0.9</span><br><span class="line">                 WHEN salary &gt;= 250000 AND salary &lt;= 280000 THEN salary * 1.2</span><br><span class="line">                 ELSE salary END;</span><br></pre></td></tr></table></figure>

<h3 id="表之间的数据匹配"><a href="#表之间的数据匹配" class="headerlink" title="表之间的数据匹配"></a>表之间的数据匹配</h3><p>在 CASE 表达式里，我们可以使用 BETWEEN 、LIKE和 &lt; 、&gt; 等便利的谓词组合，以及能嵌套子查询的 IN 和 EXISTS 谓词。因此，CASE 表达式具有非常强大的表达能力。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT course_name,</span><br><span class="line">       IF(course_id IN (SELECT course_id</span><br><span class="line">                        FROM OpenCourses</span><br><span class="line">                        WHERE month = 200706), &#x27;o&#x27;,</span><br><span class="line">          &#x27;x&#x27;) AS &#x27;June&#x27;,</span><br><span class="line">       IF(course_id IN (SELECT course_id</span><br><span class="line">                        FROM OpenCourses</span><br><span class="line">                        WHERE month = 200707), &#x27;o&#x27;,</span><br><span class="line">          &#x27;x&#x27;) AS &#x27;July&#x27;,</span><br><span class="line">       IF( EXISTS (SELECT course_id</span><br><span class="line">                        FROM OpenCourses</span><br><span class="line">                        WHERE month = 200708), &#x27;o&#x27;,</span><br><span class="line">          &#x27;x&#x27;) AS &#x27;August&#x27; -- 看到这里就是使用了exists</span><br><span class="line">FROM CourseMaster;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 换一种思路</span><br><span class="line">SELECT c.course_name,</span><br><span class="line">       if(sum(IF(month = 200706, 1, 0)) = 0, &#x27;x&#x27;, &#x27;o&#x27;) AS &#x27;六月&#x27;,</span><br><span class="line">       if(sum(IF(month = 200707, 1, 0)) = 0, &#x27;x&#x27;, &#x27;o&#x27;) AS &#x27;七月&#x27;,</span><br><span class="line">       if(sum(IF(month = 200708, 1, 0)) = 0, &#x27;x&#x27;, &#x27;o&#x27;) AS &#x27;八月&#x27;</span><br><span class="line">FROM opencourses o</span><br><span class="line">JOIN coursemaster c</span><br><span class="line">     ON o.course_id = c.course_id</span><br><span class="line">GROUP BY c.course_name</span><br><span class="line">ORDER BY c.course_name;</span><br></pre></td></tr></table></figure>
<p>这样的查询没有进行聚合，因此也不需要排序，月份增加的时候仅修改 SELECT 子句就可以了，扩展性比较好。<br>无论使用 IN 还是 EXISTS ，得到的结果是一样的，但从性能方面来说， EXISTS 更好。通过 EXISTS 进行的子查询能够用到“month,course_id ”这样的主键索引，因此尤其是当表 OpenCourses 里数据比较多的时候更有优势。</p>
<h3 id="在-CASE-表达式中使用聚合函数"><a href="#在-CASE-表达式中使用聚合函数" class="headerlink" title="在 CASE 表达式中使用聚合函数"></a>在 CASE 表达式中使用聚合函数</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT std_id,</span><br><span class="line">       CASE</span><br><span class="line">           WHEN count(club_id) = 1 THEN max(club_id)</span><br><span class="line">           ELSE max(CASE WHEN main_club_flg = &#x27;Y&#x27; THEN club_id ELSE NULL END)</span><br><span class="line">           END AS main_club_id</span><br><span class="line">FROM StudentClub</span><br><span class="line">GROUP BY std_id;</span><br></pre></td></tr></table></figure>
<p><em>注意其中的max的用法，这里仅仅是作为一个聚合函数使用的，实际上min、sum等在这里的效果是一样的。不用的话就犯了「SELECT list is not in GROUP BY clause and contains nonaggregated column」的错</em></p>
<p>至于为什么会有这种「SELECT list is not in GROUP BY clause and contains nonaggregated column」报错，是因为如果select中的项如果没有在group by 中出现，就有可能产生歧义。<br>就拿上面出现的表「PopTbl2」来说，如果写成这个样子，group by 会根据 pref_name 分组，真要如此， man 和 woman 是就可能是 0 或是真实的数字。这显然是「无效」的数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT pref_name,(if(sex = 1, population, 0)) AS man,(if(sex = 2, population, 0)) as woman</span><br><span class="line">FROM PopTbl2</span><br><span class="line">GROUP BY pref_name;</span><br></pre></td></tr></table></figure>
<p>关掉「ONLY_FULL_GROUP_BY」，很容易观察到错误的结果。</p>
<blockquote>
<p>为什么会有「SELECT list is not in GROUP BY clause and contains nonaggregated column」</p>
</blockquote>
<p>举一个简单的例子：班级的成绩表。一个学生可能有十几门课程，每门课程都会有成绩。</p>
<table>
<thead>
<tr>
<th>姓名</th>
<th>课程</th>
<th>分数</th>
</tr>
</thead>
<tbody><tr>
<td>张三</td>
<td>语文</td>
<td>98</td>
</tr>
<tr>
<td>张三</td>
<td>数学</td>
<td>78</td>
</tr>
<tr>
<td>李四</td>
<td>语文</td>
<td>88</td>
</tr>
<tr>
<td>李四</td>
<td>数据</td>
<td>68</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT `成绩` FROM `成绩表` GROUP BY `姓名`</span><br></pre></td></tr></table></figure>

<p>如上，这个成绩会是什么成绩呢？</p>
<p>实际上并不知道这个分数是属于哪个课程的。之前的版本有就有这种困惑（虽说现在关闭了开关之后也能实现）。为了避免这种「不知道自己的结果是什么」，就加了这种限制。当然，如果在 select 项中使用聚合函数就会避免这种歧义。像最高分之类的，哪里会有刚才的那般歧义呢？</p>
<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>order by 使用 case 排序</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT id,</span><br><span class="line">       if(x &gt; if(y &gt; z, y, z), x, if(y &gt; z, y, z))</span><br><span class="line">FROM greatests</span><br><span class="line">ORDER BY CASE</span><br><span class="line">             WHEN id = &#x27;A&#x27; THEN 2</span><br><span class="line">             WHEN id = &#x27;B&#x27; THEN 1</span><br><span class="line">             WHEN id = &#x27;D&#x27; THEN 3</span><br><span class="line">             WHEN id = &#x27;B&#x27; THEN 4</span><br><span class="line">             END;</span><br></pre></td></tr></table></figure>

<p>转换行列——在表头里加入汇总和再揭</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT IF(sex = 1, &#x27;男&#x27;, &#x27;女&#x27;)                                         AS sex,</span><br><span class="line">       sum(population)                                               AS &#x27;总人口&#x27;,</span><br><span class="line">       sum(if(pref_name = &#x27;东京&#x27;, population, 0))                      AS &#x27;东京&#x27;,</span><br><span class="line">       sum(if(pref_name IN (&#x27;德岛&#x27;, &#x27;香川&#x27;, &#x27;爱媛&#x27;, &#x27;高知&#x27;), population, 0)) AS &#x27;四国&#x27;</span><br><span class="line">FROM poptbl2</span><br><span class="line">GROUP BY sex;</span><br></pre></td></tr></table></figure>

<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>作为表达式，CASE表达式在执行时会被判定为一个固定值，因此它可以写在聚合函数内部；也正因为它是表达式，所以还可以写在SELECE子句、GROUPBY子句、WHERE子句、ORDERBY子句里。简单点说，在能写列名和常量的地方，通常都可以写CASE表达式。</p>
<p>本节要点：</p>
<ol>
<li>在 GROUP BY 子句里使用 CASE 表达式，可以灵活地选择作为聚合的单位的编号或等级。这一点在进行非定制化统计时能发挥巨大的威力。</li>
<li>在聚合函数中使用 CASE 表达式，可以轻松地将行结构的数据转换成列结构的数据。</li>
<li>相反，聚合函数也可以嵌套进 CASE 表达式里使用。</li>
<li>相比依赖于具体数据库的函数，CASE 表达式有更强大的表达能力和更好的可移植性。</li>
<li>正因为 CASE 表达式是一种表达式而不是语句，才有了这诸多优点。</li>
</ol>
<h2 id="自连接的用法"><a href="#自连接的用法" class="headerlink" title="自连接的用法"></a>自连接的用法</h2><h3 id="可重排列、排列、组合"><a href="#可重排列、排列、组合" class="headerlink" title="可重排列、排列、组合"></a>可重排列、排列、组合</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 用于获取可重排列的SQL 语句（笛卡尔积）</span><br><span class="line">SELECT P1.name AS name_1, P2.name AS name_2</span><br><span class="line">FROM Products P1, Products P2;</span><br><span class="line"></span><br><span class="line">-- 用于获取排列的SQL 语句</span><br><span class="line">SELECT P1.name AS name_1, P2.name AS name_2</span><br><span class="line">FROM Products P1, Products P2</span><br><span class="line">WHERE P1.name &lt;&gt; P2.name;</span><br><span class="line"></span><br><span class="line">-- 用于获取组合的SQL 语句</span><br><span class="line">SELECT P1.name AS name_1, P2.name AS name_2</span><br><span class="line">FROM Products P1, Products P2</span><br><span class="line">WHERE P1.name &gt; P2.name;</span><br></pre></td></tr></table></figure>

<h2 id="删除重复行"><a href="#删除重复行" class="headerlink" title="删除重复行"></a>删除重复行</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE</span><br><span class="line">FROM Products</span><br><span class="line">WHERE id IN (SELECT id</span><br><span class="line">             FROM ((SELECT p2.id</span><br><span class="line">                    FROM Products p1,</span><br><span class="line">                         Products p2</span><br><span class="line">                    WHERE p1.name = p2.name</span><br><span class="line">                      AND p1.price = p2.price</span><br><span class="line">                      AND p1.id &gt; p2.id)) tmp);</span><br><span class="line"></span><br><span class="line"># exists 版</span><br><span class="line">DELETE p1</span><br><span class="line">FROM products p1</span><br><span class="line">WHERE EXISTS(SELECT id</span><br><span class="line">             FROM (SELECT p2.id</span><br><span class="line">                   FROM products p2</span><br><span class="line">                   LEFT JOIN products p3 ON p2.name = p3.name</span><br><span class="line">                   WHERE p3.id &lt; p2.id) tmp</span><br><span class="line">             WHERE p1.id = tmp.id);</span><br></pre></td></tr></table></figure>

<h2 id="查询局部不一致的数据"><a href="#查询局部不一致的数据" class="headerlink" title="查询局部不一致的数据"></a>查询局部不一致的数据</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DISTINCT p1.name, p1.price</span><br><span class="line">FROM Products p1,</span><br><span class="line">     Products p2</span><br><span class="line">WHERE p1.name != p2.name</span><br><span class="line">  AND p1.price = p2.price;</span><br></pre></td></tr></table></figure>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT p1.*, (SELECT count(DISTINCT p2.price) FROM Products p2 WHERE p2.price &gt; p1.price) + 1 AS rank_1</span><br><span class="line">FROM Products p1</span><br><span class="line">ORDER BY rank_1;</span><br><span class="line"></span><br><span class="line"># JOIN</span><br><span class="line">SELECT p1.name, p1.price, COUNT(DISTINCT p2.price) + 1 AS rank_1</span><br><span class="line">FROM products p1</span><br><span class="line">LEFT JOIN products p2 ON p1.price &lt; p2.price</span><br><span class="line">GROUP BY p1.name, p1.price</span><br><span class="line">ORDER BY rank_1;</span><br></pre></td></tr></table></figure>
<p>这段代码的排序方法看起来很普通，但很容易扩展。例如去掉标量子查询后边的 +1 ，就可以从 0 开始给商品排 序，而且如果修改成COUNT(DISTINCT P2.price) ，那么存在相同位次的记录时，就可以不跳过之后的位次，而是连续输出（相当于 DENSE_RANK 函数）。由此可知，这条 SQL 语句可以根据不同的需求灵活地进行扩展，实现不同的排序方式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT p1.name, max(p1.price), count(p2.name) + 1 AS rank_1</span><br><span class="line">FROM Products p1</span><br><span class="line">     LEFT JOIN Products p2 ON p1.price &lt; p2.price</span><br><span class="line">GROUP BY p1.name</span><br><span class="line">ORDER BY rank_1;</span><br></pre></td></tr></table></figure>
<p>注意这里使用的外连接，如果使用内连接的话会漏掉排在第一位的数据</p>
<h3 id="本章小结"><a href="#本章小结" class="headerlink" title="本章小结"></a>本章小结</h3><p>要点</p>
<ol>
<li>自连接经常和非等值连接结合起来使用。</li>
<li>自连接和 GROUP BY 结合使用可以生成递归集合。</li>
<li>将自连接看作不同表之间的连接更容易理解。</li>
<li>应把表看作行的集合，用面向集合的方法来思考。</li>
<li>自连接的性能开销更大，应尽量给用于连接的列建立索引。</li>
</ol>
<h2 id="三值逻辑和NULL"><a href="#三值逻辑和NULL" class="headerlink" title="三值逻辑和NULL"></a>三值逻辑和NULL</h2><p>一时间难以理解。不过也基本上接触不到，工作的时候基本上都加了not null约束</p>
<p>三值逻辑真值表（NOT)</p>
<table>
<thead>
<tr>
<th>x</th>
<th>NOT x</th>
</tr>
</thead>
<tbody><tr>
<td>t</td>
<td>f</td>
</tr>
<tr>
<td>u</td>
<td>u</td>
</tr>
<tr>
<td>f</td>
<td>t</td>
</tr>
</tbody></table>
<p>三值逻辑真值表（AND）</p>
<table>
<thead>
<tr>
<th>AND</th>
<th>t</th>
<th>u</th>
<th>f</th>
</tr>
</thead>
<tbody><tr>
<td>t</td>
<td>t</td>
<td>u</td>
<td>f</td>
</tr>
<tr>
<td>u</td>
<td>u</td>
<td>u</td>
<td>f</td>
</tr>
<tr>
<td>f</td>
<td>f</td>
<td>f</td>
<td>f</td>
</tr>
</tbody></table>
<p>三值逻辑真值表（OR）</p>
<table>
<thead>
<tr>
<th>OR</th>
<th>t</th>
<th>u</th>
<th>f</th>
</tr>
</thead>
<tbody><tr>
<td>t</td>
<td>t</td>
<td>t</td>
<td>t</td>
</tr>
<tr>
<td>u</td>
<td>t</td>
<td>u</td>
<td>u</td>
</tr>
<tr>
<td>f</td>
<td>t</td>
<td>u</td>
<td>f</td>
</tr>
</tbody></table>
<p>比较简单的记法：<br>AND的情况： false &gt; unknown &gt; true<br>OR的情况：true &gt; unknown &gt; false</p>
<p>null是不能应用于比较运算符的。强行使用的话运算结果是「unknown」（未知）。而 where 会在结果为 true 时才会「命中」，所以 not in (..null..) 是没有结果的。</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line"></span><br><span class="line">FROM SeqTbl</span><br><span class="line">WHERE seq NOT IN (1, 2, null);</span><br></pre></td></tr></table></figure>
<p>是查不到结果的。<br>解释如下，上个sql可以转化成</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM SeqTbl WHERE seq &lt;&gt; 1 AND seq &lt;&gt; 2 AND seq &lt;&gt; NULL;</span><br></pre></td></tr></table></figure>
<p>而「seq &lt;&gt; null」的结果是unknown。<br>where只有条件为true的情况才会返回值。而「seq &lt;&gt; 1 AND seq &lt;&gt; 2 AND seq &lt;&gt; NULL」的结果是unknown，所以就没有返回值。</p>
<h3 id="本届小结"><a href="#本届小结" class="headerlink" title="本届小结"></a>本届小结</h3><p>NULL 不是值，和谓词（&gt;、&lt;、&#x3D;、in、between等。除了exists，这货自动把结果转化成true&#x2F;false）的运算结果是unknown。而where只会判定是不是 true 。所以在 not in (…null..)中注定是没有结果的    </p>
<p>最后说明一下，要想解决 NULL 带来的各种问题，最佳方法应该是往表里添加 NOT NULL 约束来尽力排除 NULL 。这样就可以回到美妙的二值逻辑世界（虽然并不能完全回到）。</p>
<h2 id="HAVING子句的力量"><a href="#HAVING子句的力量" class="headerlink" title="HAVING子句的力量"></a>HAVING子句的力量</h2><h3 id="寻找缺失的编号"><a href="#寻找缺失的编号" class="headerlink" title="寻找缺失的编号"></a>寻找缺失的编号</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 这个是有缺陷的，缺1查不到，还会多查一个</span><br><span class="line">SELECT (s1.seq + 1)</span><br><span class="line">FROM SeqTbl s1</span><br><span class="line">WHERE (s1.seq + 1) NOT IN (SELECT s2.seq FROM SeqTbl s2);</span><br></pre></td></tr></table></figure>

<h3 id="求众数"><a href="#求众数" class="headerlink" title="求众数"></a>求众数</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT income, COUNT(*) AS cnt</span><br><span class="line">FROM Graduates</span><br><span class="line">GROUP BY income</span><br><span class="line">HAVING COUNT(*) &gt;= ALL (SELECT COUNT(*)</span><br><span class="line">                        FROM Graduates</span><br><span class="line">                        GROUP BY income);</span><br></pre></td></tr></table></figure>
<p>另外，all&#x2F;any谓词用在null或空集时会出现问题，可以使用极值函数替代，如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT count(*) AS num, income</span><br><span class="line">FROM Graduates</span><br><span class="line">GROUP BY income</span><br><span class="line">HAVING num &gt;= (SELECT max(num) FROM (SELECT count(*) AS num, income FROM Graduates GROUP BY income) tmp);</span><br></pre></td></tr></table></figure>

<h3 id="求中位数"><a href="#求中位数" class="headerlink" title="求中位数"></a>求中位数</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT t1.value</span><br><span class="line">FROM test t1</span><br><span class="line">JOIN test t2</span><br><span class="line">GROUP BY t1.value</span><br><span class="line">HAVING sum(IF(t1.value &gt;= t2.value, 1, 0)) &gt; COUNT(*) / 2</span><br><span class="line">   AND sum(IF(t1.value &lt;= t2.value, 1, 0)) &gt; COUNT(*) / 2;</span><br></pre></td></tr></table></figure>

<p>主要是 「group by」和 「having」的联合使用。这是一种「集合」的求法。使用「排序」的方式会更直观些。</p>
<h3 id="查询不包含NULL的集合"><a href="#查询不包含NULL的集合" class="headerlink" title="查询不包含NULL的集合"></a>查询不包含NULL的集合</h3><p>COUNT 函数的使用方法有 COUNT(<em>) 和 COUNT( 列名 ) 两种，它们的区别有两个：第一个是性能上的区别；第二个是 COUNT(</em>) 可以用于 NULL ，而 COUNT( 列名 ) 与其他聚合函数一样，要先排除掉NULL 的行再进行统计。第二个区别也可以这么理解：COUNT(*) 查询的是所有行的数目，而 COUNT( 列名 ) 查询的则不一定是。</p>
<h3 id="用关系除法运算进行购物篮分析"><a href="#用关系除法运算进行购物篮分析" class="headerlink" title="用关系除法运算进行购物篮分析"></a>用关系除法运算进行购物篮分析</h3><p>带余除法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT SI.shop</span><br><span class="line">FROM ShopItems SI,</span><br><span class="line">     Items I</span><br><span class="line">WHERE SI.item = I.item</span><br><span class="line">GROUP BY SI.shop</span><br><span class="line">HAVING COUNT(SI.item) = (SELECT COUNT(item) FROM Items);</span><br></pre></td></tr></table></figure>

<p>精确关系除法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT si.shop, count(si.item), count(i.item)</span><br><span class="line">FROM ShopItems si</span><br><span class="line">LEFT JOIN Items i ON si.item = i.item</span><br><span class="line">GROUP BY si.shop</span><br><span class="line">HAVING count(si.item) = 3 and count(i.item) = 3;</span><br></pre></td></tr></table></figure>

<p>从SQL中看，区别就在于「join」和「left join」及「count（si.item」和「count（si.item) and count(count(i.item))」。</p>
<p>在去除group by和having条件之后，就可以看出两者为什么会有这种差别。</p>
<p>left join和join的区别就是前者会把主表所有的结果都取出来，哪怕对应副表没有相应的数据（这个时候对应附表展示为null）；而后者只取同时满足条件的结果。</p>
<p>having条件筛选出来的，其实是满足on条件的两个表各自的个数。<br>「join」对应的那条因为「join」的关系，在筛选结果中count(si.item)和count(i.item)的值是一样的。<br>同理，「left join」筛选结果中，count(si.item)是对应group中<strong>表shopItem的所有条目数（不受on约束）</strong>，而count(i.item)会排除结果中相应的null，即<strong>item表所有<em>满足on条件</em>的条目数</strong>。<br>而这两者，是不等价的。</p>
<h3 id="本章总结"><a href="#本章总结" class="headerlink" title="本章总结"></a>本章总结</h3><ol>
<li>表不是文件，记录也没有顺序，所以 SQL 不进行排序。（这一点也没有什么用，可通过group by轻松排序。使用此法，中位数可以更容易理解地取出来）。</li>
<li>SQL 不是面向过程语言，没有循环、条件分支、赋值操作。</li>
<li>SQL 通过不断生成子集来求得目标集合。SQL 不像面向过程语言那样通过画流程图来思考问题，而是通过画集合的关系图来思考。</li>
<li>GROUP BY 子句可以用来生成子集。</li>
<li>WHERE 子句用来调查集合元素的性质，而 HAVING 子句用来调查集合本身的性质。</li>
</ol>
<h2 id="外连接的用法"><a href="#外连接的用法" class="headerlink" title="外连接的用法"></a>外连接的用法</h2><h3 id="用外连接进行行列转换-1-（行→列）：制作交叉表"><a href="#用外连接进行行列转换-1-（行→列）：制作交叉表" class="headerlink" title="用外连接进行行列转换 (1)（行→列）：制作交叉表"></a>用外连接进行行列转换 (1)（行→列）：制作交叉表</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 外连接</span><br><span class="line">SELECT C0.name, C1.name, C2.name, C3.name</span><br><span class="line">FROM (SELECT DISTINCT name FROM Courses) C0</span><br><span class="line">LEFT JOIN (SELECT name FROM Courses WHERE course = &#x27;SQL入门&#x27;) C1 ON C0.name = C1.name</span><br><span class="line">LEFT JOIN (SELECT name FROM Courses WHERE course = &#x27;UNIX基础&#x27;) C2 ON C0.name = C2.name</span><br><span class="line">LEFT JOIN (SELECT name FROM Courses WHERE course = &#x27;Java中级&#x27;) C3 ON C0.name = C3.name;</span><br><span class="line"></span><br><span class="line">-- 标量子查询</span><br><span class="line">SELECT name,</span><br><span class="line">       if((SELECT count(*) FROM Courses C1 WHERE C0.name = C1.name AND C1.course = &#x27;SQL入门&#x27;), &#x27;o&#x27;, &#x27;x&#x27;),</span><br><span class="line">       if((SELECT count(*) FROM Courses C1 WHERE C0.name = C1.name AND C1.course = &#x27;UNIX基础&#x27;), &#x27;o&#x27;, &#x27;x&#x27;),</span><br><span class="line">       if((SELECT count(*) FROM Courses C1 WHERE C0.name = C1.name AND C1.course = &#x27;Java中级&#x27;), &#x27;o&#x27;, &#x27;x&#x27;)</span><br><span class="line">FROM (SELECT DISTINCT name FROM Courses) C0;</span><br><span class="line"></span><br><span class="line">-- CASE表达式</span><br><span class="line">SELECT name,</span><br><span class="line">       IF(SUM(IF(course = &#x27;SQL入门&#x27;, 1, 0)) = 1, &#x27;o&#x27;, &#x27;x&#x27;)  AS &#x27;SQL&#x27;,</span><br><span class="line">       IF(SUM(If(course = &#x27;UNIX基础&#x27;, 1, 0)) = 1, &#x27;o&#x27;, &#x27;x&#x27;) AS &#x27;UNIX&#x27;,</span><br><span class="line">       IF(SUM(IF(course = &#x27;java中级&#x27;, 1, 0)) = 1, &#x27;o&#x27;, &#x27;x&#x27;) AS &#x27;JAVA&#x27;</span><br><span class="line">FROM Courses</span><br><span class="line">GROUP BY name;</span><br></pre></td></tr></table></figure>

<p>题外话：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT count(1&lt;&gt;1), sum(1&lt;&gt;1);</span><br><span class="line">-- 1, 0</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>图书</category>
      </categories>
  </entry>
  <entry>
    <title>Yii代码解读</title>
    <url>/posts/58963.html</url>
    <content><![CDATA[<h1 id="yii-base-BaseObject"><a href="#yii-base-BaseObject" class="headerlink" title="\yii\base\BaseObject"></a>\yii\base\BaseObject</h1><p>yii2里的面向对象基础，几乎所有类的最顶层父类都是它，配置各种类时都会遵循这个概念。</p>
<p>其中封装了些常用的方法，比如</p>
<ul>
<li>「set&#x2F;get」 （tp 称之为修改器与获取器）</li>
<li>「init()」（不推荐使用__construct()，因为会覆盖 \yii\base\BaseObject。可以使用这个来初始化类）</li>
</ul>
<h1 id="依赖注入容器"><a href="#依赖注入容器" class="headerlink" title="依赖注入容器"></a>依赖注入容器</h1><h1 id="php之依赖注入、控制反转和依赖倒置原则"><a href="#php之依赖注入、控制反转和依赖倒置原则" class="headerlink" title="php之依赖注入、控制反转和依赖倒置原则"></a>php之依赖注入、控制反转和依赖倒置原则</h1><p>高内聚、低耦合，可作为软件好坏的评判标准。话句话说，就是尽量写出易于维护，低复杂度和低耦合度的代码。</p>
<p>所谓控制反转，英文 Inversion of Control，简称 IOC，字面上可以理解为对xx的控制进行了一个反转，换句话说就是对xx的控制的另一种实现，是一种思路，一种逻辑思想。其具体实现之一就是依赖注入。  </p>
<p>依赖注入：把对象A所依赖的其他对象，以属性或者构造函数的方式传递到对象A的内部，而不是直接在对象A内实例化。其目的就是为了让对象A和其依赖的其他对象解耦，减少二者的依赖。即通过“注入”的方式去解决依赖问题。</p>
]]></content>
      <categories>
        <category>图书</category>
      </categories>
  </entry>
  <entry>
    <title>计算机基础知识之《程序是怎样跑起来的》</title>
    <url>/posts/27797.html</url>
    <content><![CDATA[<h1 id="第一章-对程序员来说CPU是什么"><a href="#第一章-对程序员来说CPU是什么" class="headerlink" title="第一章 对程序员来说CPU是什么"></a>第一章 对程序员来说CPU是什么</h1><blockquote>
<p>热身问题</p>
</blockquote>
<ol>
<li>程序是什么</li>
<li>程序是有什么组成的</li>
<li>什么是机器语言</li>
<li>正在运行的程序存储再什么位置</li>
<li>什么是内存地址</li>
<li>计算机的构成元件中,负责程序的解释和运行的是哪个</li>
</ol>
<blockquote>
<p>答案</p>
</blockquote>
<ol>
<li>指示计算机每一步动作的一组指令</li>
<li>程序是指令和数据的组合体.如echo ‘hello’.echo是指令,hello是数据</li>
<li>机器语言是CPU可以直接识别并使用的语言.实际上,cpu能够直接识别和执行的只有机器语言.c等编写的程序都实在转化成机器语言后才运行的.</li>
<li>内存</li>
<li>内存是保存指令和数据的场所,通过地址来标记和指定.地址用整数值来表示</li>
<li>CPU.</li>
</ol>
<h2 id="CPU的内部解析"><a href="#CPU的内部解析" class="headerlink" title="CPU的内部解析"></a>CPU的内部解析</h2><p>cpu(central processing unit)的组成部分</p>
<ul>
<li>寄存器 可以用来暂存指令,数据等处理对象,可将其看成内存的一部分</li>
<li>控制器 负责把内存上的指令,数据等读入寄存器,并根据指令的执行结果来控制整个计算器</li>
<li>运算器 负责运算从内存读入寄存器的数据</li>
<li>时钟 负责发出cpu开始计时的时钟信号.时钟信号的频率愈高,cpu的运行速度俞快</li>
</ul>
<p>程序运行流程</p>
<ol>
<li>使用c等高级语言编写程序</li>
<li>将程序编译后转化成机器语言的EXE文件</li>
<li>程序运行时,在内存中生成EXE文件的副本</li>
<li>CPU解释并执行程序内容</li>
</ol>
<p>内存,通常指的时主存储器(main memory).主存通过控制芯片等于cpu相连,主要负责存储指令和数据.主存由可读写的元素组成,每个字节(1字节&#x3D;8位)都带有一个地址编号.cpu课程通过该地址读写主存中的指令和数据.</p>
<p>控制指的是除了数据运算以外的处理,如键鼠输入,显示器输出</p>
<h2 id="cpu是寄存器的集合体"><a href="#cpu是寄存器的集合体" class="headerlink" title="cpu是寄存器的集合体"></a>cpu是寄存器的集合体</h2><p>程序是把寄存器作为对象来来描述的</p>
<p>汇编语言采用助记符来编写程序.每一个原本是电气信号的机器语言指令都对应一个助记符.</p>
<p>不同种类的cpu,内部寄存器的数量种类及其数据存储范围都是不一致的.大致可分为八类</p>
<table>
<thead>
<tr>
<th>种类</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>累加寄存器</td>
<td></td>
</tr>
</tbody></table>
<p>&#x2F;&#x2F; 这个我之前写完了，后来莫名其妙丢失了。</p>
<p>C语言关键字（字母排序）</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>auto</td>
<td>声明自动变量</td>
</tr>
<tr>
<td>break</td>
<td>跳出当前循环</td>
</tr>
<tr>
<td>case</td>
<td>开关语句分支</td>
</tr>
<tr>
<td>char</td>
<td>声明字符型变量或函数</td>
</tr>
<tr>
<td>const</td>
<td>声明只读变量</td>
</tr>
<tr>
<td>continue</td>
<td>结束当前循环并开始下一轮循环</td>
</tr>
<tr>
<td>default</td>
<td>开关语句的「其他」分支</td>
</tr>
<tr>
<td>do</td>
<td>循环语句的循环体</td>
</tr>
<tr>
<td>double</td>
<td>声明双精度变量或函数</td>
</tr>
<tr>
<td>else</td>
<td>条件语句否定分支（if）</td>
</tr>
<tr>
<td>enum</td>
<td>声明枚举类</td>
</tr>
<tr>
<td>extern</td>
<td>声明变量是在其它文件中声明</td>
</tr>
<tr>
<td>float</td>
<td>声明浮点型变量或函数</td>
</tr>
<tr>
<td>for</td>
<td>一种循环语句</td>
</tr>
<tr>
<td>goto</td>
<td>无条件跳转语句</td>
</tr>
<tr>
<td>if</td>
<td>条件语句</td>
</tr>
<tr>
<td>int</td>
<td>声明整型变量或函数</td>
</tr>
<tr>
<td>long</td>
<td>声明长整型变量或函数</td>
</tr>
<tr>
<td>register</td>
<td>声明寄存器变量</td>
</tr>
<tr>
<td>return</td>
<td>子程序返回语句</td>
</tr>
<tr>
<td>short</td>
<td>声明短整形变量或函数</td>
</tr>
<tr>
<td>signed</td>
<td>声明有符号类型变量或函数</td>
</tr>
<tr>
<td>sizeof</td>
<td>计算数据类型长度</td>
</tr>
<tr>
<td>static</td>
<td>声明静态变量</td>
</tr>
<tr>
<td>struct</td>
<td>声明静态变量</td>
</tr>
<tr>
<td>switch</td>
<td>用于开关语句</td>
</tr>
<tr>
<td>typedef</td>
<td>用于给数据类型起别名</td>
</tr>
<tr>
<td>union</td>
<td>声明共用数据类型</td>
</tr>
<tr>
<td>unsigned</td>
<td>声明无符号类型变量或函数</td>
</tr>
<tr>
<td>void</td>
<td>声明函数无返回值或无参数，声明无类型指针</td>
</tr>
<tr>
<td>volatile</td>
<td>说明变量在程序执行中可被隐含地改变</td>
</tr>
<tr>
<td>while</td>
<td>循环语句的循环条件</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>图书</category>
        <category>计算机基础</category>
      </categories>
      <tags>
        <tag>计算机基础</tag>
      </tags>
  </entry>
  <entry>
    <title>从根理解MySQL</title>
    <url>/posts/18487.html</url>
    <content><![CDATA[<h1 id="字符集和比较规则"><a href="#字符集和比较规则" class="headerlink" title="字符集和比较规则"></a>字符集和比较规则</h1><p>总结：</p>
<ul>
<li><strong>字符集</strong>指字符的编码规则（uft8），<strong>比较规则</strong>是某个字符集比较大小的规则。MySQL中字符集和比较规则是一对多的关系。比较规则的作用通常体现比较字符串大小的表达式以及对某个字符串列进行排序中。</li>
<li>MySQL的字符集和比较规则有四个级别(服务器级别,数据库级别,表级别,列级别)</li>
<li>从发送请求到接收结果发生字符集转化（character_set_client、character_set_connection、character_set_results）分别对应客户端传送字符集，服务端处理字符集、服务端转化字符集，保持一致时会减少不必要的转化步骤。</li>
</ul>
<h1 id="innodb记录结构"><a href="#innodb记录结构" class="headerlink" title="innodb记录结构"></a>innodb记录结构</h1><h2 id="innodb页简介"><a href="#innodb页简介" class="headerlink" title="innodb页简介"></a>innodb页简介</h2><p>innodb保存数据并不是以条为单位保存在磁盘中，而是以页为单位。一般一页有16K。</p>
<h2 id="innodb行格式"><a href="#innodb行格式" class="headerlink" title="innodb行格式"></a>innodb行格式</h2><p>数据行保存在磁盘的方式即为行格式。下图为其中一种</p>
<p><img src="/../../src/row_format.png" alt="行格式"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 例1</span><br><span class="line">CREATE TABLE test1</span><br><span class="line">(</span><br><span class="line">    c1 VARCHAR(10),</span><br><span class="line">    c2 VARCHAR(10) NOT NULL,</span><br><span class="line">    c3 CHAR(10),</span><br><span class="line">    c4 VARCHAR(10)</span><br><span class="line">) CHARSET = ascii</span><br><span class="line">  ROW_FORMAT = COMPACT;</span><br><span class="line"></span><br><span class="line">INSERT INTO test1(c1, c2, c3, c4)</span><br><span class="line">VALUES (&#x27;aaaa&#x27;, &#x27;bbb&#x27;, &#x27;cc&#x27;, &#x27;d&#x27;),</span><br><span class="line">       (&#x27;eeee&#x27;, &#x27;fff&#x27;, NULL, NULL);</span><br></pre></td></tr></table></figure>

<h3 id="变长字段长度列表"><a href="#变长字段长度列表" class="headerlink" title="变长字段长度列表"></a>变长字段长度列表</h3><p>保存的是保存变长字节的实际占据字节数。也就是说变长数据类型占据的空间有两部分<strong>真正的数据内容</strong>和<strong>占用的字节数</strong>。</p>
<p>在compact行格式中，把所有变长字段的真实数据占用的字节长度都存放在记录的开头部位，从而形成一个变长字段长度列表。</p>
<ul>
<li>各变长字段数据占用的字节数按照列的<strong>逆序</strong>存放。</li>
<li>只保存非null的列</li>
<li>并不是所有记录都有这个 变长字段长度列表 部分，比方说表中所有的列都不是变长的数据类型的话，这一部分就不需要有。</li>
</ul>
<p>另外 varchar(10) 指的是10个字符而非10个字节长，而变长字段长度列表存的是字节</p>
<p>以 test1 为例，C3为等长字段且字符集为Ascii，所以将按C4C2C1的顺序排。如果字符集为utf8，即便是char也是会记录的。</p>
<table>
<thead>
<tr>
<th>行</th>
<th>变长字段长度列表存值</th>
</tr>
</thead>
<tbody><tr>
<td>第一行</td>
<td>1 3 4</td>
</tr>
<tr>
<td>第二行</td>
<td>3 4</td>
</tr>
</tbody></table>
<h3 id="NULL值列表"><a href="#NULL值列表" class="headerlink" title="NULL值列表"></a>NULL值列表</h3><p>compact行格式把Null值的列统一管理起来，保存到Null值列表中。其用整数位字节表示，以not null的字段逆序占位。不足一个字节补零，超过一个字节将加一。</p>
<p>以 test1 为例，因为 c2 是 not null ，所以 null值列表 会按C4C3C1的方式占位。第一行数据为 00000000 ， 第二行则为00000110</p>
<h3 id="记录头信息"><a href="#记录头信息" class="headerlink" title="记录头信息"></a>记录头信息</h3><p>固定5个字节共40个二进制位，不同的位有不同的含义</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>大小（bit）</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>预留位1</td>
<td>1</td>
<td>没有使用</td>
</tr>
<tr>
<td>预留位2</td>
<td>1</td>
<td>没有使用</td>
</tr>
<tr>
<td>delete_mask</td>
<td>1</td>
<td>标记该记录是否被删除</td>
</tr>
<tr>
<td>min_rec_mask</td>
<td>1</td>
<td>B+树的每层非叶子节点中的最小记录都会添加该标记</td>
</tr>
<tr>
<td>n_owned</td>
<td>4</td>
<td>表示当前记录拥有的记录数</td>
</tr>
<tr>
<td>heap_no</td>
<td>13</td>
<td>表示当前记录在记录堆的位置信息</td>
</tr>
<tr>
<td>record_type</td>
<td>3</td>
<td>表示当前记录的类型，0表示普通记录，1表示B+树非叶子节点记录，2表示最小记录，3表示最大记录</td>
</tr>
<tr>
<td>next_record</td>
<td>16</td>
<td>表示下一条记录的相对位置</td>
</tr>
</tbody></table>
<h3 id="记录的真实数据"><a href="#记录的真实数据" class="headerlink" title="记录的真实数据"></a>记录的真实数据</h3><p>对于test1，除了真实数据，还有几个隐藏列</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>是否必须</th>
<th>占用空间</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>row_id</td>
<td>否</td>
<td>6字节</td>
<td>行ID，唯一标识一条记录</td>
</tr>
<tr>
<td>transaction_id</td>
<td>是</td>
<td>6字节</td>
<td>事务ID</td>
</tr>
<tr>
<td>roll_pointer</td>
<td>是</td>
<td>7字节</td>
<td>回滚指针</td>
</tr>
</tbody></table>
<p>innodb主键的生成策略：优先使用用户自定义主键作为主键，如果用户没有定义主键，则选取一个Unique键作为主键，如果表中连Unique键都没有定义的话，则InnoDB会为表默认添加一个名为row_id的隐藏列作为主键</p>
<p>如果一个字段内容长度过长，则在compact行格式中只会存一部分数据，剩下的部分会用链表的形式存到其他页中。在5.7默认的行格式Dynamic中，和compact不一样的地方就是这个溢出处理方式，Dynamic会仅仅在真实数据处保存溢出页地址</p>
<h1 id="innodb数据页结构"><a href="#innodb数据页结构" class="headerlink" title="innodb数据页结构"></a>innodb数据页结构</h1><table>
<thead>
<tr>
<th>名称</th>
<th>中文名</th>
<th>占用空间大小</th>
<th>简单描述</th>
</tr>
</thead>
<tbody><tr>
<td>File Header</td>
<td>文件头部</td>
<td>38字节</td>
<td>页的一些通用信息</td>
</tr>
<tr>
<td>Page Header</td>
<td>页面头部</td>
<td>56字节</td>
<td>数据页专有的一些信息</td>
</tr>
<tr>
<td>Infin_ownedmum + Supremum</td>
<td>最小记录和最大记录</td>
<td>26字节</td>
<td>两个虚拟的行记录</td>
</tr>
<tr>
<td>User Records</td>
<td>用户记录</td>
<td>不确定</td>
<td>实际存储的行记录内容</td>
</tr>
<tr>
<td>Free Space</td>
<td>空闲空间</td>
<td>不确定</td>
<td>页中尚未使用的空间</td>
</tr>
<tr>
<td>Page Directory</td>
<td>页面目录</td>
<td>不确定</td>
<td>页中的某些记录的相对位置</td>
</tr>
<tr>
<td>File Trailer</td>
<td>文件尾部</td>
<td>8字节</td>
<td>校验页是否完整</td>
</tr>
</tbody></table>
<p>总结：</p>
<ul>
<li>每个记录的头信息中都有一个next_record属性，从而使页中的所有记录串联成一个单链表</li>
<li>Innodb会把页中的记录分成多个组，每个组的最后一个记录的地址偏移量作为一个槽，存在page directory中。查找分成两步<ul>
<li>通过二分法确定该记录所在的槽</li>
<li>通过记录的next_record属性遍历该槽所在组的各个记录。</li>
</ul>
</li>
<li>每个数据页的File Header部分都有上一页和下一页的编号，所有的数据页都会组成一个双链表。</li>
<li>页的首部和尾部都会存储页中数据的校验和页面最后修改时对应的lsn值。</li>
</ul>
<h1 id="B-树索引"><a href="#B-树索引" class="headerlink" title="B+树索引"></a>B+树索引</h1><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
      <categories>
        <category>图书</category>
      </categories>
  </entry>
  <entry>
    <title>计算机底层原理和计算机网络</title>
    <url>/posts/12188.html</url>
    <content><![CDATA[<p>进程：是程序分配资源的基本单位</p>
<p>缓存行：缓存取值的时候顺带把附近的值也带上，比如取一个数组中的一个值，就把整个数组带过去，提高命中率</p>
]]></content>
      <categories>
        <category>计算机基础</category>
      </categories>
      <tags>
        <tag>计算机基础</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机基础知识之《计算机是怎样跑起来的》</title>
    <url>/posts/51.html</url>
    <content><![CDATA[<h1 id="第一章-计算机的三大原则"><a href="#第一章-计算机的三大原则" class="headerlink" title="第一章 计算机的三大原则"></a>第一章 计算机的三大原则</h1><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul>
<li>什么是编码？<br> 通常将为了便于计算机处理而经过数字化处理的信息称作编码<br> 计算机内部会把所有的信息都当成数字来处理，尽管有些信息本来不是数字。比如，用于表示字符的数字是“字符编码”，用于表示颜色的数字是“颜色编码”<h2 id="小章节"><a href="#小章节" class="headerlink" title="小章节"></a>小章节</h2></li>
</ul>
<ol>
<li>计算机的三大根本性基础<ol>
<li><strong>计算机是执行输入、运算、输出的机器</strong></li>
<li><strong>程序是指令和数据的集合</strong></li>
<li><strong>计算机的处理方式有时与人的思维方式不同</strong></li>
</ol>
</li>
<li>输入、运算、输出是硬件的基础<br> 输入、运算、输出是三者必须成套出现，缺一不可。<ul>
<li>现在的计算机没有自主意识，因而不可能独立思考创造信息</li>
<li>没有运算的机器那是电线</li>
<li>没有输出，那就不是计算机而是垃圾箱</li>
</ul>
</li>
<li>软件是指令和数据的集合</li>
<li>对计算机来说，什么都是数字<h2 id="个人理解"><a href="#个人理解" class="headerlink" title="个人理解"></a>个人理解</h2>计算机是什么？当看到第二小节是那句“计算机是处理信息的机器”一下子就冒出来了，如果没记错的话那还是初中或高中计算机课提到的……当浏览第二章时，这种计算机硬件是“信息”输入、运算、输出的机器的观点给我当头一棒。</li>
</ol>
<h1 id="第二章-试着自己制造一台计算机吧"><a href="#第二章-试着自己制造一台计算机吧" class="headerlink" title="第二章 试着自己制造一台计算机吧"></a>第二章 试着自己制造一台计算机吧</h1><h2 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h2><ul>
<li>CPU是什么的缩写<br>  Central Processing Unit（中央处理器）<h2 id="小章节-1"><a href="#小章节-1" class="headerlink" title="小章节"></a>小章节</h2></li>
</ul>
<ol>
<li>制作微型计算机所必须的原件<ol>
<li>CPU</li>
<li>内存</li>
<li>I&#x2F;O</li>
<li>时钟发生器</li>
<li>指拨开关</li>
</ol>
</li>
<li>链接电源、数据和地址总线</li>
</ol>
<blockquote>
<p>涉及到的一些相关词汇</p>
</blockquote>
<ul>
<li>IC集成电路（integrated circuit）是一种微型电子器件或部件。采用一定的工艺，把一个电路中所需的晶体管、电阻、电容和电感等元件及布线互连一起，制作在一小块或几小块半导体晶片或介质基片上，然后封装在一个管壳内，成为具有所需电路功能的微型结构；其中所有元件在结构上已组成一个整体，使电子元件向着微小型化、低功耗、智能化和高可靠性方面迈进了一大步。它在电路中用字母IC表示。集成电路发明者为杰克▪基尔比（基于锗（Ge）的集成电路）和罗伯特▪诺伊思（基于硅（Si）的集成电路）。当今半导体工业大多数应用的是基于硅的集成电路。</li>
<li>时钟信号是计算机科学以及相关领域用语，时钟信号通常被用于同步电路当中，扮演计时器的角色，保证相关的电子组件得以同步运作。</li>
<li>寄存器，是集成电路中非常重要的一种存储单元，通常由触发器组成。在集成电路设计中，寄存器可分为电路内部使用的寄存器和充当内外部接口的寄存器这两类。内部寄存器不能被外部电路或软件访问，只是为内部电路的实现存储功能或满足电路的时序要求。而接口寄存器可以同时被内部电路和外部电路或软件访问，CPU中的寄存器就是其中一种，作为软硬件的接口，为广泛的通用编程用户所熟知。</li>
</ul>
<blockquote>
<p>各个IC的接脚</p>
</blockquote>
<ul>
<li>Vcc和GND（共有），IC和普通电器一样，需要接通电源才可以使用。Vcc是电源电压（相当于正极），GND是接地线（相当于负极）</li>
<li>A0-A15（address）（共有），其后的数字表示一个16位的二进制数中各个数字的位置。这16个引脚，可以表示0000 0000 0000 0000-1111 1111 1111 1111（二进制）个数据存取单元</li>
<li>D0-D7（data）（共有），其后数字和上述一样，Z80的CPU可以一次性的输入或输出8比特（八个引脚）的数据，如若输入输出超过8比特的数据，只得先把数据拆分</li>
<li>B&#x2F;A和C&#x2F;D（I&#x2F;O），控制出I&#x2F;O的上寄存器的引脚（和CPU的A0、A1相连）。Z80 PIO共有4个寄存器。两个用于设定PIO本身功能，两个用于存储与外部设备进行输入输出的数据</li>
<li>MREQ（Memory Request 内存请求）和IORQ（I&#x2F;O Request I&#x2F;O请求）（cpu）</li>
<li>CE（CHip Enable 选通信片）（内存和I&#x2F;O），跟CPU上的MREQ和IORQ搭配以控制当下CPU和谁连接</li>
<li>RD（read 输入）和WR（write 输出）（CPU），表示当前和内存或I&#x2F;O连接是输出还是输出</li>
<li>M1（Machine Cycle 1 机器周期1）（CPU、I&#x2F;O）用于同步的引脚</li>
<li>INT（Interrupt 中断）（CPU、I&#x2F;O）I&#x2F;O可以中断CPU正在执行程序的引脚</li>
<li>RESET（重置），重置CPU，可以启动CPU</li>
<li>BUS（总线，这里不是指特定的引脚，只是个说明），连接到CPU中数据引脚、地址引脚、控制引脚的电路的统称。使用快动开关可以使Z80 CPU的BUSRQ（Bus Request 总线请求）上的值在0和1之前切换。若BUSRQ为0，则CPU从电路中隔离。当处于这种隔离状态时，就可以不通过CPU，手动地向内存写入程序了。向这样不经过CPU而直接从外部设备读写内存的行为叫做DMA（Direct Memory Access 直接储存器访问）。在真实的计算机中，硬盘等设备要读写内存使用的就是DMA。</li>
<li>BUSAK（BUS Acknowledge 响应总线请求）只有BUSRQ和BUSAK同时为0时才可以进行DMA<h2 id="个人理解-1"><a href="#个人理解-1" class="headerlink" title="个人理解"></a>个人理解</h2>这一章是我目前读过（粗读）次数最多的章节，然而直到我打算把这些内容做个笔记是也有些概念没有理解，就是那个“寄存器”，好吧，现在我的迷茫只比之前清了少些。说起来真是如此，对照着Z80微型计算机的线路图那么走上一遍，对于计算机的理解还真的深了一些。好吧，这些都谈不上个人理解，只能算个人感想……<br>对于时钟信号和寄存器，我还是不甚理解。算了，有时候囫囵吞枣是必要的<br>时钟信号一开始我以为是想之前自己网络编程中的那种网页刷新效果一般，是触发CPU运行的东西。现在看来不是，这玩意是同步CPU、内存和I&#x2F;O之间通讯的东西，一个周期意味着同时进行一步（如输入或输出一个8字节的数据，这里的8字节因为Z80CPU是8位的，现在电脑都是64位的了）</li>
</ul>
<h1 id="第三章-体验一次手工汇编"><a href="#第三章-体验一次手工汇编" class="headerlink" title="第三章 体验一次手工汇编"></a>第三章 体验一次手工汇编</h1><h2 id="问题-2"><a href="#问题-2" class="headerlink" title="问题"></a>问题</h2><ol>
<li>什么是机器语言？<br>由二进制数字构成的程序，CPU可以直接对其解释、执行。不管汇编语言还是高级语言，都必须先转化为机器语言才能被执行。机器语言也被称作原生代码（Native Code）。</li>
<li>通常吧标志内存或I&#x2F;O中存储单元的数字称作什么？<br>地址。内存中由多个数据存储单元。计算机从0开始发的编号标识每一个存储单元，这些编号就是地址（Address）。I&#x2F;O中的寄存器也可以用地址标识。</li>
<li>CPU中的标志寄存器（Flags Register）有什么用？<br>用于在运算指令执行后，存储运算结果的某些状态。flag本意是“旗子”，这里引申为“标志”。一旦执行了算数运算、逻辑运算、比较运算等指令后，标识寄存器并不会存放运算结果的值，而是会把运算后的某些状态存储起来。例如运算结果是否为0，是否产生了负数，是否有溢出（overflow）等。<h2 id="小章节-2"><a href="#小章节-2" class="headerlink" title="小章节"></a>小章节</h2><h3 id="从从程序员的角度看硬件"><a href="#从从程序员的角度看硬件" class="headerlink" title="从从程序员的角度看硬件"></a>从从程序员的角度看硬件</h3>真正需要了解的硬件信息只有七种，没有必要在编程的时候还看着电路图。</li>
</ol>
<ul>
<li>CPU信息<ul>
<li>CPU种类<ul>
<li>可以使用那种机器语言取决于CPU的种类。不同的CPU可能使用不同的机器语言。</li>
</ul>
</li>
<li>时钟信号频率<ul>
<li>所谓时钟信号频率，就是由时钟发生器送给CPU的电信号的频率。</li>
</ul>
</li>
</ul>
</li>
<li>内存信息<ul>
<li>地址空间<ul>
<li>每个地址都标识着一个内存中的数据存储单元，这些地址的范围即为地址空间</li>
</ul>
</li>
<li>每个地址可以存储多少比特的信息<ul>
<li>Z80计算机每一个地址可以存储8比特（1字节）的指令或数据</li>
</ul>
</li>
</ul>
</li>
<li>I&#x2F;O信息<ul>
<li>I&#x2F;O的种类<ul>
<li>连接这计算机和周边设备的I&#x2F;</li>
</ul>
</li>
<li>地址空间</li>
<li>连接着何种周边设备</li>
</ul>
</li>
</ul>
<h3 id="机器语言和汇编语言"><a href="#机器语言和汇编语言" class="headerlink" title="机器语言和汇编语言"></a>机器语言和汇编语言</h3><ul>
<li>简单的说，机器语言是CPU可以直接运行的代码，就是那个010101；汇编语言是使用“助记符”（代替机器语言特定动作的简短符号）表示的机器语言。</li>
<li>汇编语言的语法十分简单，以至于语法只有一个，即把“标签”、“操作码（指令）”和“操作数（指令的对象）”并写在一行。<ul>
<li>标签的作用是为该行代码对应的内存地址起一个名字。</li>
<li>操作码就是表示“做什么”的指令</li>
<li>操作数表示的是指令执行的对象。CPU的寄存器、内存地址、I&#x2F;O地址或直接给出的数字都可以作为操作数。多个操作数之间使用逗号隔开<h3 id="Z80-CPU寄存器的结构"><a href="#Z80-CPU寄存器的结构" class="headerlink" title="Z80 CPU寄存器的结构"></a>Z80 CPU寄存器的结构</h3></li>
</ul>
</li>
<li>计算机的硬件有三个基本要素，CPU、内存和I&#x2F;O<ul>
<li>CPU负责解释、执行程序，从内存或I&#x2F;O输入数据，在内部进行运算，再把运算结果输出到内存和I&#x2F;O。</li>
<li>内存存放着程序，程序是指令和数据的集合。</li>
<li>I&#x2F;O中临时存放着用于和周边设备进行输入输出的数据。</li>
</ul>
</li>
<li>Z80CPU中的寄存器<br>与I&#x2F;O中的寄存器不同，CPU中的寄存器不仅能存储数据，还具备着对数据进行运算的能力。<br>CPU带什么样的寄存器取决于CPU的种类。Z80 CPU带有A、B……L、I、R、IX、IY、SP、PC。后四个寄存器的大小是16比特，其余是8比特。寄存器的用途取决与它的类型。有的指令只能将特定的寄存器指定为操作数。<br>举例来说<ul>
<li>A寄存器也叫做“累加器”，是运算的核心。</li>
<li>F寄存器也叫做“标志寄存器”，用于存储运算结果的状态，比如是否发生了进位，数字大小的比较结果等。</li>
<li>PC寄存器也叫作“程序指针”，存储着执行CPU接下来要执行的指令地址。PC寄存器的值会随着时钟信号自动更新，可以说程序就是依靠不断变化的PC寄存器的值运行起来的。</li>
<li>SP寄存器也叫做“栈顶指针”，用于在内存中创建一块成为“栈”的临时数据存储区域。<h3 id="追踪程序的运行过程"><a href="#追踪程序的运行过程" class="headerlink" title="追踪程序的运行过程"></a>追踪程序的运行过程</h3>通过反复的进行“读取指令”“解释、执行指令”“更新PC寄存器的值”这三个操作，程序就能运行起来了……<h3 id="尝试手工汇编"><a href="#尝试手工汇编" class="headerlink" title="尝试手工汇编"></a>尝试手工汇编</h3>在CPU的资料中，明确写有可以使用的助记符，以及助记符转化为机器语言的数值。通过这些资料，就可以手工地把汇编语言编写的程序转化为机器语言的程序……<h3 id="尝试估算程序的执行时间"><a href="#尝试估算程序的执行时间" class="headerlink" title="尝试估算程序的执行时间"></a>尝试估算程序的执行时间</h3>把每条指令的时钟累加起来……</li>
</ul>
</li>
</ul>
<h1 id="第四章-程序像河流一样流动着"><a href="#第四章-程序像河流一样流动着" class="headerlink" title="第四章 程序像河流一样流动着"></a>第四章 程序像河流一样流动着</h1><h2 id="问题-3"><a href="#问题-3" class="headerlink" title="问题"></a>问题</h2><ol>
<li>flow chart的中文意思是什么？<br>流程图。</li>
<li>请说出自然界中河流的三种流动方式。<br>向一个方向流淌；流着流着产生支流；卷成旋涡。<br>好吧，分别对应顺序执行、条件分支和循环，这作者也是够了。</li>
<li>事件驱动是什么？<br>用户的操作等产生事件后，由事件决定程序的流程。<br>好吧，js各种事件么……<h2 id="小章节-3"><a href="#小章节-3" class="headerlink" title="小章节"></a>小章节</h2><h3 id="程序的流程分为三种"><a href="#程序的流程分为三种" class="headerlink" title="程序的流程分为三种"></a>程序的流程分为三种</h3>CPU中的有一个被称作PC（program couter 程序计数器）的寄存器，负责存储内存地址，该地址指向下一条即将执行的指令。每解释执行一条指令，PC寄存器的值就会自动被更新为下一条指令的地址。<h3 id="结构化程序设计"><a href="#结构化程序设计" class="headerlink" title="结构化程序设计"></a>结构化程序设计</h3>为了把程序编写得具备结构性，仅使用顺序执行、条件分支和循环表示程序的流程即可，而不再使用跳转指令。<br>作为计算机硬件上的行为，无论是条件分支还是循环都必须使用跳转指令实现。但高级语言中跳转就变得可有可无了，反而在高级语言中使用跳转会使得程序陷入到流程错综复杂的状态。<h3 id="画流程图来思考算法"><a href="#画流程图来思考算法" class="headerlink" title="画流程图来思考算法"></a>画流程图来思考算法</h3>算法，就是解决既定问题的步骤。想让计算机解决问题，就需要把问题的解法转化成程序的流程。<br>思考算法是的要点是分两步走，先从整体上考虑程序的粗略流程，再考虑程序各个部分细节的流程。几乎所有的程序从整体来看都具有一个一成不变的流程——<strong>初始化处理-&gt;循环处理-&gt;收尾处理</strong><h3 id="特殊的程序流程——中断处理"><a href="#特殊的程序流程——中断处理" class="headerlink" title="特殊的程序流程——中断处理"></a>特殊的程序流程——中断处理</h3>中断处理是指程序的流程突然跳转到程序中特定的地方，这样的地方被成为中断处理例程（Routine）或中断处理程序（Handle），而这种跳转是通过CPU所具备的硬件功能实现的。<br>中断处理以硬件发出的请求为条件，使程序的流程产生分支，因此可以说它是一种特殊的条件分支。但编写程序是并不需要编写有关中断处理的代码。因为处理中断请求的程序，或内置于被烧录在计算机ROM中的BIOS系统（Basic Input Output System 基本输入输出系统，或内置于相应的操作系统中。<h3 id="特殊的程序流程——事件驱动"><a href="#特殊的程序流程——事件驱动" class="headerlink" title="特殊的程序流程——事件驱动"></a>特殊的程序流程——事件驱动</h3>可以把事件驱动想象成两个程序在对话，如下<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 主程序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> APIENTER <span class="title function_">WinMain</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 窗口过程</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LRESULT CALLBACK <span class="title function_">WndProc</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
通常把用户在应用程序中点击鼠标或者敲击键盘这样的操作称作“事件”（Event）。负责检测事件的是windows。Windows通过调用应用程序WndProc()函数通知应用程序的发生。而应用程序根据事件的类型做出相应的处理。这种机制就是事件驱动。可以说事件驱动也是一种特殊的分支，它以从Windows送来的通知为条件，根据通知的内容决定程序的下一步流程。<br>要实现事件驱动，就必须吧应用程序中的WndProc()函数的起始内存地址告诉Windows。这一步将在应用程序WinMain()中作为初始化处理被执行。<h2 id="个人理解-2"><a href="#个人理解-2" class="headerlink" title="个人理解"></a>个人理解</h2>这一章主要理解了PC（process counter）这个东西。好吧，我能说这个东西我看了五六遍才知道大约理解了么……好吧，幸亏看书之前有了做笔记的决定——即使这个笔记大部分是照抄的，也是蛮有用的。话说这个process counter用的是队列吗，要不然怎么知道下一个地址指的是谁？<br>一开始对书中所描绘的“事件驱动”给整蒙了。好吧，这有什么，不就是js中的绑定事件么……就是初始化处理这块我一下子没有转过来弯（好吧，那个on之类的说的大概就是这个）。<br>对于整个中断处理，还是第一次知道到底怎么回事。话说那个键盘输入的例子，就是那个DMA（direct memory access）吧。<br>至于流程图什么的，还真很少做过。主要是感觉费时间。我一直想找一个简单的描绘流程图之类的软件，可惜那大都需要学习成本，一开始就打到我了。<br>那个结构化设计，好吧，除了一开始接触的basic语言，还真没用过。php自带的这个我现在都不会用……</li>
</ol>
<h1 id="第五章-与算法成为好朋友的七个要点"><a href="#第五章-与算法成为好朋友的七个要点" class="headerlink" title="第五章 与算法成为好朋友的七个要点"></a>第五章 与算法成为好朋友的七个要点</h1><h2 id="问题-4"><a href="#问题-4" class="headerlink" title="问题"></a>问题</h2><ol>
<li>程序中“哨兵”指的是什么？<br>“哨兵”指的是一种含有特殊值的数据，可用于表示数据的结尾等。<br>字符串的末尾用0表示（这不是php……），链表的末尾用-1表示，像这样特殊的数据就是哨兵。<h2 id="小章节-4"><a href="#小章节-4" class="headerlink" title="小章节"></a>小章节</h2><h3 id="算法是程序设计的“熟语”"><a href="#算法是程序设计的“熟语”" class="headerlink" title="算法是程序设计的“熟语”"></a>算法是程序设计的“熟语”</h3></li>
</ol>
<ul>
<li>要点1：算法中解决问题的步骤是明确切有限的。<ul>
<li>通俗地说，算法就是<strong>把解决问题的步骤无一遗漏地用文字或图表示出来，其中步骤必须是明确并且步骤数必须是有限的</strong>。</li>
<li>把算法定义中的“用文字或图”换成“用程序”，就成了程序的定义了……</li>
<li>明确是指，在解决问题的步骤中，有了与直觉相关的因素，就不算算法了。</li>
</ul>
</li>
<li>要点2：计算机不考直觉而是机械地解决问题<ol>
<li>步骤是明确的、完全不依赖直觉的</li>
<li>步骤是机械的、不需要动脑筋就能完成的</li>
<li>使步骤终止的原因是明确的</li>
</ol>
</li>
<li>要点3：了解并应用典型算法</li>
<li>要点4：利用计算机的处理速度</li>
<li>要点5：使用编程技巧提升程序执行速度<ul>
<li>比如“哨兵”</li>
</ul>
</li>
<li>要点6：找出数字间的规律<ul>
<li>所有的信息都可以用数字表示——这是计算机的特性之一。因此为了构造算法，经常会利用到存在与数字间的规律。</li>
</ul>
</li>
<li>要点7：先在纸上考虑算法<h2 id="个人理解-3"><a href="#个人理解-3" class="headerlink" title="个人理解"></a>个人理解</h2>那个，找出数字间的规律还是满考验“直觉”的，就那个比拳算法我就没有想起来……如果是我，估计得一堆and和or……</li>
</ul>
<h1 id="第六章-与数据结构成为好朋友的七个要点"><a href="#第六章-与数据结构成为好朋友的七个要点" class="headerlink" title="第六章 与数据结构成为好朋友的七个要点"></a>第六章 与数据结构成为好朋友的七个要点</h1><h2 id="问题-5"><a href="#问题-5" class="headerlink" title="问题"></a>问题</h2><ul>
<li>程序中的变量是指什么？<br>变量是数据的容器。<br>变量中所存储的数据是可以改变的。变量的实质是按照变量所存储数据的大小被分配到的一块内存空间。</li>
<li>把若干个数据沿直线排列起来的数据结构叫做什么？<br>数组<br>使用了数组就可以高效地处理大量的数据。数组的实质是连续分配的一块特定大小的内存空间。</li>
<li>栈和队列的区别是什么<br>前者LIFO（Last In First Out)，后者FIFO（First In First Out）。<h2 id="小章节-5"><a href="#小章节-5" class="headerlink" title="小章节"></a>小章节</h2></li>
<li>要点1：了解内存和变量的关系<ul>
<li>计算机所处理的数据都存储在被称为内存的IC中。在一般的个人计算机中，内存内部被分割成若干数据存储单元，每个单元可以存储8比特的数据（8比特 &#x3D; 1字节）。为了区分这些单元，每个单元被分配了一个编号，这个编号被成为“地址”。</li>
<li>因为依靠指定地址的方式编写程序很麻烦，所以在几乎所有的高级语言中，都是使用变量把数据存储进内存，或从内存中把数据读出来。</li>
<li>变量的实质是按照变量所存储数据的大小被分配到的一块内存空间。</li>
</ul>
</li>
<li>要点2：了解作为数据结构基础的数组<ul>
<li>数组实际上是为了存储多个数据而在内存上集中分配出的一块内存空间。</li>
<li>数组是数据结构的基础，之所以这么说是因为数组反映了内存的物理结构本身。</li>
</ul>
</li>
<li>要点3：了解数组的应用——作为典型算法的数据结构<ul>
<li>数组是一种直接利用内存物理结构（计算机的特性）的最基本的数据结构。</li>
</ul>
</li>
<li>要点4：了解并掌握典型数据结构的类型和概念<ul>
<li>典型数据结构</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>数据结构的特征</th>
</tr>
</thead>
<tbody><tr>
<td>栈</td>
<td>把数据像小山那样堆积起来</td>
</tr>
<tr>
<td>队列</td>
<td>把数据排成一队</td>
</tr>
<tr>
<td>链表</td>
<td>可以任意地改变数据的排列顺序</td>
</tr>
<tr>
<td>二叉树</td>
<td>把数据分成两路排列</td>
</tr>
</tbody></table>
<p>这些数据结构其实都是通过程序从逻辑上改变了内存的物理结构。</p>
<ul>
<li>要点５：了解栈和队列的实现方法<br>栈<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> Stack[<span class="number">100</span>];        <span class="comment">/* 作为栈本质的数组 */</span></span><br><span class="line"><span class="type">char</span> StackPointer = <span class="number">0</span>;  <span class="comment">/* 栈顶指针 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 入栈函数 */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Push</span><span class="params">(<span class="type">char</span> Data)</span> &#123;</span><br><span class="line">    <span class="comment">/* 把数据存储到栈顶指针所指的位置上 */</span></span><br><span class="line">    Stack[StackPointer] = Data;　</span><br><span class="line">    <span class="comment">/* 更新栈顶指针 */</span></span><br><span class="line">    StackPointer ++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 出栈函数 */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Pop</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">/* 更新栈顶指针 */</span></span><br><span class="line">    StackPointer --；</span><br><span class="line">    <span class="comment">/* 把数据从栈顶指针所在的位置中取出来 */</span></span><br><span class="line">    <span class="keyword">return</span> Stack[StackPointer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
队列</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> Queue[<span class="number">100</span>];    <span class="comment">/*作为队列的本质的数组*/</span></span><br><span class="line"><span class="type">char</span> SetIndex = <span class="number">0</span>;  <span class="comment">/*标识数据存储位置的索引*/</span></span><br><span class="line"><span class="type">char</span> GetIndex = <span class="number">0</span>;  <span class="comment">/*标识数据读取位置的索引*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*存储数据的函数*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Set</span><span class="params">(<span class="type">char</span> Data)</span> &#123;</span><br><span class="line">    <span class="comment">/*存入数据*/</span></span><br><span class="line">    Queue[SetIndex] = Data;</span><br><span class="line">    <span class="comment">/*更新标识数据存储位置的索引*/</span></span><br><span class="line">    SetIndex ++;</span><br><span class="line">    <span class="comment">/*如果已经达到数组的末尾则折回开头*/</span></span><br><span class="line">    <span class="keyword">if</span> (SetIndex &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">        SetIndex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*读取数据的函数*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Get</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span> Data;</span><br><span class="line">    <span class="comment">/*读出数据*/</span></span><br><span class="line">    Data = Queue[GetIndex];</span><br><span class="line">    <span class="comment">/*更新标识数据读取位置的索引*/</span></span><br><span class="line">    GetIndex ++;</span><br><span class="line">    <span class="comment">/*如果已经达到数组的末尾则折回开头*/</span></span><br><span class="line">    <span class="keyword">if</span> (GetIndex &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">        GetIndex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Data;</span><br><span class="line">&#125;</span><br><span class="line">```   </span><br><span class="line">- 要点<span class="number">6</span>：了解结构体的组成</span><br><span class="line">    - 所谓结构体，就是把若干个数据项汇集到一处并赋予其名字后形成的一个整体。</span><br><span class="line">    - 一旦定义完结构提，就可以把结构提当作是一种数据类型，用它来定义变量。</span><br><span class="line">- 要点<span class="number">7</span>：了解链表和二叉树的实现方法</span><br><span class="line">    - 都是“自我引用的结构体”</span><br><span class="line">## 个人理解</span><br><span class="line">结构体什么的都可以理解了，但是不知道二叉树是怎么用的。</span><br><span class="line"></span><br><span class="line"># 第七章 成为会使用面向对象编程的程序员吧</span><br><span class="line">## 小章节</span><br><span class="line">### 什么是面向对象</span><br><span class="line">面向对象是一种基于以下思路的程序设计方法：将关注点置于对象本身，对象的构成要素包含对象的行为及操作，以此为基础进行编程。这种方法使程序易于复用。其中所使用的主要编程技巧有继承、封装、多态三种。</span><br><span class="line">### 对面向对象的几种观点</span><br><span class="line">- 观点<span class="number">1</span>：面向对象编程通过把组件拼装到一起构建程序</span><br><span class="line">类就是程序的组件。面向对象的关键在于能否灵活地运用类。</span><br><span class="line">- 观点<span class="number">2</span>：面向对象编程能够提升程序的开发效率和可维护性</span><br><span class="line">“我是创造类的人，你是使用类的人”</span><br><span class="line">- 观点<span class="number">3</span>：面向对象是适用于开发大型程序的开发方法</span><br><span class="line">- 观点<span class="number">4</span>：面向对象就是在为现实世界建模</span><br><span class="line">- 观点<span class="number">5</span>：面向对象编程可以借助UML设计程序</span><br><span class="line">- 观点<span class="number">6</span>：面向对象通过在程序间传递消息驱动程序</span><br><span class="line">- 观点<span class="number">7</span>：在面向对象编程中使用继承、封装和多态</span><br><span class="line">    - 继承：通过继承已存在的类所拥有的成员而生成新的类</span><br><span class="line">    - 封装：在类中所拥有的成员中，隐藏掉那些没有必要展现给该类调用着的成员</span><br><span class="line">    - 多态：针对同一种消息，不同的对象可以进行不同的操作</span><br><span class="line">### 类的三种使用方法</span><br><span class="line">- 仅仅调用类所持有的个别成员（函数和变量）</span><br><span class="line">- 在类的定义中包含其他的类（又称组合）</span><br><span class="line">- 通过继承已存在的类定义出新的类</span><br><span class="line">## 个人看法</span><br><span class="line">一开始看到这个章节的时候有些不以为意，可看过之后才知道自己是太年轻了。虽说我一直实践着面向对象编程，可我依旧不知道为什么要使用面向对象编程。在实际的工作中。我所用的的面向对象很大程度上是基于现有的框架。比如说在js中，我的那一套就根本没有用到过面向对象编程。</span><br><span class="line">这几个观点我几乎不知道有什么差距——甚至在我看来那都是面向对象的特性。但这正是我浅薄的一点——哪怕我昨天也看过这一章内容，我也说不清面向对象是什么——即便我一直在“用”。</span><br><span class="line">这也是我一贯的做法——我很懒，懒到连概念都不愿意记。</span><br><span class="line">对于什么是面向对象，这本书的作者说“面向对象编程就是把组件拼装到一起的进行编程的方法”。</span><br><span class="line"></span><br><span class="line"># 第八章一用就会的数据库</span><br><span class="line">## 问题</span><br><span class="line">- 数据库术语中“表”是什么意思？</span><br><span class="line">    - 表（table）就是被整理成表格形式的数据。一张表由若干列和行构成。列也被成为字段（field），行也被成为记录（record）</span><br><span class="line">- DBMS是什么的简称？</span><br><span class="line">    - Database Management System （数据库管理系统）的简称。比如MySQL</span><br><span class="line">- 键和索引的区别是什么？</span><br><span class="line">    - 键是用于设定表与表之前的关系（relationship），而索引是提升数据检索速度的机制。</span><br><span class="line">    - 其上每个值都能唯一标识一条记录的字段被成为主键。为了在表与表之间建立关系而在表中添加的、其他表主键的字段被成为外键。而索引是与键无关的机制。</span><br><span class="line">## 小章节</span><br><span class="line">### 数据库是数据的基地</span><br><span class="line">### 数据文件、DBMS和数据库应用程序</span><br><span class="line">DBMS是应用程序和数据文件的中介</span><br><span class="line">```flow</span><br><span class="line">a=&gt;subroutine: 应用程序</span><br><span class="line">d=&gt;operation: 请求操作数据</span><br><span class="line">b=&gt;subroutine: DBMS</span><br><span class="line">e=&gt;operation: 实际操作数据</span><br><span class="line">c=&gt;subroutine: 数据文件</span><br><span class="line"></span><br><span class="line">a-&gt;d-&gt;b-&gt;e-&gt;c</span><br></pre></td></tr></table></figure>
<h3 id="构建数据库"><a href="#构建数据库" class="headerlink" title="构建数据库"></a>构建数据库</h3><ol>
<li>设计数据库<ol>
<li>把必要数据筛选出来</li>
<li>考虑各种数据的属性（数据类型）</li>
</ol>
</li>
<li>通过拆表和整理数据实现规范化<ul>
<li>所谓规范化，就是把一张大表分割成多张小表，然后再在小表之间建立关系，以此来达到整理数据库结构的目的</li>
<li>规范化的要点是在一个数据库中要避免重复存储相同的数据。</li>
</ul>
</li>
<li>用主键和外键在表间建立关系<ul>
<li>表之间的关系使记录和记录关联了起来。记录之间虽然在逻辑上有一对一、多对多、一对多（多对一）三种关系，但关系型数据库无法直接表示多对多关系。比如把商城的数据库只分为顾客表和商品表，那么两表之间就形成了多对多关系（一个客人可以买多种商品，同时一种商品也可以被多个人买）。这时，可在两表之间再加一表——销售记录表。这张加入的表被称作链接表（link table）。</li>
<li>DBMS还具有检查参照完整性的功能，这种机制也是为了一致并安全地存储数据。</li>
</ul>
</li>
<li>索引能够提升数据库的检索速度<ul>
<li>索引表是一种数据结构，存储着字段的值以及字段所对应记录的位置。如果在顾客表的顾客姓名字段上设置索引，DBMS就会创建一张索引表。表中有两个字段，分别存储着顾客姓名和位置。因为索引表中的字段数更少，所以可以更快地进行数据的检索和排序。当查询数据时，DBMS先在索引表进行数据的检索和排序，然后根据位置信息把完整的数据从原有的表中取出来。</li>
</ul>
</li>
<li>设计用户界面<ul>
<li>优先设计数据库，再设计用户界面</li>
</ul>
</li>
<li>向DBMS发送CURD操作的SQL语句<ul>
<li>为了对数据库进行CURD操作，就必须从应用程序向DMBS发送命令（SQL语句）</li>
</ul>
</li>
<li>使用数据对象向DBMS发送SQL语句<ul>
<li>向DBMS发送SQL语句，一般情况下使用的都是被称为数据对象（data object）的软件组件</li>
</ul>
</li>
<li>事务控制也可以交给DBMS处理<h2 id="个人看法"><a href="#个人看法" class="headerlink" title="个人看法"></a>个人看法</h2>之前以为数据库自己都用了那么久，总该知道点什么。唉，其实书中所述的我都知道，但实际上灵活运用的不多。在现在的开发中，数据库的效率要求不高，各种冗余字段的建立让我感觉像是做了假开发……</li>
</ol>
<h1 id="第九章-通过七个简单的实验理解TCP-x2F-IP网络"><a href="#第九章-通过七个简单的实验理解TCP-x2F-IP网络" class="headerlink" title="第九章 通过七个简单的实验理解TCP&#x2F;IP网络"></a>第九章 通过七个简单的实验理解TCP&#x2F;IP网络</h1><h1 id="第十章-试着加密数据吧"><a href="#第十章-试着加密数据吧" class="headerlink" title="第十章 试着加密数据吧"></a>第十章 试着加密数据吧</h1><h1 id="第十一章-XML究竟是什么"><a href="#第十一章-XML究竟是什么" class="headerlink" title="第十一章 XML究竟是什么"></a>第十一章 XML究竟是什么</h1><h1 id="第十二章-SE负责监管计算机系统的构建"><a href="#第十二章-SE负责监管计算机系统的构建" class="headerlink" title="第十二章 SE负责监管计算机系统的构建"></a>第十二章 SE负责监管计算机系统的构建</h1>]]></content>
      <categories>
        <category>图书</category>
        <category>计算机基础</category>
      </categories>
      <tags>
        <tag>计算机基础</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL之You can&#39;t specify target table for update in FROM clause解决办法</title>
    <url>/posts/63488.html</url>
    <content><![CDATA[<p>mysql并不支持对同一表的数据作为同一表的更新数据.</p>
<p>如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> vip_reward_record</span><br><span class="line"><span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">AND</span> id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="built_in">max</span>(id) <span class="keyword">FROM</span> vip_reward_record <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="number">1</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> member_id);</span><br></pre></td></tr></table></figure>
<p>这样就中提示 <code>You can&#39;t specify target table for update in FROM claus</code></p>
<p>但解决也不难<br>在select外边套一层，让数据库认为你不是查同一表的数据作为同一表的更新数据,就向像这要”包装”一层就可以了</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> vip_reward_record</span><br><span class="line"><span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">AND</span> id <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="built_in">max</span>(id) <span class="keyword">AS</span> id <span class="keyword">FROM</span> vip_reward_record <span class="keyword">WHERE</span> type <span class="operator">=</span> <span class="number">1</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> member_id) a);</span><br></pre></td></tr></table></figure>

<p>但是,像是这样,却是可以运行的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> vip_member</span><br><span class="line"><span class="keyword">SET</span> dynamic_reward <span class="operator">=</span> (<span class="keyword">SELECT</span> ifnull(<span class="built_in">sum</span>(times <span class="operator">*</span> least(left_dynamic_reward, right_dynamic_reward) <span class="operator">*</span> <span class="number">2</span> <span class="operator">*</span> <span class="number">0.03</span> <span class="operator">*</span> <span class="number">0.95</span>), <span class="number">0</span>)</span><br><span class="line">                      <span class="keyword">FROM</span> vip_dynamic_reward</span><br><span class="line">                      <span class="keyword">WHERE</span> vip_member.id <span class="operator">=</span> vip_dynamic_reward.member_id);</span><br></pre></td></tr></table></figure>

<p>两者的差距看起来就是update&#x2F;delete之后没有紧跟着where.事实上可以运行的那一句在运行时会提醒<code> Unsafe query: &#39;Update&#39; statement without &#39;where&#39; updates all table rows at once</code></p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL提示1418错误</title>
    <url>/posts/1081.html</url>
    <content><![CDATA[<p>MySQL提示1418错误</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ERROR 1418 (HY000): This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable)</span><br></pre></td></tr></table></figure>
<p>这样就行啦</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> log_bin_trust_function_creators<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL常用函数</title>
    <url>/posts/6f34fc8a.html</url>
    <content><![CDATA[<p>CONVERT_TZ</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>功能</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>CONVERT_TZ</td>
<td>时间转时区</td>
<td>CONVERT_TZ(IFNULL(MAX(LastModifiedDate), ‘1990-01-01’), ‘GMT’, bh.TimeZone) AS LastScheduleTime</td>
</tr>
<tr>
<td>coalesce</td>
<td>获取第一个不为null的值</td>
<td>COALESCE(e.FirstName_local, e.FirstName_en)</td>
</tr>
<tr>
<td>concat</td>
<td>连接字符串</td>
<td>concat( 1, 2, 3)</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>使用存储过程删除外键索引字段</title>
    <url>/posts/46118.html</url>
    <content><![CDATA[<p>每次上线都要在一堆库中执行SQL，一个库报错就会导致不知道那些库还没有执行操作~~~为了避免遇到这种报错，就只得另觅他法了。</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP TABLE if EXISTS unitscheduling_week;</span><br><span class="line">CREATE TABLE `unitscheduling_week`</span><br><span class="line">(</span><br><span class="line">    `id`    int(10) UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">    `Value` varchar(10)      NOT NULL DEFAULT &#x27;&#x27;,</span><br><span class="line">    PRIMARY KEY (`id`, `Value`)</span><br><span class="line">) ENGINE = InnoDB</span><br><span class="line">  DEFAULT CHARSET = utf8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS unit_history;</span><br><span class="line">CREATE TABLE `unit_history`</span><br><span class="line">(</span><br><span class="line">    `id`               int(10) UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">    `UnitScheduleWeek` int(10) UNSIGNED DEFAULT NULL,</span><br><span class="line">    `FromDate`         datetime         NOT NULL,</span><br><span class="line">    PRIMARY KEY (`id`, `FromDate`),</span><br><span class="line">    KEY `UnitScheduleWeek` (`UnitScheduleWeek`),</span><br><span class="line">    CONSTRAINT `unit_history_ibfk_3` FOREIGN KEY (`UnitScheduleWeek`) REFERENCES `unitscheduling_week` (`id`) ON DELETE CASCADE</span><br><span class="line">) ENGINE = InnoDB</span><br><span class="line">  DEFAULT CHARSET = utf8 COMMENT =&#x27;Unit within a building&#x27;;</span><br></pre></td></tr></table></figure>
<h3 id="删外键"><a href="#删外键" class="headerlink" title="删外键"></a>删外键</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS dropForeignKeyByValen;</span><br><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE dropForeignKeyByValen(IN foreignKeyName varchar(255))</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE tableName varchar(255);</span><br><span class="line">    SELECT TABLE_NAME</span><br><span class="line">    INTO tableName</span><br><span class="line">    FROM information_schema.KEY_COLUMN_USAGE</span><br><span class="line">    WHERE TABLE_SCHEMA = database()</span><br><span class="line">      AND CONSTRAINT_NAME = foreignKeyName;</span><br><span class="line">    IF tableName IS NOT NULL THEN</span><br><span class="line">        SET FOREIGN_KEY_CHECKS = 0;</span><br><span class="line">        SET @ddl = CONCAT(&#x27;ALTER TABLE &#x27;, tableName, &#x27; DROP FOREIGN KEY &#x27;, foreignKeyName);</span><br><span class="line">        PREPARE stmt FROM @ddl;</span><br><span class="line">        EXECUTE stmt;</span><br><span class="line">        SET FOREIGN_KEY_CHECKS = 1;</span><br><span class="line">    END IF;</span><br><span class="line">END //</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">CALL dropForeignKeyByValen(&#x27;unit_history_ibfk_3&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="删索引"><a href="#删索引" class="headerlink" title="删索引"></a>删索引</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS dropIndexByValen;</span><br><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE dropIndexByValen(IN tableName varchar(255), IN indexName varchar(255))</span><br><span class="line">BEGIN</span><br><span class="line">    IF exists(SELECT TABLE_NAME</span><br><span class="line">              FROM information_schema.statistics</span><br><span class="line">              WHERE TABLE_SCHEMA = database()</span><br><span class="line">                AND TABLE_NAME = tableName</span><br><span class="line">                AND INDEX_NAME = indexName) THEN</span><br><span class="line">        SET @ddl = CONCAT(&#x27;ALTER TABLE &#x27;, tableName, &#x27; DROP KEY &#x27;, indexName);</span><br><span class="line">        PREPARE stmt FROM @ddl;</span><br><span class="line">        EXECUTE stmt;</span><br><span class="line">    END IF;</span><br><span class="line">END //</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">CALL dropIndexByValen(&#x27;unit_history&#x27;, &#x27;UnitScheduleWeek&#x27;);</span><br></pre></td></tr></table></figure>


<h3 id="删字段"><a href="#删字段" class="headerlink" title="删字段"></a>删字段</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS dropColumnByValen;</span><br><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE dropColumnByValen(IN tableName varchar(255), IN columnName varchar(255))</span><br><span class="line">BEGIN</span><br><span class="line">    IF exists(SELECT TABLE_NAME</span><br><span class="line">              FROM information_schema.columns</span><br><span class="line">              WHERE TABLE_SCHEMA = database()</span><br><span class="line">                AND TABLE_NAME = tableName</span><br><span class="line">                AND COLUMN_NAME = columnName) THEN</span><br><span class="line">        SET @ddl = CONCAT(&#x27;ALTER TABLE &#x27;, tableName, &#x27; DROP COLUMN &#x27;, columnName);</span><br><span class="line">        PREPARE stmt FROM @ddl;</span><br><span class="line">        EXECUTE stmt;</span><br><span class="line">    END IF;</span><br><span class="line">END //</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">CALL dropColumnByValen(&#x27;unit_history&#x27;, &#x27;UnitScheduleWeek&#x27;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>前端性能优化原理与实践</title>
    <url>/posts/50222.html</url>
    <content><![CDATA[<h1 id="总章"><a href="#总章" class="headerlink" title="总章"></a>总章</h1><blockquote>
<p>从输入url到页面加载完成,发生了什么?    – 一下简称步骤</p>
</blockquote>
<ol>
<li>通过DNS(域名解析系统)将URL解析为对应的IP地址</li>
<li>通过IP地址和确定的那台服务器建立TCP网络连接</li>
<li>发起HTTP请求</li>
<li>服务器处理请求后返回HTTP响应</li>
<li>浏览器获取数据,解析内容,渲染页面</li>
</ol>
<p>前端性能优化方案,就需要在这五个步骤中考量.</p>
<h2 id="网络层面"><a href="#网络层面" class="headerlink" title="网络层面"></a>网络层面</h2><ol>
<li>针对dns,浏览器dns缓存等</li>
<li>针对tcp,长连接,预连接</li>
<li>针对http请求,减少http请求次数,减少请求体积,部署cdn</li>
</ol>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><ul>
<li>资源加载优化</li>
<li>服务端渲染</li>
<li>浏览器缓存机制的利用</li>
<li>DOM 树的构建</li>
<li>网页排版和渲染过程</li>
<li>回流与重绘的考量</li>
<li>DOM 操作的合理规避等等</li>
</ul>
<h1 id="HTTP优化"><a href="#HTTP优化" class="headerlink" title="HTTP优化"></a>HTTP优化</h1><blockquote>
<p>webpack 性能调优与 Gzip 原理</p>
</blockquote>
<p>HTTP 压缩就是以缩小体积为目的，对 HTTP 内容进行重新编码的过程.最常用的方案就是gzip.</p>
<p>http优化有两个方向:<strong>减少请求次数</strong>和<strong>减少单次请求所花费的时间</strong>.其实就是资源的合并与压缩.</p>
<h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><p>在计算机中，像素用二进制数来表示。不同的图片格式中像素与二进制位数之间的对应关系是不同的。一个像素对应的二进制位数越多，它可以表示的颜色种类就越多，成像效果也就越细腻，文件体积相应也会越大。</p>
<p>一个二进制位表示两种颜色（0|1 对应黑|白），如果一种图片格式对应的二进制位数有 n 个，那么它就可以呈现 2^n 种颜色。…</p>
<h2 id="JPEG-x2F-JPG"><a href="#JPEG-x2F-JPG" class="headerlink" title="JPEG&#x2F;JPG"></a>JPEG&#x2F;JPG</h2><p>JPG 最大的特点是有损压缩。这种高效的压缩算法使它成为了一种非常轻巧的图片格式。另一方面，即使被称为“有损”压缩，JPG的压缩方式仍然是一种高质量的压缩方式：当我们把图片体积压缩至原有体积的 50% 以下时，JPG 仍然可以保持住 60% 的品质。此外，JPG 格式以 24 位存储单个图，可以呈现多达 1600 万种颜色，足以应对大多数场景下对色彩的要求，这一点决定了它压缩前后的质量损耗并不容易被我们人类的肉眼所察觉——前提是你用对了业务场景。…</p>
<p>JPG 的缺陷<br>有损压缩在上文所展示的轮播图上确实很难露出马脚，但当它处理矢量图形和 Logo 等线条感较强、颜色对比强烈的图像时，人为压缩导致的图片模糊会相当明显。</p>
<p>此外，JPEG 图像不支持透明度处理，透明图片需要召唤 PNG 来呈现。…</p>
<p>JPG 适用于呈现色彩丰富的图片，在我们日常开发中，JPG 图片经常作为大的背景图、轮播图或 Banner 图出现。</p>
<h2 id="png"><a href="#png" class="headerlink" title="png"></a>png</h2><p>PNG（可移植网络图形格式）是一种无损压缩的高保真的图片格式。8 和 24，这里都是二进制数的位数。按照我们前置知识里提到的对应关系，8 位的 PNG 最多支持 256 种颜色，而 24 位的可以呈现约 1600 万种颜色。</p>
<p>PNG 图片具有比 JPG 更强的色彩表现力，对线条的处理更加细腻，对透明度有良好的支持。它弥补了上文我们提到的 JPG 的局限性，唯一的 BUG 就是体积太大。…</p>
<p>考虑到 PNG 在处理条和颜色对比度方面的优势，我们主要用它来呈现小的 Logo、颜色简单且对比强烈的图片或背景等。</p>
<h2 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h2><p>和性能关系最密切的一点就是：SVG 与 PNG 和 JPG 相比，文件体积更小，可压缩性更强。</p>
<p>SVG 的局限性主要有两个方面，一方面是它的渲染成本比较高，这点对性能来说是很不利的。另一方面，SVG 存在着其它图片格式所没有的学习成本（它是可编程的）。</p>
<p>iconfont就是svg格式的</p>
<h2 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h2><p>一般用于特别小的logo,不方便使用雪碧图处理,可以直接写在代码中来减少http请求次数</p>
<p>实际用的地方</p>
<ul>
<li>图片的实际尺寸很小（大家可以观察一下掘金页面的 Base64 图，几乎没有超过 2kb 的）</li>
<li>图片无法以雪碧图的形式与其它小图结合（合成雪碧图仍是主要的减少 HTTP 请求的途径，Base64 是雪碧图的补充）</li>
<li>图片的更新频率非常低（不需我们重复编码和修改文件内容，维护成本较低）…</li>
</ul>
<h2 id="WebP"><a href="#WebP" class="headerlink" title="WebP"></a>WebP</h2><p>支持无损和有损压缩,优于jpg和png.但是兼容性太差</p>
<h1 id="浏览器缓存机制介绍与缓存策略剖析"><a href="#浏览器缓存机制介绍与缓存策略剖析" class="headerlink" title="浏览器缓存机制介绍与缓存策略剖析"></a>浏览器缓存机制介绍与缓存策略剖析</h1><blockquote>
<p>通过网络获取内容既速度缓慢又开销巨大。较大的响应需要在客户端与服务器之间进行多次往返通信，这会延迟浏览器获得和处理内容的时间，还会增加访问者的流量费用。因此，缓存并重复利用之前获取的资源的能力成为性能优化的一个关键方面。</p>
</blockquote>
<p>缓存可以减少网络 IO 消耗，提高访问速度。浏览器缓存是一种操作简单、效果显著的前端性能优化手段。</p>
<p>浏览器缓存机制有四个方面，它们按照获取资源时请求的优先级依次排列如下：</p>
<ol>
<li>Memory Cache</li>
<li>Service Worker Cache</li>
<li>HTTP Cache</li>
<li>Push Cache</li>
</ol>
<p>HTTP 缓存是我们日常开发中最为熟悉的一种缓存机制。它又分为强缓存和协商缓存。优先级较高的是强缓存，在命中强缓存失败的情况下，才会走协商缓存。</p>
<p>强缓存是利用 http 头中的 Expires 和 Cache-Control 两个字段来控制的。强缓存中，当请求再次发出时，浏览器会根据其中的 expires 和 cache-control 判断目标资源是否“命中”强缓存，若命中则直接从缓存中获取资源，不会再与服务端发生通信。…</p>
<p>强缓存的实现：从 expires 到 cache-control</p>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>php使用mysqli</title>
    <url>/posts/41843.html</url>
    <content><![CDATA[<p>mysqli::prepare()可以避免sql注入,还是挺有用的.但是无法同时执行多个sql语句</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* select</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$connect</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"><span class="variable">$connect</span>-&gt;<span class="title function_ invoke__">set_charset</span>(<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;SELECT `name`, `age` FROM `user` WHERE `name` = ?&quot;</span>;</span><br><span class="line"><span class="variable">$tmp</span> = <span class="variable">$connect</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">bind_param</span>(<span class="string">&#x27;s&#x27;</span>, <span class="variable">$name</span>);</span><br><span class="line"><span class="variable">$name</span> = <span class="string">&#x27;grey&#x27;</span>;</span><br><span class="line"><span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">bind_result</span>(<span class="variable">$name</span>, <span class="variable">$price</span>);</span><br><span class="line"><span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line"><span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">store_result</span>();</span><br><span class="line"><span class="variable">$count</span> = <span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">num_rows</span>(); <span class="comment">// 数量</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$count</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">fetch</span>()) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">&#123;$name&#125;</span>--<span class="subst">&#123;$price&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$connect</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * insert</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$connect</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>(<span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"><span class="variable">$connect</span>-&gt;<span class="title function_ invoke__">set_charset</span>(<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;INSERT INTO user (`name`, `age`) VALUE (?, ?)&quot;</span>;</span><br><span class="line"><span class="variable">$tmp</span> = <span class="variable">$connect</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$tmp</span> ) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="variable">$connect</span>-&gt;error);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">bind_param</span>(<span class="string">&#x27;sd&#x27;</span>, <span class="variable">$name</span>, <span class="variable">$age</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$names</span> = <span class="keyword">array</span>(<span class="string">&quot;Neo&quot;</span>, <span class="string">&quot;Morpheus&quot;</span>, <span class="string">&quot;Trinity&quot;</span>, <span class="string">&quot;Cypher&quot;</span>, <span class="string">&quot;Tank&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">3</span>; <span class="variable">$i</span>++) &#123; <span class="comment">// 一次进行多次操作,以execute之前的最后一个（被绑定的）参数为准，即使这个参数在prepare之前</span></span><br><span class="line">    <span class="variable">$name</span> = <span class="variable">$names</span>[<span class="title function_ invoke__">array_rand</span>(<span class="variable">$names</span>)];</span><br><span class="line">    <span class="variable">$age</span> = <span class="variable">$i</span>;</span><br><span class="line">    <span class="variable">$tmp</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$connect</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>触发器和存储过程的简单例子</title>
    <url>/posts/50525.html</url>
    <content><![CDATA[<p>尽管存储过程很少用，但还是碰到了~~~</p>
<p>简单例子，帮助理解。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS student</span><br><span class="line">(</span><br><span class="line">    id          int            NOT NULL PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    name        varchar(255)   NOT NULL DEFAULT &#x27;&#x27;,</span><br><span class="line">    total_score decimal(10, 2) NOT NULL DEFAULT 0</span><br><span class="line">) CHARSET utf8</span><br><span class="line">  ENGINE innodb;</span><br><span class="line"></span><br><span class="line">CREATE TABLE IF NOT EXISTS score</span><br><span class="line">(</span><br><span class="line">    id         int           NOT NULL PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    student_id int           NOT NULL,</span><br><span class="line">    score      decimal(5, 2) NOT NULL DEFAULT 0</span><br><span class="line">) CHARSET utf8</span><br><span class="line">  ENGINE innodb;</span><br><span class="line"></span><br><span class="line">DROP PROCEDURE IF EXISTS update_user_total_score;</span><br><span class="line">CREATE</span><br><span class="line">    PROCEDURE update_user_total_score(IN studentId int, IN scoreNum decimal(5, 2))</span><br><span class="line">BEGIN</span><br><span class="line">    UPDATE student SET total_score = total_score + scoreNum WHERE id = studentId;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">DROP TRIGGER IF EXISTS score_insert;</span><br><span class="line">CREATE TRIGGER score_insert</span><br><span class="line">    AFTER INSERT</span><br><span class="line">    ON score</span><br><span class="line">    FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    CALL update_user_total_score(NEW.student_id, NEW.score);</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">DROP TRIGGER IF EXISTS score_update;</span><br><span class="line">CREATE TRIGGER score_update</span><br><span class="line">    AFTER UPDATE</span><br><span class="line">    ON score</span><br><span class="line">    FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    CALL update_user_total_score(NEW.student_id, NEW.score - OLD.score);</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">DROP TRIGGER IF EXISTS score_delete;</span><br><span class="line">CREATE TRIGGER score_delete</span><br><span class="line">    AFTER DELETE</span><br><span class="line">    ON score</span><br><span class="line">    FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    CALL update_user_total_score(OLD.student_id, 0 - OLD.score);</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">DELETE</span><br><span class="line">FROM score</span><br><span class="line">WHERE id = 15;</span><br><span class="line"></span><br><span class="line">TRUNCATE score;</span><br><span class="line">TRUNCATE student;</span><br><span class="line"></span><br><span class="line">INSERT INTO student(id, name)</span><br><span class="line">VALUES (1, &#x27;Grey&#x27;),</span><br><span class="line">       (2, &#x27;Yellow&#x27;),</span><br><span class="line">       (3, &#x27;Pink&#x27;),</span><br><span class="line">       (4, &#x27;Red&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO score (student_id, score)</span><br><span class="line">VALUES (1, 80)</span><br><span class="line">     , (1, 90)</span><br><span class="line">     , (2, 70)</span><br><span class="line">     , (3, 60)</span><br><span class="line">     , (4, 10)</span><br><span class="line">     , (4, 30)</span><br><span class="line">     , (4, 20)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">DELETE</span><br><span class="line">FROM score</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br><span class="line">UPDATE</span><br><span class="line">    score</span><br><span class="line">SET score = 100</span><br><span class="line">WHERE id = 2;</span><br><span class="line"></span><br><span class="line">DELETE FROM score WHERE 1;</span><br><span class="line"></span><br><span class="line">SELECT *</span><br><span class="line">FROM student;</span><br><span class="line"></span><br><span class="line">SELECT *</span><br><span class="line">FROM score;</span><br><span class="line"></span><br><span class="line">CALL update_user_total_score(1, 10);</span><br><span class="line">SHOW CREATE PROCEDURE update_user_total_score;</span><br><span class="line"></span><br><span class="line">SELECT 10</span><br><span class="line">INTO @totalScore;</span><br><span class="line">UPDATE student</span><br><span class="line">SET total_score = total_score + @totalScore</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>并行与并发的区别</title>
    <url>/posts/58742.html</url>
    <content><![CDATA[<ul>
<li>并发<ul>
<li>操作系统中,是指一个时间段中有几个程序都处于已启动运行到运行完毕之间,且这几个程序都是在同一个处理机上运行</li>
<li>多个事情,在同一<strong>时间段</strong>同时发生了</li>
<li>并发的多个任务之间是互相抢占资源的</li>
</ul>
</li>
<li>并行<ul>
<li>当系统有一个以上的cpu时,当一个CPU执行一个进程时,另一个cpu可以执行另一个进程,两个进程互不抢占CPU资源,可以同时进行</li>
<li>多个事情,在同一<strong>时间点</strong>同时发生了</li>
<li>并发的多个任务之间是不互相抢占资源的</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>杂知</category>
      </categories>
      <tags>
        <tag>杂知</tag>
      </tags>
  </entry>
  <entry>
    <title>git实操</title>
    <url>/posts/4321.html</url>
    <content><![CDATA[<h3 id="简单命令行入门教程"><a href="#简单命令行入门教程" class="headerlink" title="简单命令行入门教程"></a>简单命令行入门教程</h3><p>Git 全局设置:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;陈孟辉&quot;</span><br><span class="line">git config --global user.email &quot;chenmenghui_008@163.com&quot;</span><br></pre></td></tr></table></figure>

<p>创建 git 仓库:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir chenmenghui</span><br><span class="line">cd chenmenghui</span><br><span class="line">git init</span><br><span class="line">touch README.md</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin git@gitee.com:chenmenghui/chenmenghui.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>已有仓库?</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd existing_git_repo</span><br><span class="line">git remote add origin git@gitee.com:chenmenghui/chenmenghui.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<h3 id="迁移仓库"><a href="#迁移仓库" class="headerlink" title="迁移仓库"></a>迁移仓库</h3><p>前几日把在自己的服务器上建了一个git裸仓库。然后想着自己的服务器可能用不了多久，就想着把项目迁到码云上来。</p>
<p>首先使用</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">git clone --bare 「自己的服务器上的仓库」</span><br><span class="line">git push --remote 「码云上刚刚创建的仓库」</span><br></pre></td></tr></table></figure>

<h3 id="clone代码之后-把项目中的-env配置文件修改之后-即使将其加入了-gitignore文件-也被提交了"><a href="#clone代码之后-把项目中的-env配置文件修改之后-即使将其加入了-gitignore文件-也被提交了" class="headerlink" title="clone代码之后,把项目中的.env配置文件修改之后,即使将其加入了.gitignore文件,也被提交了"></a>clone代码之后,把项目中的.env配置文件修改之后,即使将其加入了.gitignore文件,也被提交了</h3><p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git update-index --assume-unchanged .env</span><br></pre></td></tr></table></figure>

<p>才没提交</p>
<p><a href="https://www.cnblogs.com/kevingrace/p/5690241.html">原来如此</a>,.gitignore只是忽视未被加入到远程仓库中的文件</p>
<h3 id="git合并本地的几个commit操作"><a href="#git合并本地的几个commit操作" class="headerlink" title="git合并本地的几个commit操作"></a>git合并本地的几个commit操作</h3><h3 id="如果远程仓库里没有东西"><a href="#如果远程仓库里没有东西" class="headerlink" title="如果远程仓库里没有东西"></a>如果远程仓库里没有东西</h3><ol>
<li>进入本地指定目录</li>
<li>git init 创建本地仓库</li>
<li>把本地仓库中的文件们加入本地仓库 git add .</li>
<li>关联远程仓库 git remote add origin <a href="mailto:&#x67;&#105;&#x74;&#x40;&#x67;&#x69;&#x74;&#x2e;&#x6f;&#x73;&#x63;&#104;&#105;&#x6e;&#97;&#x2e;&#110;&#x65;&#116;">&#x67;&#105;&#x74;&#x40;&#x67;&#x69;&#x74;&#x2e;&#x6f;&#x73;&#x63;&#104;&#105;&#x6e;&#97;&#x2e;&#110;&#x65;&#116;</a>:yourname&#x2F;demo.git</li>
<li>更新 git pull</li>
</ol>
<h3 id="导出日志"><a href="#导出日志" class="headerlink" title="导出日志"></a>导出日志</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git log --date=iso --pretty=format:&#x27;&quot;%h&quot;,&quot;%an&quot;,&quot;%ad&quot;,&quot;%s&quot;&#x27; &gt;log.csv</span><br></pre></td></tr></table></figure>

<h3 id="fork-一个开源库"><a href="#fork-一个开源库" class="headerlink" title="fork 一个开源库"></a>fork 一个开源库</h3><p>1.fork开源项目到自己的仓库,比如从<br>github.com&#x2F;abc&#x2F;cherry &#x3D;&gt; github.com&#x2F;dhl&#x2F;cherry<br>然后clone<br>git clone <a href="https://github.com/dhl/cherry">https://github.com/dhl/cherry</a><br>2.接下来cd到自己的仓库，开始如下操作<br>cd cherry<br>git checkout -b dev    #默认是master，master里永远跟开源的保持一致<br>git pull<br>git checkout master   #切回master，做更新<br>git remote add upstream <a href="https://github.com/abc/cherry.git">https://github.com/abc/cherry.git</a>  #设置upstream开源仓库.<br>git fetch upstream master #拉取开源的仓库upstream的master到本地<br>git merge upstream&#x2F;master  #合并到本地master<br>git checkout dev  #切换到dev<br>git rebase master  #把刚刚拉取的更新merge到dev分支</p>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>bat编程遇到的一些小东西</title>
    <url>/posts/44518.html</url>
    <content><![CDATA[<blockquote>
<p>这些实际运用的很少，需要的话肯定还是要百度的~~~写点遇到的吧，不知道的到时候再查呗</p>
</blockquote>
<h3 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h3><p>赋值号「&#x3D;」两边的参数是不能有空格的！！！其他语言用习惯了，这一点很容易中枪</p>
<p>另外，从文件中读取值是这样的</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> opt_data.txt (</span><br><span class="line">    <span class="built_in">set</span> /p lastDays=&lt;opt_data.txt</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">set</span> lastDay=<span class="number">0</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="x0"><a href="#x0" class="headerlink" title="%~x0"></a>%~x0</h3><p>bat 文件中像「%0」「%1」的含义就是命令行输入的命令的第几个参数。</p>
<p>比如在命令行输入</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.bat a b c</span><br></pre></td></tr></table></figure>

<p>其中</p>
<ul>
<li>%0 指的是「1.bat」</li>
<li>%1 指的是「a」</li>
<li>%2 指的是「b」</li>
<li>%3 指的是「c」</li>
</ul>
<p>而「~x」指的是取后缀</p>
<p>所以「%~x0」就是取「1.bat」的后缀，即「bat」</p>
<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p><a href="https://blog.csdn.net/Ctrain/article/details/47917573">cmd for命令</a></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> /l <span class="variable">%%i</span> <span class="keyword">in</span> (<span class="number">1</span> <span class="number">1</span> <span class="number">10</span>) <span class="keyword">do</span> (</span><br><span class="line">    <span class="built_in">set</span> var=<span class="variable">%%i</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">!var!</span> 启用延缓环境变量</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">%var%</span> 未启用延缓环境变量</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<blockquote>
<p>for %%i in (command1) do command2</p>
</blockquote>
<p>参数「f」，读文件</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">:: 读文件，以行为间隔</span><br><span class="line"><span class="keyword">for</span> /f <span class="variable">%%i</span> <span class="keyword">in</span> (test.txt) <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">%%i</span></span><br><span class="line"></span><br><span class="line">:: 读文件，以 delims 中的参数「,」为间隔</span><br><span class="line"><span class="keyword">for</span> /f &quot;delims=,&quot; <span class="variable">%%i</span> <span class="keyword">in</span> (test.txt) <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">%%i</span></span><br></pre></td></tr></table></figure>

<p>参数 d</p>
<p>参数</p>
<h3 id="字符串截取"><a href="#字符串截取" class="headerlink" title="字符串截取"></a>字符串截取</h3>]]></content>
      <categories>
        <category>实用代码</category>
        <category>bat</category>
      </categories>
  </entry>
  <entry>
    <title>在自己的服务器上搭建一个git服务器</title>
    <url>/posts/3261.html</url>
    <content><![CDATA[<h1 id="配置篇"><a href="#配置篇" class="headerlink" title="配置篇"></a>配置篇</h1><h2 id="在服务器上配置git仓库"><a href="#在服务器上配置git仓库" class="headerlink" title="在服务器上配置git仓库"></a>在服务器上配置git仓库</h2><h3 id="安装git-ubuntu-root"><a href="#安装git-ubuntu-root" class="headerlink" title="安装git(ubuntu root)"></a>安装git(ubuntu root)</h3><p>apt install git</p>
<h3 id="创建一个git用户"><a href="#创建一个git用户" class="headerlink" title="创建一个git用户"></a>创建一个git用户</h3><p>adduser git</p>
<h3 id="初始化一个仓库"><a href="#初始化一个仓库" class="headerlink" title="初始化一个仓库"></a>初始化一个仓库</h3><ol>
<li>指定一个目录作为git仓库</li>
<li>git init –bare &#x2F;srv&#x2F;yii.git</li>
<li>chown git:git -R &#x2F;srv&#x2F;yii.git<h3 id="创建证书登录"><a href="#创建证书登录" class="headerlink" title="创建证书登录"></a>创建证书登录</h3></li>
<li>创建&#x2F;home&#x2F;git&#x2F;.ssh&#x2F;authorized_keys(注意:.ssh目录及authorized_key文件是自建的)</li>
<li>收集需要登陆用户的公匙,导入到上个创建的文件中.一个公匙占一行<h2 id="客户端配置git"><a href="#客户端配置git" class="headerlink" title="客户端配置git"></a>客户端配置git</h2><h3 id="安装git命令行"><a href="#安装git命令行" class="headerlink" title="安装git命令行"></a>安装git命令行</h3></li>
</ol>
<ul>
<li>ubuntu<ul>
<li>apt install git</li>
</ul>
</li>
<li>win<ul>
<li><a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git">安装</a><h3 id="配置git用户数据"><a href="#配置git用户数据" class="headerlink" title="配置git用户数据"></a>配置git用户数据</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 用户信息</span><br><span class="line">git config --global user.name &#x27;***&#x27;</span><br><span class="line">git config --global user.email &#x27;***&#x27;</span><br><span class="line">// 生成密匙</span><br><span class="line">ssh-keygen // 注意会提示保存在哪里,一会要到对应的地方找,默认是在对应用户目录下的.ssh/里</span><br></pre></td></tr></table></figure>
<h3 id="把用户信息导至服务器"><a href="#把用户信息导至服务器" class="headerlink" title="把用户信息导至服务器"></a>把用户信息导至服务器</h3>把公匙信息复制到服务器的&#x2F;home&#x2F;git&#x2F;.ssh&#x2F;authorized_keys中<br>值得注意的是，公匙是可以在多个git服务器中使用的。自己的github仓库、自建服务器git仓库及公司代码gitlab仓库就是使用的是同一个公匙。<h1 id="使用篇"><a href="#使用篇" class="headerlink" title="使用篇"></a>使用篇</h1><h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2>服务器不能直接查看用户所提交的数据,需要使用git clone [对应仓库目录]把数据提取到当前目录(pwd所在地)<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2></li>
</ul>
</li>
</ul>
<ol>
<li>git clone <a href="mailto:&#x67;&#105;&#116;&#x40;&#52;&#x37;&#x2e;&#x31;&#x30;&#x34;&#x2e;&#x31;&#56;&#57;&#x2e;&#x36;&#56;">&#x67;&#105;&#116;&#x40;&#52;&#x37;&#x2e;&#x31;&#x30;&#x34;&#x2e;&#x31;&#56;&#57;&#x2e;&#x36;&#56;</a>:&#x2F;srv&#x2F;yii.git (如果没有加入公匙,也可使用git用户对应的密码)</li>
<li>填写数据</li>
<li>git add -all <a href="https://www.cnblogs.com/skura23/p/5859243.html">add</a> 把新创建的文件提交到暂缓区</li>
<li>git commit -am ‘注释’ 把修改内容保存到缓存区并提交至<strong>本地仓库</strong></li>
<li>git push origin master 把本地仓库提交至服务器</li>
<li>git pull origin master 把服务器内容拉取下来</li>
</ol>
<h1 id="注意篇"><a href="#注意篇" class="headerlink" title="注意篇"></a>注意篇</h1><h2 id="如果发生冲突"><a href="#如果发生冲突" class="headerlink" title="如果发生冲突"></a>如果发生冲突</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 和线上代码保持一致,也就是放弃上一次push之前的所有修改</span><br><span class="line">git fetch -all</span><br><span class="line">git reset --hard</span><br></pre></td></tr></table></figure>
<h2 id="git-clone-提示端口不对"><a href="#git-clone-提示端口不对" class="headerlink" title="git clone 提示端口不对"></a>git clone 提示端口不对</h2><p>可能原因</p>
<ol>
<li>服务器没有安装openssh_server(我被这个折腾了快一个小时)</li>
<li>防火墙拦截(一般不会,默认是22端口)</li>
</ol>
<h2 id="To-squelch-this-message-and-still-keep-the-default-behaviour-set-remote-error-‘receive-denyCurrentBranch’-configuration-variable-to-‘refuse’"><a href="#To-squelch-this-message-and-still-keep-the-default-behaviour-set-remote-error-‘receive-denyCurrentBranch’-configuration-variable-to-‘refuse’" class="headerlink" title="To squelch this message and still keep the default behaviour, set remote: error: ‘receive.denyCurrentBranch’ configuration variable to ‘refuse’."></a>To squelch this message and still keep the default behaviour, set remote: error: ‘receive.denyCurrentBranch’ configuration variable to ‘refuse’.</h2><p>出现这个错误是因为在服务器端错误的使用了git init &#x2F;srv&#x2F;advanced<br>注意,远程仓库初始化需要 <code>ogit init --bare  /srv/advanced</code><br>–bare 创建裸仓库.用于记录版本库历史记录的.git目录下面的文件;而不会包含实际项目源文件的拷贝;所以该版本库不能称为工作目录(working tree);</p>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>bat编程实操：清除jetbrain软件的试用记录</title>
    <url>/posts/50806.html</url>
    <content><![CDATA[<blockquote>
<p>该方法现已失效，就拿来看看BAT的语法吧。</p>
</blockquote>
<p>删除注册器和和配置文件中的一些记录数据就可以啦</p>
<p>可使用批处理</p>
<span id="more"></span>

<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="comment">rem For free evaluation jetbrain again</span></span><br><span class="line"><span class="comment">rem 2020-3-24 by chenmenghui</span></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> year=<span class="variable">%date:~0,4%</span></span><br><span class="line"><span class="built_in">set</span> month=<span class="variable">%date:~5,2%</span></span><br><span class="line"><span class="built_in">set</span> day=<span class="variable">%date:~8,2%</span></span><br><span class="line"><span class="built_in">set</span> /a currentDays=<span class="variable">%year%</span>*<span class="number">365</span>+<span class="variable">%month%</span>*<span class="number">30</span>+<span class="variable">%day%</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> last_date.txt (</span><br><span class="line">    <span class="built_in">set</span> /p lastDays=&lt;last_date.txt</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">set</span> lastDays=<span class="number">0</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">set</span> /a diff=<span class="variable">%currentDays%</span>-<span class="variable">%lastDays%</span></span><br><span class="line">:: 假如距上一次操作大于等于<span class="number">20</span>天</span><br><span class="line"><span class="keyword">if</span> <span class="variable">%diff%</span> <span class="keyword">GEQ</span> <span class="number">20</span> (</span><br><span class="line">    :: 删除相应的配置信息</span><br><span class="line">    <span class="built_in">set</span> folder=C:<span class="variable">%HOMEPATH%</span>\</span><br><span class="line">    <span class="keyword">for</span> /f &quot;delims=&quot; <span class="variable">%%a</span> <span class="keyword">in</span> (&#x27;<span class="built_in">dir</span> /ad /b <span class="variable">!folder!</span>&#x27;) <span class="keyword">do</span> (</span><br><span class="line">        <span class="built_in">set</span> str=<span class="variable">%%a</span></span><br><span class="line">        <span class="built_in">set</span> needDel=<span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> /i &quot;<span class="variable">!str:~0,9!</span>&quot;==&quot;.PhpStorm&quot; <span class="built_in">set</span> needDel=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> /i &quot;<span class="variable">!str:~0,8!</span>&quot;==&quot;.PyCharm&quot; <span class="built_in">set</span> needDel=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable">!needDel!</span> <span class="keyword">EQU</span> <span class="number">1</span> (</span><br><span class="line">            <span class="built_in">rd</span>  &quot;C:<span class="variable">%HOMEPATH%</span>\<span class="variable">!str!</span>\config\eval&quot; /s /q</span><br><span class="line">            <span class="built_in">del</span> &quot;C:<span class="variable">%HOMEPATH%</span>\<span class="variable">!str!</span>\config\options\other.xml&quot; /f /s /q /a</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">    reg delete &quot;HKEY_CURRENT_USER\Software\JavaSoft\Prefs\jetbrains&quot; /f</span><br><span class="line">    :: 记录本次操作时间</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">%currentDays%</span> &gt; last_date.txt</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>其他的就交给开机自启啦。</p>
<p>说实在的，没有代码提示，踩了一堆坑。</p>
]]></content>
      <categories>
        <category>工具</category>
        <category>bat</category>
      </categories>
  </entry>
  <entry>
    <title>开发中遇到mysql的一些零碎的基础知识</title>
    <url>/posts/24109.html</url>
    <content><![CDATA[<h3 id="mysql一行信息中匹配特定的数据"><a href="#mysql一行信息中匹配特定的数据" class="headerlink" title="mysql一行信息中匹配特定的数据"></a>mysql一行信息中匹配特定的数据</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> nick_name REGEXP <span class="string">&#x27;[[:&lt;:]]不觉风止[[:&gt;:]]&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>如果是类似”1,2,3,4”这种,不用正则也可以</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> find_in_set(nick_name, <span class="string">&#x27;不觉风止&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>用like就太繁琐了,需要考虑多种情况</p>
<h3 id="mysql中join之后的on"><a href="#mysql中join之后的on" class="headerlink" title="mysql中join之后的on"></a>mysql中join之后的on</h3><p>看一个sql语句</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  n.cat_id,</span><br><span class="line">  c.cat_id</span><br><span class="line"><span class="keyword">FROM</span> site_news n <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> site_news_category c</span><br><span class="line">    <span class="keyword">ON</span> n.cat_id <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>他的结果集居然是site_news的所有的记录。</p>
<p>把sql语句改成这个样子</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  n.cat_id,</span><br><span class="line">  c.cat_id</span><br><span class="line"><span class="keyword">FROM</span> site_news n <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> site_news_category c</span><br><span class="line">    <span class="keyword">ON</span> n.cat_id <span class="operator">=</span> c.cat_id</span><br><span class="line"><span class="keyword">WHERE</span> c.cat_id <span class="operator">=</span> <span class="number">21</span>;</span><br></pre></td></tr></table></figure>
<p>其结果就符合预期了.</p>
<p><a href="https://blog.csdn.net/qq_33864656/article/details/77838258">百度之后,看到这样的结论</a></p>
<blockquote>
<p>假如是左连接的话，如果左边表的某条记录不符合连接条件，那么它不进行连接，但是仍然留在结果集中（此时右边部分的连接结果为NULL）</p>
</blockquote>
<p>才知道困惑我的原因竟在于此</p>
<p>原来,on只是作为两个表的链接条件而使用的.具体的筛选,还需要使用where处理</p>
<h3 id="mysql中的on、where、having之间的区别"><a href="#mysql中的on、where、having之间的区别" class="headerlink" title="mysql中的on、where、having之间的区别"></a>mysql中的on、where、having之间的区别</h3><p>在select语句中，这三者筛选是有时序的。on最先，where次之，having最后。</p>
<p>在通过两张及两张以上的表链接来返回记录时，首先会产生一个中间的临时表。on是产生临时表所需要的条件。同时，记住上述所说的话。</p>
<p>之后where是在这张临时表的基础之上起作用的。另外where的条件是数据表中原有的字段。</p>
<p>然后就是having在where之后的基础起作用。having对聚合函数及as产生的别名有效</p>
<h3 id="mysql把搜索到的内容展示成一行"><a href="#mysql把搜索到的内容展示成一行" class="headerlink" title="mysql把搜索到的内容展示成一行"></a>mysql把搜索到的内容展示成一行</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> group_concat(key) <span class="keyword">FROM</span> config <span class="keyword">WHERE</span> <span class="keyword">group</span> <span class="operator">=</span> <span class="string">&#x27;points&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="UPDATE把一个表中的字段与另一个表的字段对应上"><a href="#UPDATE把一个表中的字段与另一个表的字段对应上" class="headerlink" title="UPDATE把一个表中的字段与另一个表的字段对应上"></a>UPDATE把一个表中的字段与另一个表的字段对应上</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> store_reply s, base_user c</span><br><span class="line"><span class="keyword">set</span> s.head_img_url <span class="operator">=</span> c.head_img_url</span><br><span class="line"><span class="keyword">where</span> s.user_id <span class="operator">=</span> c.id;</span><br></pre></td></tr></table></figure>

<h3 id="INSERT另外一个表的数据"><a href="#INSERT另外一个表的数据" class="headerlink" title="INSERT另外一个表的数据"></a>INSERT另外一个表的数据</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> favorite_num (rid, favorite_num)</span><br><span class="line">  <span class="keyword">SELECT</span></span><br><span class="line">    rid,</span><br><span class="line">    <span class="built_in">count</span>(id)</span><br><span class="line">  <span class="keyword">FROM</span> store_favorite</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> rid;</span><br></pre></td></tr></table></figure>

<p>两个表的字段顺序对应上就可以了</p>
<h3 id="mysql5-7-mysql5-7默认开启了ONLY-FULL-GROUP-BY-有时需要将其关闭"><a href="#mysql5-7-mysql5-7默认开启了ONLY-FULL-GROUP-BY-有时需要将其关闭" class="headerlink" title="mysql5.7 mysql5.7默认开启了ONLY_FULL_GROUP_BY,有时需要将其关闭"></a>mysql5.7 mysql5.7默认开启了ONLY_FULL_GROUP_BY,有时需要将其关闭</h3><p>SET SESSION sql_mode &#x3D; ‘STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION ‘;</p>
<h3 id="比较两个表中的数据是否一致"><a href="#比较两个表中的数据是否一致" class="headerlink" title="比较两个表中的数据是否一致"></a>比较两个表中的数据是否一致</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,title</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">       <span class="keyword">SELECT</span> id,title</span><br><span class="line">       <span class="keyword">FROM</span> text1</span><br><span class="line">       <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">       <span class="keyword">SELECT</span> id,title</span><br><span class="line">       <span class="keyword">FROM</span> text2</span><br><span class="line">     ) tb1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> id,title</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> id, title</span><br></pre></td></tr></table></figure>

<h3 id="通过另一个表的数据更新当前表"><a href="#通过另一个表的数据更新当前表" class="headerlink" title="通过另一个表的数据更新当前表"></a>通过另一个表的数据更新当前表</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> vip_dynamic_reward_record record, vip_member <span class="keyword">member</span></span><br><span class="line"><span class="keyword">SET</span> record.market <span class="operator">=</span> member.market</span><br><span class="line"><span class="keyword">WHERE</span> record.member_child_id <span class="operator">=</span> member.id;</span><br></pre></td></tr></table></figure>
<p>或者子句的模式</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> vip_dynamic_reward_record</span><br><span class="line"><span class="keyword">SET</span> market <span class="operator">=</span> (<span class="keyword">SELECT</span> market <span class="keyword">FROM</span> vip_member <span class="keyword">WHERE</span> vip_dynamic_reward_record.member_child_id <span class="operator">=</span> vip_member.id);</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">SET</span> average_score <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">avg</span>(score) <span class="keyword">FROM</span> score <span class="keyword">WHERE</span> user_id <span class="operator">=</span> user.id);</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> vip_member</span><br><span class="line"><span class="keyword">SET</span> dynamic_reward <span class="operator">=</span> (<span class="keyword">SELECT</span> ifnull(<span class="built_in">sum</span>(times <span class="operator">*</span> least(left_dynamic_reward, right_dynamic_reward) <span class="operator">*</span> <span class="number">2</span> <span class="operator">*</span> <span class="number">0.03</span> <span class="operator">*</span> <span class="number">0.95</span>), <span class="number">0</span>)</span><br><span class="line">                      <span class="keyword">FROM</span> vip_dynamic_reward</span><br><span class="line">                      <span class="keyword">WHERE</span> vip_member.id <span class="operator">=</span> vip_dynamic_reward.member_id);</span><br></pre></td></tr></table></figure>
<p>令我奇怪的是,这里的set之后居然没有where限定条件也能正常运行</p>
<h3 id="创建一个临时表并把另一个表的数据插入进去"><a href="#创建一个临时表并把另一个表的数据插入进去" class="headerlink" title="创建一个临时表并把另一个表的数据插入进去"></a>创建一个临时表并把另一个表的数据插入进去</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> record1</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> vip_dynamic_reward_record;</span><br></pre></td></tr></table></figure>

<p>原来如此,创建表的时候不一定需要先定义字段再插入数据,可以直接把一个子表的内容插进去的.</p>
<h3 id="mysql中获取一列数据中几栏里的最小值"><a href="#mysql中获取一列数据中几栏里的最小值" class="headerlink" title="mysql中获取一列数据中几栏里的最小值"></a>mysql中获取一列数据中几栏里的最小值</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> `member_id`,least(<span class="built_in">sum</span>(`left_dynamic_reward`), <span class="built_in">sum</span>(`right_dynamic_reward`))<span class="operator">*</span><span class="number">2</span><span class="operator">*</span><span class="number">0.03</span><span class="operator">*</span><span class="number">0.95</span> `dynamic_reward`</span><br><span class="line"><span class="keyword">FROM</span> `vip_dynamic_reward`</span><br><span class="line"><span class="keyword">WHERE</span> `times` <span class="operator">&lt;</span> <span class="number">25</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> `member_id`</span><br></pre></td></tr></table></figure>

<h3 id="MySQL中的if"><a href="#MySQL中的if" class="headerlink" title="MySQL中的if"></a>MySQL中的if</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- IF(expr1,expr2,expr3)</span></span><br><span class="line"><span class="keyword">SELECT</span> if (<span class="literal">true</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- IFNULL(expr1,expr2)</span></span><br><span class="line"><span class="keyword">SELECT</span> ifnull(<span class="keyword">null</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> sex</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> <span class="string">&#x27;男&#x27;</span> </span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;女&#x27;</span> </span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">FROM</span> test;</span><br></pre></td></tr></table></figure>

<h3 id="mysql中的时间"><a href="#mysql中的时间" class="headerlink" title="mysql中的时间"></a>mysql中的时间</h3><ul>
<li>DATE_FORMAT() 函数用于以不同的格式显示日期&#x2F;时间数据。</li>
<li>MySQL 格式化函数 FROM_UNIXTIME()</li>
</ul>
<p>具体内容参考链接<br><a href="https://www.cnblogs.com/dest/p/4205371.html">mysql格式化日期</a></p>
<h3 id="删除表记录后重新设置自增索引值"><a href="#删除表记录后重新设置自增索引值" class="headerlink" title="删除表记录后重新设置自增索引值"></a>删除表记录后重新设置自增索引值</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `system_menu`</span><br><span class="line">    AUTO_INCREMENT <span class="operator">=</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Insert-ignore-into"><a href="#Insert-ignore-into" class="headerlink" title="Insert ignore into"></a>Insert ignore into</h3><p><a href="http://www.mysqltutorial.org/mysql-insert-ignore/">MySQL INSERT IGNORE Statement</a></p>
<p>insert ignore into 指的是插入时忽略错误信息。<br>比如，如果没有「ignore」，一条包含多个数据的插入语句会在报错（如重复索引）后直接退出执行；而有「ignore」，则会忽略报错继续执行其他可执行的部分。</p>
<h3 id="on-duplicate-key-update"><a href="#on-duplicate-key-update" class="headerlink" title="on duplicate key update"></a>on duplicate key update</h3><p>这个就牛逼了，实现了有则更新，无则添加的功能</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> daily_hit_count(<span class="keyword">day</span>, slot, cnt)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="built_in">current_date</span>,</span><br><span class="line">        <span class="built_in">floor</span>(rand() <span class="operator">*</span> <span class="number">10</span>),</span><br><span class="line">        <span class="number">1</span>)</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> cnt <span class="operator">=</span>cnt <span class="operator">+</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h3 id="自定义排序"><a href="#自定义排序" class="headerlink" title="自定义排序"></a>自定义排序</h3><p>之前遇到排序结果是需要自定义的，现在有一个思路</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> `key`,<span class="keyword">CASE</span> `key` <span class="keyword">WHEN</span> <span class="string">&#x27;B&#x27;</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">WHEN</span> <span class="string">&#x27;A&#x27;</span> <span class="keyword">THEN</span> <span class="number">2</span> <span class="keyword">WHEN</span> <span class="string">&#x27;C&#x27;</span> <span class="keyword">THEN</span> <span class="number">4</span> <span class="keyword">WHEN</span> <span class="string">&#x27;D&#x27;</span> <span class="keyword">THEN</span> <span class="number">3</span> <span class="keyword">ELSE</span> <span class="keyword">NULL</span> <span class="keyword">END</span> <span class="keyword">AS</span> new_sort</span><br><span class="line"><span class="keyword">FROM</span> Greatests</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> new_sort;</span><br></pre></td></tr></table></figure>

<h3 id="「-x3D-」和「-x3D-」的区别"><a href="#「-x3D-」和「-x3D-」的区别" class="headerlink" title="「&#x3D;」和「:&#x3D;」的区别"></a>「&#x3D;」和「:&#x3D;」的区别</h3><ul>
<li>「&#x3D;」只有在update或set中才是赋值，其他地方是判断。而判断的结果是1或2</li>
<li>「:&#x3D;」只有赋值</li>
</ul>
<h3 id="UPDATE操作是有顺序的"><a href="#UPDATE操作是有顺序的" class="headerlink" title="UPDATE操作是有顺序的"></a>UPDATE操作是有顺序的</h3><p>第一次见到没有看懂，记下来吧。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> test;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> test</span><br><span class="line">(</span><br><span class="line">    id    <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">    <span class="keyword">start</span> <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">    <span class="keyword">end</span>   <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">) CHARSET utf8</span><br><span class="line">  ENGINE innodb;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test (<span class="keyword">start</span>)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>),</span><br><span class="line">       (<span class="number">2</span>),</span><br><span class="line">       (<span class="number">3</span>),</span><br><span class="line">       (<span class="number">4</span>),</span><br><span class="line">       (<span class="number">5</span>),</span><br><span class="line">       (<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@new</span>_num <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">end</span>   <span class="operator">=</span> <span class="variable">@new</span>_num,</span><br><span class="line">    <span class="keyword">start</span> <span class="operator">=</span> (<span class="variable">@new</span>_num :<span class="operator">=</span> <span class="keyword">start</span>) #<span class="number">1</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p>注意#1的地方。</p>
<p>这几天看那本SQL进阶，因为其中反复强调SQL是无序集合，所以产生了个误区，总感觉update操作时同时进行的。从这个可以看出结果，还是有顺序的，甚而还会受到order by的影响。</p>
<p>其实想想也是，数据表本身就是按一定顺序排列的「文本」结构，怎么可能会没有顺序呢。不仅仅是update，其他操作也是有顺序的。就比如之前常见的排列序号，如果没有顺序，是不可能实现的。</p>
<h3 id="SQL-CALC-FOUND-ROWS"><a href="#SQL-CALC-FOUND-ROWS" class="headerlink" title="SQL_CALC_FOUND_ROWS"></a>SQL_CALC_FOUND_ROWS</h3><p>在经常使用的分页查询中，经常是「select count（*） from 子句」和「子句」这般查两次。使用该函数，就无须这样的操作了。在处理复杂的「子句」时，大大提高了效率。</p>
<h3 id="通过SQL查看表所包含的字段"><a href="#通过SQL查看表所包含的字段" class="headerlink" title="通过SQL查看表所包含的字段"></a>通过SQL查看表所包含的字段</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> COLUMN_NAME</span><br><span class="line"><span class="keyword">FROM</span> information_schema.COLUMNS</span><br><span class="line"><span class="keyword">WHERE</span> TABLE_SCHEMA <span class="operator">=</span> <span class="string">&#x27;库名&#x27;</span></span><br><span class="line">  <span class="keyword">AND</span> TABLE_NAME <span class="operator">=</span> <span class="string">&#x27;表名&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="查询结果按-非零非null、非null、null-进行排序"><a href="#查询结果按-非零非null、非null、null-进行排序" class="headerlink" title="查询结果按 非零非null、非null、null 进行排序"></a>查询结果按 非零非null、非null、null 进行排序</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ISNULL(<span class="keyword">end</span>), <span class="keyword">NOT</span> (<span class="keyword">end</span>), <span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>isnull 值为null，结果为1；值为非null，结果为0。排序结果就会把所有的非null放在前面</p>
<p>not 值为null，结果为null；值为0，结果为1；值为非null非0，结果为0</p>
<p>所以，排序结果就是按 非零非null、非null、null 排序</p>
<h3 id="创建字段时默认值（5-7）"><a href="#创建字段时默认值（5-7）" class="headerlink" title="创建字段时默认值（5.7）"></a>创建字段时默认值（5.7）</h3><p>和之前的版本有些区别。比如</p>
<p><a href="https://blog.csdn.net/weixin_34112030/article/details/92068637">datetime 不能使用「0000-00-00 00:00:00」</a></p>
<p>text 等格式不能有默认值</p>
<p>这些也都是可以通过配置项处理。但也没有必要。</p>
<h3 id="查看表的创建时间"><a href="#查看表的创建时间" class="headerlink" title="查看表的创建时间"></a>查看表的创建时间</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT CREATE_TIME</span><br><span class="line">FROM information_schema.TABLES</span><br><span class="line">WHERE TABLE_SCHEMA = &#x27;tkchina&#x27;</span><br><span class="line">  AND TABLE_NAME = &#x27;actionlog&#x27;;</span><br></pre></td></tr></table></figure>
<p><a href="https://zhuanlan.zhihu.com/p/88342863">information_schema 中的表</a>：</p>
<ul>
<li>CHARACTER_SETS</li>
<li>COLLATIONS</li>
<li>COLLATION_CHARACTER_SET_APPLICABILITY</li>
<li>COLUMNS</li>
<li>COLUMN_PRIVILEGES</li>
<li>ENGINES</li>
<li>EVENTS</li>
<li>FILES</li>
<li>GLOBAL_STATUS</li>
<li>GLOBAL_VARIABLES</li>
<li>KEY_COLUMN_USAGE</li>
<li>OPTIMIZER_TRACE</li>
<li>PARAMETERS</li>
<li>PARTITIONS</li>
<li>PLUGINS</li>
<li>PROCESSLIST</li>
<li>PROFILING</li>
<li>REFERENTIAL_CONSTRAINTS</li>
<li>ROUTINES</li>
<li>SCHEMATA</li>
<li>SCHEMA_PRIVILEGES</li>
<li>SESSION_STATUS</li>
<li>SESSION_VARIABLES</li>
<li>STATISTICS</li>
<li>TABLES</li>
<li>TABLESPACES</li>
<li>TABLE_CONSTRAINTS</li>
<li>TABLE_PRIVILEGES</li>
<li>TRIGGERS</li>
<li>USER_PRIVILEGES</li>
<li>VIEWS</li>
<li>INNODB_LOCKS</li>
<li>INNODB_TRX</li>
<li>INNODB_SYS_DATAFILES</li>
<li>INNODB_FT_CONFIG</li>
<li>INNODB_SYS_VIRTUAL</li>
<li>INNODB_CMP</li>
<li>INNODB_FT_BEING_DELETED</li>
<li>INNODB_CMP_RESET</li>
<li>INNODB_CMP_PER_INDEX</li>
<li>INNODB_CMPMEM_RESET</li>
<li>INNODB_FT_DELETED</li>
<li>INNODB_BUFFER_PAGE_LRU</li>
<li>INNODB_LOCK_WAITS</li>
<li>INNODB_TEMP_TABLE_INFO</li>
<li>INNODB_SYS_INDEXES</li>
<li>INNODB_SYS_TABLES</li>
<li>INNODB_SYS_FIELDS</li>
<li>INNODB_CMP_PER_INDEX_RESET</li>
<li>INNODB_BUFFER_PAGE</li>
<li>INNODB_FT_DEFAULT_STOPWORD</li>
<li>INNODB_FT_INDEX_TABLE</li>
<li>INNODB_FT_INDEX_CACHE</li>
<li>INNODB_SYS_TABLESPACES</li>
<li>INNODB_METRICS</li>
<li>INNODB_SYS_FOREIGN_COLS</li>
<li>INNODB_CMPMEM</li>
<li>INNODB_BUFFER_POOL_STATS</li>
<li>INNODB_SYS_COLUMNS</li>
<li>INNODB_SYS_FOREIGN</li>
<li>INNODB_SYS_TABLESTATS</li>
</ul>
<p>可以很轻松的查找 表、字段、视图、触发器、存储过程等相关信息。</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>命令行使用tree打印文件树</title>
    <url>/posts/36331.html</url>
    <content><![CDATA[<p>环境win7<br>直接在命令行进入到对应文件夹中，使用tree命令就可以看到该文件夹下所有的文件夹了。<br>如果同时想看到文件，则使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tree \f</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<p>第一次使用「\」，有些奇怪，就记录下来吧。</p>
]]></content>
      <categories>
        <category>工具</category>
        <category>bat</category>
      </categories>
  </entry>
  <entry>
    <title>排序 杂项</title>
    <url>/posts/4debb880.html</url>
    <content><![CDATA[<p>get_object_vars()</p>
<p>get_class_methods()</p>
<p>get_class_vars()</p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 配置相关</title>
    <url>/posts/28389.html</url>
    <content><![CDATA[<h1 id="Warning-Unknown-Input-variables-exceeded-1000-To-increase-the-limit-chang"><a href="#Warning-Unknown-Input-variables-exceeded-1000-To-increase-the-limit-chang" class="headerlink" title="Warning: Unknown: Input variables exceeded 1000. To increase the limit chang"></a>Warning: Unknown: Input variables exceeded 1000. To increase the limit chang</h1><p>修改 php.ini 中的 max_input_vars</p>
<h1 id="Call-to-undefined-function-socket-create"><a href="#Call-to-undefined-function-socket-create" class="headerlink" title="Call to undefined function socket_create()"></a>Call to undefined function socket_create()</h1><p>配置 php.ini 中的 sockets</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>配置</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>配置</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP5.3不支持array_column</title>
    <url>/posts/54755.html</url>
    <content><![CDATA[<p>公司服务器php是老版的,不支持array_column.但这个函数功能还是挺实用的,自己在处理些订单数组时经常用到.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">function_exists</span>(<span class="string">&#x27;array_column&#x27;</span>)) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">array_column</span>(<span class="params"><span class="variable">$ori_array</span>, <span class="variable">$column</span>, <span class="variable">$index_key</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$new_array</span> = [];</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$index_key</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">array_walk</span>(<span class="variable">$ori_array</span>, function (<span class="variable">$value</span>) <span class="keyword">use</span> (&amp;$<span class="title">new_array</span>, $<span class="title">column</span>, $<span class="title">index_key</span>) &#123;</span><br><span class="line">                $<span class="title">new_array</span>[$<span class="title">value</span>[$<span class="title">index_key</span>]] = $<span class="title">value</span>[$<span class="title">column</span>];</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_ invoke__">array_walk</span>(<span class="variable">$ori_array</span>, function (<span class="variable">$value</span>) <span class="keyword">use</span> (&amp;$<span class="title">new_array</span>, $<span class="title">column</span>) &#123;</span><br><span class="line">                $<span class="title">new_array</span>[] = $<span class="title">value</span>[$<span class="title">column</span>];</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$new_array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP中的时间</title>
    <url>/posts/24.html</url>
    <content><![CDATA[<h1 id="strtotime"><a href="#strtotime" class="headerlink" title="strtotime()"></a>strtotime()</h1><p><a href="https://blog.csdn.net/ihelloworld/article/details/7699730?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.compare&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.compare">php 获取时间(今天,昨天,三天内,本周,上周,本月,三年内,半年内,一年内,三年内)</a></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;DATE_FORMAT&#x27;</span>, <span class="string">&#x27;Y-m-d&#x27;</span>);</span><br><span class="line"><span class="variable">$year</span> = <span class="number">2020</span>;</span><br><span class="line"><span class="variable">$baseStamp</span> = <span class="title function_ invoke__">strtotime</span>(<span class="variable">$year</span> . <span class="string">&quot;-01-01&quot;</span>);</span><br><span class="line"><span class="variable">$weekNo</span> = <span class="number">31</span>;</span><br><span class="line"><span class="variable">$days</span> = (<span class="variable">$weekNo</span> - <span class="number">1</span>) * <span class="number">7</span>;</span><br><span class="line"><span class="variable">$resWeek</span>[] = <span class="title function_ invoke__">date</span>(DATE_FORMAT, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$days&#125;</span> day Monday&quot;</span>, <span class="variable">$baseStamp</span>));</span><br><span class="line"><span class="variable">$resWeek</span>[] = <span class="title function_ invoke__">date</span>(DATE_FORMAT, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$days&#125;</span> day tuesday&quot;</span>, <span class="variable">$baseStamp</span>));</span><br><span class="line"><span class="variable">$resWeek</span>[] = <span class="title function_ invoke__">date</span>(DATE_FORMAT, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$days&#125;</span> day wednesday&quot;</span>, <span class="variable">$baseStamp</span>));</span><br><span class="line"><span class="variable">$resWeek</span>[] = <span class="title function_ invoke__">date</span>(DATE_FORMAT, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$days&#125;</span> day thursday&quot;</span>, <span class="variable">$baseStamp</span>));</span><br><span class="line"><span class="variable">$resWeek</span>[] = <span class="title function_ invoke__">date</span>(DATE_FORMAT, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$days&#125;</span> day friday&quot;</span>, <span class="variable">$baseStamp</span>));</span><br><span class="line"><span class="variable">$resWeek</span>[] = <span class="title function_ invoke__">date</span>(DATE_FORMAT, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$days&#125;</span> day saturday&quot;</span>, <span class="variable">$baseStamp</span>));</span><br><span class="line"><span class="variable">$resWeek</span>[] = <span class="title function_ invoke__">date</span>(DATE_FORMAT, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$days&#125;</span> day sunday&quot;</span>, <span class="variable">$baseStamp</span>));</span><br></pre></td></tr></table></figure>

<p>注意：strtotim 的「本周」指的是从今天开始算的后七天内，比如上述代码的周二结果是2020-08-04而不是2020-07-28。搭配「last」、「next」使用效果不错。</p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP7.4 属性的类型提示</title>
    <url>/posts/40647.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> ?<span class="keyword">string</span> <span class="variable">$value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">bar</span> <span class="keyword">extends</span> <span class="title">foo</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">new</span> <span class="title function_ invoke__">bar</span>())-&gt;<span class="title function_ invoke__">test</span>();</span><br></pre></td></tr></table></figure>

<p>php7会报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Typed property foo::$value must not be accessed before initialization</span><br></pre></td></tr></table></figure>

<p>即 $value 有类型限制，但是没有给初始值。</p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP允许跨域</title>
    <url>/posts/13150.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Access-Control-Allow-Origin:*&#x27;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP创建文件夹和文件</title>
    <url>/posts/21656.html</url>
    <content><![CDATA[<p>其实也就是用到了mkdir这个功能.至于创建文件,用的最多的其实是file_put_contents</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$targetPath</span> = <span class="string">&#x27;./data/&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$targetPath</span>)) &#123;</span><br><span class="line">    <span class="variable">$dirs</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;/&#x27;</span> , <span class="variable">$targetPath</span>);</span><br><span class="line">    <span class="variable">$count</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$dirs</span>);</span><br><span class="line">    <span class="variable">$path</span> = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; ++<span class="variable">$i</span>) &#123;</span><br><span class="line">        <span class="variable">$path</span> .= <span class="string">&#x27;/&#x27;</span> . <span class="variable">$dirs</span>[<span class="variable">$i</span>];</span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">is_dir</span>(<span class="variable">$path</span>))&#123;<span class="comment">//不是目录</span></span><br><span class="line">            <span class="keyword">if</span>(!<span class="title function_ invoke__">mkdir</span>(<span class="variable">$path</span>,<span class="number">0755</span>))&#123; <span class="comment">// 其实mkdir可以递归建立文件夹,如下</span></span><br><span class="line">                <span class="comment">//todo</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">is_file</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world/test.txt&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$d</span> = <span class="title function_ invoke__">mkdir</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world&#x27;</span>, <span class="number">0755</span>, <span class="literal">true</span>); <span class="comment">// 第三个参数即是否递归地创建目录</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$handle</span> = <span class="title function_ invoke__">fopen</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world/test.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>); <span class="comment">// 创建文件</span></span><br><span class="line">    <span class="title function_ invoke__">fclose</span>(<span class="variable">$handle</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码 文件</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP导出excel最简单的方案</title>
    <url>/posts/2297.html</url>
    <content><![CDATA[<p>就是拼接字符串,类似于csv格式.不过需要注意header头</p>
<p>拼接成如下格式的字符串</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(id)\t(title)\t(content)\t(status)\t\n</span><br><span class="line">(1)\t(title)\t\(content)\t(1)\t\n</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type:application/vnd.ms-excel&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Disposition:attachment;filename=test.xls&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$head</span> = [<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;content&#x27;</span>, <span class="string">&#x27;status&#x27;</span>];</span><br><span class="line"><span class="variable">$body</span> = [</span><br><span class="line">    [<span class="number">1</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;content&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;content&#x27;</span>, <span class="number">2</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;content&#x27;</span>, <span class="number">3</span>]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">array_unshift</span>(<span class="variable">$body</span>, <span class="variable">$head</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$table</span> = <span class="title function_ invoke__">array_map</span>(function (<span class="variable">$row</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="title function_ invoke__">implode</span>(<span class="string">&quot;\t&quot;</span>, <span class="variable">$row</span>) ;</span><br><span class="line">&#125;, <span class="variable">$body</span>);</span><br><span class="line"><span class="variable">$table</span> = <span class="title function_ invoke__">implode</span>(<span class="string">&quot;\n&quot;</span>, <span class="variable">$table</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">iconv</span>(<span class="string">&#x27;utf-8&#x27;</span>, <span class="string">&#x27;gbk//TRANSLIT&#x27;</span>, <span class="variable">$table</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>CURL操作</title>
    <url>/posts/53424.html</url>
    <content><![CDATA[<p>其实也就是简单的封装，再一个就是继承当前浏览器的header，主要是Cookie和Referer。这两个经常会被服务端做过滤之类的处理。</p>
<p>刚刚犯的错误，QueryCurl::_setData()，其中「CURLOPT_POSTFIELDS」只是post传值。</p>
<p>工作中遇到一个问题，就是执行这个脚本的时候，进行了诸如退出这样修改Session的操作，导致一些因session不一致产生了业务上的错误。这里最好的解决方式是操作session、cookie这样的操作时，不要使用同一个浏览器。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QueryCurl</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$sTargetHost</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$sParams</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$rCurlOption</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$mCurlResult</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$sCurlContent</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$mCurlRequestHeads</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$mCurlResponseHeads</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$bPost</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">DEBUG</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get data through get</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $sUrl</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $aParams</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getQuery</span>(<span class="params"><span class="variable">$sUrl</span>, <span class="variable">$aParams</span> = []</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sTargetHost = <span class="variable">$sUrl</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sParams = <span class="title function_ invoke__">http_build_query</span>(<span class="variable">$aParams</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;bPost = <span class="literal">false</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">_run</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;sCurlContent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get data through post</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $sUrl</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $aParams</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">postQuery</span>(<span class="params"><span class="variable">$sUrl</span>, <span class="variable">$aParams</span> = []</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sTargetHost = <span class="variable">$sUrl</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sParams = <span class="title function_ invoke__">http_build_query</span>(<span class="variable">$aParams</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;bPost = <span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">_run</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;sCurlContent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">_inheritHeader</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$aHeader</span> = [];</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$_SERVER</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">stripos</span>(<span class="variable">$key</span>, <span class="string">&#x27;HTTP&#x27;</span>) !== <span class="literal">false</span>) &#123;</span><br><span class="line">                <span class="variable">$key</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$key</span>, <span class="number">5</span>);</span><br><span class="line">                <span class="variable">$aHeader</span>[<span class="variable">$key</span>] = <span class="variable">$key</span> . <span class="string">&#x27;:&#x27;</span> . <span class="variable">$value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable constant_">DEBUG</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;test_head.txt&#x27;</span>, <span class="title function_ invoke__">var_export</span>(<span class="variable">$aHeader</span>, <span class="number">1</span>) . <span class="string">&quot;\n&quot;</span>, FILE_APPEND);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_HTTPHEADER, <span class="variable">$aHeader</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">_setData</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;bPost) &#123;</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_CUSTOMREQUEST, <span class="string">&#x27;POST&#x27;</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_POST, <span class="literal">true</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_POSTFIELDS, <span class="variable">$this</span>-&gt;sParams);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;sParams) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">false</span> === <span class="title function_ invoke__">strpos</span>(<span class="variable">$this</span>-&gt;sTargetHost, <span class="string">&#x27;?&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="variable language_">$this</span>-&gt;sTargetHost .= <span class="string">&#x27;?&#x27;</span> . <span class="variable language_">$this</span>-&gt;sParams;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable language_">$this</span>-&gt;sTargetHost .= <span class="string">&#x27;&amp;&#x27;</span> . <span class="variable language_">$this</span>-&gt;sParams;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">_run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;rCurlOption = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">_setData</span>();</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">_inheritHeader</span>();</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_URL, <span class="variable">$this</span>-&gt;sTargetHost);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_SSL_VERIFYPEER, <span class="number">0</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_SSL_VERIFYHOST, <span class="number">0</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_USERAGENT, <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>]);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_FOLLOWLOCATION, <span class="number">1</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_AUTOREFERER, <span class="number">1</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_TIMEOUT, <span class="number">0</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_HEADER, <span class="number">1</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">            <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLINFO_HEADER_OUT, <span class="literal">true</span>);</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;mCurlResult = <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$this</span>-&gt;rCurlOption);</span><br><span class="line">            <span class="variable">$errno</span> = <span class="title function_ invoke__">curl_errno</span>(<span class="variable">$this</span>-&gt;rCurlOption);</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$errno</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="variable">$errno</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;mCurlRequestHeads = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLINFO_HEADER_OUT);</span><br><span class="line">            <span class="variable">$response_heads_size</span> = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$this</span>-&gt;rCurlOption, CURLINFO_HEADER_SIZE);</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;mCurlResponseHeads = <span class="variable language_">$this</span>-&gt;mCurlResponseHeads = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;mCurlResult, <span class="number">0</span>, <span class="variable">$response_heads_size</span>);</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;sCurlContent = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;mCurlResult, <span class="variable">$response_heads_size</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable constant_">DEBUG</span>) &#123;</span><br><span class="line">                <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;head.txt&#x27;</span>, <span class="variable">$this</span>-&gt;mCurlRequestHeads . <span class="string">&quot;\n&quot;</span>, FILE_APPEND);</span><br><span class="line">                <span class="variable">$rand</span> = <span class="title function_ invoke__">time</span>();</span><br><span class="line">                <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&quot;result_<span class="subst">&#123;$rand&#125;</span>.txt&quot;</span>, <span class="variable">$this</span>-&gt;mCurlResult);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">curl_close</span>(<span class="variable">$this</span>-&gt;rCurlOption);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$exception</span>) &#123;</span><br><span class="line">            <span class="comment">// logs</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable constant_">DEBUG</span>) &#123;</span><br><span class="line">                <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;./curl_error_log.txt&#x27;</span>, <span class="title function_ invoke__">var_export</span>(<span class="variable">$exception</span>-&gt;<span class="title function_ invoke__">getMessage</span>(), <span class="number">1</span>), FILE_APPEND);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP把文件格式转化成utf8</title>
    <url>/posts/3148.html</url>
    <content><![CDATA[<p>看《SQL进阶》，附带的sql文件居然都是GBK格式，中文全是乱码，于是就这样搞定吧。其实就是那个批量重命名的改版。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">str_to_utf8</span> (<span class="params"><span class="variable">$str</span> = <span class="string">&#x27;&#x27;</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$current_encode</span> = <span class="title function_ invoke__">mb_detect_encoding</span>(<span class="variable">$str</span>, <span class="keyword">array</span>(<span class="string">&quot;ASCII&quot;</span>,<span class="string">&quot;GB2312&quot;</span>,<span class="string">&quot;GBK&quot;</span>,<span class="string">&#x27;BIG5&#x27;</span>,<span class="string">&#x27;UTF-8&#x27;</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">mb_convert_encoding</span>(<span class="variable">$str</span>, <span class="string">&#x27;UTF-8&#x27;</span>, <span class="variable">$current_encode</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deep</span>(<span class="params"><span class="variable">$dir</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">        <span class="variable">$current_files</span> = <span class="title function_ invoke__">scandir</span>(<span class="variable">$dir</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$current_files</span> <span class="keyword">as</span> <span class="variable">$item</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$item</span> != <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$item</span> != <span class="string">&#x27;..&#x27;</span> &amp;&amp; <span class="variable">$item</span> != <span class="string">&#x27;./idea&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$current_file</span> = <span class="variable">$dir</span> . <span class="string">&#x27;/&#x27;</span> . <span class="variable">$item</span>;</span><br><span class="line">                <span class="title function_ invoke__">deep</span>(<span class="variable">$current_file</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$fileTxt</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$dir</span>);</span><br><span class="line">        <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$dir</span>, <span class="title function_ invoke__">str_to_utf8</span>(<span class="variable">$fileTxt</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">deep</span>(<span class="string">&#x27;./&#x27;</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP批量重命名文件</title>
    <url>/posts/35012.html</url>
    <content><![CDATA[<p>看《SQL进阶》，只是随书附带代码后缀居然是txt，看着不爽，就想批量重命名成sql。<br>没有什么难点，但是自己长时间不写类似的代码居然不能第一时间搞定。什么时候自己变得那么菜了。<br>好吧，一点一点dump试出来的，实在是难受。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deep</span>(<span class="params"><span class="variable">$dir</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">        <span class="variable">$current_files</span> = ****<span class="title function_ invoke__">scandir</span>(<span class="variable">$dir</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$current_files</span> <span class="keyword">as</span> <span class="variable">$item</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$item</span> != <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$item</span> != <span class="string">&#x27;..&#x27;</span> &amp;&amp; <span class="variable">$item</span> != <span class="string">&#x27;./idea&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$current_file</span> = <span class="variable">$dir</span> . <span class="string">&#x27;/&#x27;</span> . <span class="variable">$item</span>;</span><br><span class="line">                <span class="title function_ invoke__">deep</span>(<span class="variable">$current_file</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$new_name</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/txt$/&#x27;</span>, <span class="string">&#x27;sql&#x27;</span>, <span class="variable">$dir</span>)) &#123;</span><br><span class="line">            <span class="title function_ invoke__">rename</span>(<span class="variable">$dir</span>, <span class="variable">$new_name</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">deep</span>(<span class="string">&#x27;./&#x27;</span>);;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP文件操作</title>
    <url>/posts/7145.html</url>
    <content><![CDATA[<h3 id="创建多级文件"><a href="#创建多级文件" class="headerlink" title="创建多级文件"></a>创建多级文件</h3><p>其实也就是用到了mkdir这个功能.至于创建文件,用的最多的其实是file_put_contents</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">is_file</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world/test.txt&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$d</span> = <span class="title function_ invoke__">mkdir</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world&#x27;</span>, <span class="number">0755</span>, <span class="literal">true</span>); <span class="comment">// 第三个参数即是否递归地创建目录</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$handle</span> = <span class="title function_ invoke__">fopen</span>(<span class="keyword">__DIR__</span>.<span class="string">&#x27;/test/hello/world/test.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>); <span class="comment">// 创建文件</span></span><br><span class="line">    <span class="title function_ invoke__">fclose</span>(<span class="variable">$handle</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDir</span>(<span class="params"><span class="variable">$dir</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
        <tag>文件</tag>
      </tags>
  </entry>
  <entry>
    <title>Web相关</title>
    <url>/posts/39739.html</url>
    <content><![CDATA[<p>parse_str与http_build_query  </p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>Yii2 bindParam.</title>
    <url>/posts/35819.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$comment</span> = <span class="title class_">Yii</span>::<span class="variable">$app</span>-&gt;db-&gt;<span class="title function_ invoke__">createCommand</span>(<span class="variable">$insert</span>);</span><br><span class="line"><span class="variable">$comment</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;sid&#x27;</span>, <span class="variable">$sid</span>, \PDO::<span class="variable constant_">PARAM_INT</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;score&#x27;</span>, <span class="variable">$score</span>, \PDO::<span class="variable constant_">PARAM_STR</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">100</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="variable">$sid</span> = <span class="title function_ invoke__">mt_rand</span>(<span class="number">1</span>, <span class="number">9</span>);</span><br><span class="line">    <span class="variable">$score</span> = <span class="title function_ invoke__">mt_rand</span>(<span class="number">6000</span>, <span class="number">9999</span>) / <span class="number">100</span>;</span><br><span class="line">    <span class="variable">$comment</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意 bindParam 的第三个参数。如果不写就没有赋值（php7.4、yii2.25）。</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>Yii</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>Yii</tag>
      </tags>
  </entry>
  <entry>
    <title>composer添加自己的命名空间</title>
    <url>/posts/26518.html</url>
    <content><![CDATA[<p>这个其实读文档应该就可以了，只是自己一直以来没有这么做过。好吧，昨儿遇见了，就在此说一下吧。</p>
<p>添加的composer.json中的autoload中，像这样</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;valen/simple_test&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;authors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Valen&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chenmenghui_008@163.com&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autoload&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;psr-4&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;app\\&quot;</span><span class="punctuation">:</span> <span class="string">&quot;app/&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;core\\&quot;</span><span class="punctuation">:</span> <span class="string">&quot;core/&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;common/function/dump.php&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;common/config/config.php&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;require&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ext-mysqli&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ext-json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>其中prs-4就是自己的命名空间，而files指的就是直接引用的文件<br>然后运行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">composer dumpautoload</span><br></pre></td></tr></table></figure>
<p>该命令将composer.json中的autoload部分更新到相应的命名空间配置文件中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">├─vendor</span><br><span class="line">│  │  autoload.php</span><br><span class="line">│  │</span><br><span class="line">│  └─composer</span><br><span class="line">│          autoload_files.php</span><br><span class="line">│          autoload_psr4.php</span><br></pre></td></tr></table></figure>
<p>比如这两个文件就保存上述json中autoload配置</p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>composer</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP无限极分类由子集查出所有父级的递归处理方法</title>
    <url>/posts/17514.html</url>
    <content><![CDATA[<p>核心代码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$main</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$child_id</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$records</span>, &amp;<span class="variable">$main</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$list</span> = [];</span><br><span class="line">    <span class="variable">$child_list</span> = <span class="title function_ invoke__">array_filter</span>(<span class="variable">$records</span>, function (<span class="variable">$value</span>) <span class="keyword">use</span> ($<span class="title">child_id</span>) &#123;</span><br><span class="line">        <span class="title">return</span> <span class="title">in_array</span>($<span class="title">value</span>[&#x27;<span class="title">id</span>&#x27;], $<span class="title">child_id</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable">$parent_id</span> = <span class="title function_ invoke__">array_unique</span>(<span class="title function_ invoke__">array_column</span>(<span class="variable">$child_list</span>, <span class="string">&#x27;pid&#x27;</span>));</span><br><span class="line">    <span class="variable">$list</span> += <span class="variable">$child_list</span>;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="number">0</span>] == <span class="variable">$parent_id</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$list</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$main</span>(<span class="variable">$parent_id</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>调用方式</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$records</span> = [</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">0</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">2</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">0</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">3</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">0</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">4</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">3</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">5</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">4</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">6</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">5</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">7</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">1</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">8</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">2</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">9</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">7</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>  =&gt; <span class="number">10</span>,</span><br><span class="line">        <span class="string">&#x27;pid&#x27;</span> =&gt; <span class="number">7</span>,</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="variable">$list</span> = <span class="variable">$main</span>([<span class="number">6</span>, <span class="number">10</span>]);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
        <category>实用代码</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>composer切换源</title>
    <url>/posts/22390.html</url>
    <content><![CDATA[<p>想composer个东西下来，切换了国内源，还是卡。</p>
<p>然后百度还有其他源可选，比如这个，阿里的，就快好多了</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>composer</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP获取真实的ip地址</title>
    <url>/posts/4019.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取真实ip</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_client_ip</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>) &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>), <span class="string">&#x27;unknown&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$ip</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;HTTP_CLIENT_IP&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>) &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>), <span class="string">&#x27;unknown&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$ip</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>) &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>), <span class="string">&#x27;unknown&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$ip</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]) &amp;&amp; <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>] &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>], <span class="string">&#x27;unknown&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$ip</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/[\d\.]&#123;7,15&#125;/&#x27;</span>, <span class="variable">$ip</span>, <span class="variable">$matches</span>) ? <span class="variable">$matches</span> [<span class="number">0</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>ob 系列</title>
    <url>/posts/29007.html</url>
    <content><![CDATA[<p>这个东西用的比较少，每每都是用到哪个查那个。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">ob_start</span>();</span><br><span class="line"><span class="comment">//ob_implicit_flush(true);</span></span><br><span class="line"><span class="title function_ invoke__">ob_implicit_flush</span>(<span class="literal">false</span>); <span class="comment">// 是否立刻刷新</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;world&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">ob_get_contents</span>());</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">ob_get_contents</span>());</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ob_start()</p>
</li>
<li><p>ob_f</p>
</li>
<li><p>ob_get_clean()</p>
</li>
<li><p>ob_get_contents()</p>
</li>
</ul>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>基础知识</tag>
        <tag>缓存</tag>
      </tags>
  </entry>
  <entry>
    <title>spl_autoload_register 参数</title>
    <url>/posts/25108.html</url>
    <content><![CDATA[<blockquote>
<p>function spl_autoload_register ($autoload_function &#x3D; null, $throw &#x3D; true, $prepend &#x3D; false) bool</p>
</blockquote>
<p>将函数注册到SPL __autoload函数队列中。如果该队列中的函数尚未激活，则激活它们。</p>
<ul>
<li>$throw<ul>
<li>此参数设置了 autoload_function 无法成功注册时， spl_autoload_register()是否抛出异常。</li>
</ul>
</li>
<li>$prepend<ul>
<li>如果是 true，spl_autoload_register() 会添加函数到队列之首，而不是队列尾部。</li>
</ul>
</li>
</ul>
<p>具体运行下述代码可以很容易的区分。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a1</span>(<span class="params"><span class="variable">$className</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a2</span>(<span class="params"><span class="variable">$className</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a3</span>(<span class="params"><span class="variable">$className</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">spl_autoload_register</span>(<span class="string">&#x27;a1&#x27;</span>, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="title function_ invoke__">spl_autoload_register</span>(<span class="string">&#x27;a2&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="title function_ invoke__">spl_autoload_register</span>(<span class="string">&#x27;a3&#x27;</span>, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="title function_ invoke__">spl_autoload_register</span>(<span class="string">&#x27;a4&#x27;</span>, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="title function_ invoke__">spl_autoload_register</span>(<span class="string">&#x27;a5&#x27;</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Test</span>();</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>实际开发中遇到的一些实用却不常见的函数/功能等</title>
    <url>/posts/4870.html</url>
    <content><![CDATA[<h3 id="接口Countable"><a href="#接口Countable" class="headerlink" title="接口Countable"></a>接口Countable</h3><p><a href="https://www.php.net/manual/zh/class.countable.php">类实现 Countable 可被用于 count() 函数. </a></p>
<p>如</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountMe</span> <span class="keyword">implements</span> \<span class="title">Countable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$_myCount</span> = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;_myCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$countable</span> = <span class="keyword">new</span> <span class="title class_">CountMe</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">count</span>(<span class="variable">$countable</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="方法debug-backtrace"><a href="#方法debug-backtrace" class="headerlink" title="方法debug_backtrace"></a>方法debug_backtrace</h3><p><a href="https://www.php.net/manual/zh/function.debug-backtrace.php">产生一条回溯跟踪(backtrace)</a></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// filename: /tmp/a.php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a_test</span>(<span class="params"><span class="variable">$str</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;\nHi: <span class="subst">$str</span>&quot;</span>;</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">debug_backtrace</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">a_test</span>(<span class="string">&#x27;friend&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// filename: /tmp/b.php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">&#x27;/tmp/a.php&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// execute result</span></span><br><span class="line"></span><br><span class="line">Hi: <span class="title function_ invoke__">friendarray</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">    [<span class="string">&quot;file&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;F:\test\tmp\a.php&quot;</span></span><br><span class="line">    [<span class="string">&quot;line&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">10</span>)</span><br><span class="line">    [<span class="string">&quot;function&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;a_test&quot;</span></span><br><span class="line">    [<span class="string">&quot;args&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">      [<span class="number">0</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;friend&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">    [<span class="string">&quot;file&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;F:\test\tmp\b.php&quot;</span></span><br><span class="line">    [<span class="string">&quot;line&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">3</span>)</span><br><span class="line">    [<span class="string">&quot;args&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">      [<span class="number">0</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;F:\test\tmp\a.php&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="string">&quot;function&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">12</span>) <span class="string">&quot;include_once&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Process finished with <span class="keyword">exit</span> code <span class="number">0</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>排序 忽略大小写</title>
    <url>/posts/12bdb440.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">sort</span>(<span class="variable">$arr</span>, SORT_FLAG_CASE | SORT_NATURAL);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>无限极分类引用处理</title>
    <url>/posts/51780.html</url>
    <content><![CDATA[<p><a href="https://blog.csdn.net/tiansidehao/article/details/79025359">参考</a></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$records</span> = <span class="title function_ invoke__">array_combine</span>(<span class="title function_ invoke__">array_column</span>(<span class="variable">$records</span>, <span class="string">&#x27;id&#x27;</span>), <span class="variable">$records</span>); <span class="comment">// 把数组中的key和其中的id对应上</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$records</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; &amp;<span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$records</span>[<span class="variable">$value</span>[<span class="string">&#x27;pid&#x27;</span>]])) &#123;</span><br><span class="line">        <span class="variable">$records</span>[<span class="variable">$value</span>[<span class="string">&#x27;pid&#x27;</span>]][<span class="string">&#x27;child&#x27;</span>][] = &amp;<span class="variable">$value</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$tree</span>[] = &amp;<span class="variable">$value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$records</span> = <span class="title function_ invoke__">array_values</span>(<span class="variable">$tree</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>自动测试</title>
    <url>/posts/59180.html</url>
    <content><![CDATA[<p>behat大致就是把自然语言转化成代码。<br>但其实这个「自然语言」也是实现编辑好的方法。<br>比如在.feature中使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Feature: Search</span><br><span class="line"></span><br><span class="line">  Scenario: Searching for a page that does exist</span><br><span class="line">    Given open &quot;https://www.baidu.com&quot;</span><br></pre></td></tr></table></figure>
<p>其实就是看Given中的open，就需要在FeatureContext.php文件定义好这个方法</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Given</span> open :arg1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">open</span>(<span class="params"><span class="variable">$arg1</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;feature.txt&#x27;</span>, <span class="title function_ invoke__">var_export</span>(<span class="variable">$arg1</span>, <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，这其中对应方法其实是包含在注释中的。方法名反而不重要。比如可以这个样子</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Given</span> open :param</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"><span class="variable">$arg1</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;feature.txt&#x27;</span>, <span class="title function_ invoke__">var_export</span>(<span class="variable">$arg1</span>, <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，这不是什么重要的东西，即便不知道，在开发的过程中稍稍试一试便知道了。</p>
<p>注意注释的三个部分</p>
<table>
<thead>
<tr>
<th>注释部分</th>
<th>对应.feature中Given open “<a href="https://www.baidu.com&quot;的？">https://www.baidu.com&quot;的？</a></th>
</tr>
</thead>
<tbody><tr>
<td>@Given</td>
<td>Given</td>
</tr>
<tr>
<td>open</td>
<td>操作open</td>
</tr>
<tr>
<td>:param</td>
<td>引号中的内容</td>
</tr>
</tbody></table>
<p>设置好对应在FeatureContext.php中的方法，就可以操作selenium、phpunit之类的工具了。</p>
<p>至于那些类，应该都可以在composer找得到。</p>
<p>另外，再次夸一下phpstorm，都有现成的支持behat的插件，默认已经安装好了。<br>也就意味着，这是个使用频率极高的功能，我居然连听都没听过~~~</p>
<p>后记：</p>
<p>说起来也不知道自己是怎么看的，不会查找自己需要的资料。然后三天时间，终于大致知道behat的概念了。<br>花了那么长的时间，也就收获了这么少的东西，我都有些过意不去。</p>
<p>昨天晚上，前同事（前端）问我打印机的是。我就甩手一个网站，然后一个小时多点，她那边的后台就搞定了。这个速度也实在是太快了。</p>
<p>想到以前我调试支付宝支付的时候，硬生生的花了一个多星期，还没有搞定——就是那个密匙。说起来也太不应该了。之后解决的办法也很简单，就是直接问支付宝的客服~~~</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>细碎知识</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>细碎知识</tag>
        <tag>behat</tag>
      </tags>
  </entry>
  <entry>
    <title>php数组array_merge和+的区别</title>
    <url>/posts/21700.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">compare_array_merge_and_plus</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$a1</span> = [<span class="string">&quot;1&quot;</span> =&gt; <span class="string">&quot;red&quot;</span>, <span class="string">&quot;6&quot;</span> =&gt; <span class="string">&quot;green&quot;</span>];</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$a2</span> = [<span class="string">&quot;a&quot;</span> =&gt; <span class="string">&quot;red&quot;</span>, <span class="string">&quot;b&quot;</span> =&gt; <span class="string">&quot;green&quot;</span>];</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$b1</span> = [<span class="string">&quot;3&quot;</span> =&gt; <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;6&quot;</span> =&gt; <span class="string">&quot;yellow&quot;</span>];</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$b2</span> = [<span class="string">&quot;c&quot;</span> =&gt; <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;b&quot;</span> =&gt; <span class="string">&quot;yellow&quot;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$result</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">print_r</span>(<span class="variable">$this</span>-&gt;result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * array_merge</span></span><br><span class="line"><span class="comment">     * 索引数组直接合并并且索引会重排</span></span><br><span class="line"><span class="comment">     * 关联数组同键名会后者替换前者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">merge</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;result[<span class="string">&#x27;no&#x27;</span>] = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$this</span>-&gt;a1, <span class="variable">$this</span>-&gt;b1);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;result[<span class="string">&#x27;re&#x27;</span>] = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$this</span>-&gt;a2, <span class="variable">$this</span>-&gt;b2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * plus</span></span><br><span class="line"><span class="comment">     * 索引数组和关联数组都是同键名前者替换后者，</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">plus</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;result[<span class="string">&#x27;no&#x27;</span>] = (<span class="variable language_">$this</span>-&gt;a1 + <span class="variable language_">$this</span>-&gt;b1);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;result[<span class="string">&#x27;re&#x27;</span>] = (<span class="variable language_">$this</span>-&gt;a2 + <span class="variable language_">$this</span>-&gt;b2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">only_merge</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;result[] = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$this</span>-&gt;a1);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;result[] = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$this</span>-&gt;a2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">new</span> <span class="title function_ invoke__">compare_array_merge_and_plus</span>())-&gt;<span class="title function_ invoke__">plus</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>对于同键名的情况</p>
<table>
<thead>
<tr>
<th>同键名</th>
<th>索引数组</th>
<th>关联数组</th>
</tr>
</thead>
<tbody><tr>
<td>array_merge</td>
<td>重新计算索引</td>
<td>后者覆盖前者</td>
</tr>
<tr>
<td>plus</td>
<td>前者覆盖后者</td>
<td>前者覆盖后者</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>正态分布</title>
    <url>/posts/60867.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (! <span class="title function_ invoke__">function_exists</span>(<span class="string">&#x27;stats_rand_gen_normal&#x27;</span>)) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">stats_rand_gen_normal</span>(<span class="params"><span class="variable">$av</span>, <span class="variable">$sd</span></span>): <span class="title">float</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="title function_ invoke__">mt_rand</span>() / <span class="title function_ invoke__">mt_getrandmax</span>();</span><br><span class="line">        <span class="variable">$y</span> = <span class="title function_ invoke__">mt_rand</span>() / <span class="title function_ invoke__">mt_getrandmax</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">sqrt</span>(-<span class="number">2</span> * <span class="title function_ invoke__">log</span>(<span class="variable">$x</span>)) * <span class="title function_ invoke__">cos</span>(<span class="number">2</span> * <span class="title function_ invoke__">pi</span>() * <span class="variable">$y</span>) * <span class="variable">$sd</span> + <span class="variable">$av</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateScore</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$res</span> = <span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">stats_rand_gen_normal</span>(<span class="number">80</span>, <span class="number">20</span>));</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$res</span> &gt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">generateScore</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$res</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">generateScore</span>();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>PHP</category>
        <category>实用代码</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL创建高性能索引</title>
    <url>/posts/2517.html</url>
    <content><![CDATA[<p>MySQL索引的基础和类型<br>索引的基础</p>
<ul>
<li>索引类似于书籍的目录,想要找到一本书的某个特定主题,需要先查找书的目录,定位对应页码</li>
<li>存储引擎使用类似的方法进行数据查询,先去索引当中找到对应的值,然后根据匹配的索引找到对应的数据行</li>
</ul>
<p>索引对性能的影响</p>
<ul>
<li><p>优</p>
<ul>
<li>大大减少服务器需要扫描的数据量</li>
<li>帮助服务器避免排序和临时表</li>
<li>将随机I&#x2F;O变顺序I&#x2F;O</li>
<li>大大提升查询速度</li>
</ul>
</li>
<li><p>缺</p>
<ul>
<li>降低写的性能</li>
<li>占用磁盘空间</li>
</ul>
</li>
<li><p>索引的使用场景</p>
<ul>
<li>对于非常小的表,大部分情况下全表扫描的效率更高</li>
<li>中到大型表,索引非常有效</li>
<li>特大型表,建立和使用索引的代价随之增大,可以使用分区技术来解决</li>
</ul>
</li>
</ul>
<p>索引类型</p>
<ul>
<li><p>索引有很多类型,都是实现在存储引擎中</p>
<ul>
<li>普通索引:最基本的索引,没有任何约束限制</li>
<li>唯一索引:与普通索引类似,但是具有唯一性约束</li>
<li>主键索引:特殊的唯一索引,不允许有空值</li>
<li>组合索引:将多个列组合在一起创建索引,可以覆盖多个列</li>
<li>外键索引:只有Innodb类型的表才可以使用外键索引,保证数据的一致性,完整性和实现级联操作</li>
<li>全文索引:MySQL自带的全文索引只能用于MyISAM,并且只能对英文进行全文检索</li>
</ul>
</li>
<li><p>主键和唯一索引的区别</p>
<ul>
<li>一个表只能有一个主键索引,可以有多个唯一索引</li>
<li>主键索引一定是唯一索引,唯一索引不是主键索引</li>
<li>主键可以与外键构成参照完整性约束,防止数据不一致</li>
</ul>
</li>
</ul>
<p>延伸:MySQL索引的创建原则<br>延伸:MySQL索引的注意事项</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL数据库基础考点</title>
    <url>/posts/6910.html</url>
    <content><![CDATA[<h1 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h1><h3 id="整形"><a href="#整形" class="headerlink" title="整形"></a>整形</h3><p>tinyint<br>smallint<br>mediumint<br>int<br>bigint</p>
<ul>
<li>属性<ul>
<li>unsigned</li>
</ul>
</li>
<li>长度<ul>
<li>可以为整数类型指定宽度,如int(11),对大多数应用是没有意义的,他不会限制值的合法范围,只会影响显示字符的个数</li>
<li>zerofill(零填充)</li>
</ul>
</li>
</ul>
<h3 id="实数类型"><a href="#实数类型" class="headerlink" title="实数类型"></a>实数类型</h3><p>float<br>double<br>decimal</p>
<p>decimal可以存储bigint还大的整数;可以用于存储精确的小数</p>
<p>Float和double类型支持使用标准的浮点进行近似计算</p>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>varchar<br>char<br>text<br>blob</p>
<p>varchar类型用户存储可变长字符串,它比定长类型更节省空间.varchar使用1或2个额外字节记录字符串的长度,列长度小于255字节,使用一个字节表示否则用2个</p>
<p>varchar长度,如果存储内容超出指定长度,会报错</p>
<p>char是定长的,根据定义的字符串长度分配足够的空间</p>
<p>char会根据需要采用空格进行填充以方便比较</p>
<p>char适合存储很短的字符串,或者所有值都接近同一长度</p>
<p>char长度,超出设定的长度,会被截断</p>
<p>对于经常变更的数据,char比varchar更好.char不容易产生碎片</p>
<p>对于非常短的列,char比varchar在存储空间更具效率</p>
<p>只分配真正需要的空间,更长的列会消耗更多的内存</p>
<p>尽量避免使用blog和text类型,查询会使用临时表,导致严重的性能开销</p>
<h3 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h3><p>有时可以使用枚举替代常用的字符串类型</p>
<p>把不重复的集合存储成一个预定义的集合</p>
<p>非常紧凑,把列表值压缩到1或2个字节</p>
<p>内部存储的是整数</p>
<p>尽量避免使用数组作为枚举的常量,易混乱</p>
<p>排序是按照内部存储的整数进行排序</p>
<p>枚举表会使表大小大大减小</p>
<h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><p>尽量使用timestamp,比datetime空间效率高</p>
<p>用整数保存时间戳的格式通常不方便处理</p>
<p>如果需要存储微秒,可以使用bigint存储</p>
<h3 id="列属性"><a href="#列属性" class="headerlink" title="列属性"></a>列属性</h3><ul>
<li>auto_increment</li>
<li>default</li>
<li>not null</li>
<li>zerofill</li>
</ul>
<h1 id="MySql基础操作"><a href="#MySql基础操作" class="headerlink" title="MySql基础操作"></a>MySql基础操作</h1><h3 id="MySQL的连接和关闭"><a href="#MySQL的连接和关闭" class="headerlink" title="MySQL的连接和关闭"></a>MySQL的连接和关闭</h3><ul>
<li>mysql -u -p -h -P(端口)</li>
<li>其他<ul>
<li>\G<br>  格式化处理结果</li>
<li>\c<br>   取消当前的sql命令</li>
<li>\q<br>  退出</li>
<li>\s<br>  显示服务器状态</li>
<li>\h<br>  帮助信息</li>
<li>\d<br>  改变执行符(;)</li>
</ul>
</li>
</ul>
<h3 id="MySQL数据表引擎"><a href="#MySQL数据表引擎" class="headerlink" title="MySQL数据表引擎"></a>MySQL数据表引擎</h3><ul>
<li>innodb<ul>
<li>默认事务型引擎,最重要最广泛的存储引擎,性能优秀</li>
<li>数据存储在共享表空间,可以通过配置分开</li>
<li>对主键查询的性能高于其他类型的存储引擎</li>
<li>内部做了很多优化,从磁盘读取数据时自动在内存构建hash索引,插入数据时自动构建插入缓冲区</li>
<li>通过一些机制和工具支持真正的热备份</li>
<li>支持崩溃后的安全恢复</li>
<li>支持行级锁</li>
<li>支持外键</li>
</ul>
</li>
<li>myisam<ul>
<li>5.1版本前,myisam是默认的引擎</li>
<li>拥有全文索引,压缩,空间函数</li>
<li>不支持事务和行级锁,不支持崩溃后的安全恢复</li>
<li>表存储在两个文件,myd和myi</li>
<li>设计简单,某些场景下性能很好(select *)</li>
</ul>
</li>
<li>其他表引擎<br>  Archive<br>  Blackhole<br>  Csv<br>  Memory</li>
<li>优先使用innodb</li>
</ul>
<h3 id="MySQL的锁机制"><a href="#MySQL的锁机制" class="headerlink" title="MySQL的锁机制"></a>MySQL的锁机制</h3><h5 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h5><ul>
<li>表锁是日常开发中常见的问题,因此也是面试当中最常见的考察点.当多个查询同一时刻进行数据修改时,就会产生并发控制的问题</li>
<li>共享锁和排它锁,其实就是读锁和写锁<ul>
<li>读锁<br>  共享的,不堵塞.多个用户可以同时读取一个资源,互不干扰</li>
<li>写锁<br>  排他的,一个写锁会阻塞其他的写锁和读锁.这样可以只允许一个人进行写入,防止其他用户读取正在写入的资源</li>
</ul>
</li>
<li>锁粒度<ul>
<li>表锁<br>  系统性能开销最小,会锁定整张表,myisam使用表锁</li>
<li>行锁<br>  最大程度地支持并发处理,但是也会带来了最大的锁开销,innodb实现行锁</li>
</ul>
</li>
</ul>
<h3 id="MySQL事务处理"><a href="#MySQL事务处理" class="headerlink" title="MySQL事务处理"></a>MySQL事务处理</h3><p>MySQL提供事务处理的表引擎,innodb</p>
<p>服务器不管理事务,由下层的引擎实现,所以同一个事务中,使用多种存储引擎不靠谱</p>
<p>在非事务的表上执行事务操作MySQL不会发出提醒,也不会报错</p>
<h3 id="MySQL存储过程"><a href="#MySQL存储过程" class="headerlink" title="MySQL存储过程"></a>MySQL存储过程</h3><p>为以后的使用而保存的一条或多条MySQL语句的集合</p>
<p>存储过程就是有业务逻辑和流程的集合</p>
<p>可以在存储过程中创建表,更新表,删除表等等</p>
<h5 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h5><ul>
<li>通过把处理封装在容易使用的单元中,简化复杂的操作</li>
<li>保证数据的一致性</li>
<li>简化对变动的管理</li>
</ul>
<h3 id="MySQL的触发器"><a href="#MySQL的触发器" class="headerlink" title="MySQL的触发器"></a>MySQL的触发器</h3><p>触发器是提供程序猿和数据分析员来保证数据完整性的一种方法,它是与表事件相关的特殊的存储过程</p>
<h5 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h5><ul>
<li>可通过数据库中相关表实现级连更改</li>
<li>实时监控某表中的某个字段的更改而需要做出相应的处理</li>
<li>某些业务编号的生成</li>
<li>滥用会造成数据库及应用程序维护困难</li>
</ul>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 常用函数</title>
    <url>/posts/25320.html</url>
    <content><![CDATA[<p><em>摘自知乎</em></p>
<p>数组函数：</p>
<p>1.排序类：【1.无返回值，传值引用，就直接对原数组进行了修改】</p>
<p>按V：sort,rsort,asort,arsort,</p>
<p>按K：ksort,krsort</p>
<p>sort()	按升序对给定数组的值排序，不保留键名</p>
<p>rsort()	对数组逆向排序，不保留键名</p>
<p>asort() 对数组排序，保持索引关系</p>
<p>arsort() 对数组逆向排序，保持索引关系</p>
<p>ksort() 按键名对数组排序</p>
<p>krsort() 将数组按照键逆向排序</p>
<p>natsort() 用自然顺序算法对数组中的元素排序</p>
<p>natcasesort() 自然排序，不区分大小写</p>
<p>2.键值操作类：【都有返回值，没有在原来参数上修改】</p>
<p>array_values($arr); &#x2F;&#x2F;获取$arr中的值重排,去掉下标,返回值-&gt;新索引数组</p>
<p>array_keys($arr[,”str”,true])	&#x2F;&#x2F;获取$arr中所有字符是”str”的下标，形成</p>
<p>索引数组,true表示区分大小写【返回新索引数组】</p>
<p>array_search(“is”,$arr[,true]) &#x2F;&#x2F;返回值”is”在$arr中的key，找不到返回</p>
<p>fales,true表示严格按照类型(8,”8”)【返回第一个匹配值】</p>
<p>in_array(“str”,$arr);	&#x2F;&#x2F;判断”str”在$arr中是否存在，【返回BOOL】</p>
<p>is_array($arr);	&#x2F;&#x2F;判断是否是数组【返回BOOL】</p>
<p>array_key_exists($key,$arr); &#x2F;&#x2F;查询$arr中是否有$key，【返回BOOL】,</p>
<p>此方法比in_array效率更高</p>
<p>array_flip($arr); &#x2F;&#x2F; 交换键值，如有重复，后来居上，【返回新数组】</p>
<p>array_reverse($arr,[true|false]); &#x2F;&#x2F;数组顺序反转，param2是否保留原</p>
<p>来键值【返回新关联&#x2F;索引数组】</p>
<p>array_column(array(),’name’[,name_two]) — 返回数组中指定的name列</p>
<p>[可选参数，如果有返回name&#x3D;&gt;name_two的形式]【返回一维数组】</p>
<p>3.元素个数和唯一性</p>
<p>array_unique($arr);	&#x2F;&#x2F;去掉$arr中的重复值，重复的保留第一个值，【返回</p>
<p>数组，键值保留】</p>
<p>array_count_values($arr)	&#x2F;&#x2F;统计数组值出现的次数，【返回数组，</p>
<p>KEY为原来数组的值，VALUE为统计的次数】</p>
<p>count($arr[,1])&#x2F;sizeof();	&#x2F;&#x2F;统计$arr的元素个数，参数”1”表示统计多维数</p>
<p>组开启，默认0为关闭【返回统计个数】</p>
<p>4.回调函数</p>
<p>array_filter($arr,”function”);	&#x2F;&#x2F;把$arr放到函数function中处理，【返回判</p>
<p>断为TRUE的数据组成新数组，键值保留】</p>
<p>array_walk($arr,”function”[,”data”]);	&#x2F;&#x2F;把$arr放function(&amp;$v,$k,$data)</p>
<p>中处理【返回值为bool】</p>
<p>array_map(“function”,$arr,$arr2,$arr3,….);	&#x2F;&#x2F;把所有数组返回到回调函</p>
<p>数统一处理，【返回数组】</p>
<p>array_reduce($arr,myfunction[,initial]); &#x2F;&#x2F;把一维数组$arr中的</p>
<p>值依次传到自定义函数myfunction($v1,$v2)的v2上，v1为累加值类似于( .&#x3D;</p>
<p>),[如果有initial，先把其当v1传进去]【返回字符串】</p>
<p>5.拆分，合并，分解，接合数组</p>
<p>array_slice($arr,1[,2]);	&#x2F;&#x2F;在$arr中，从第二个开始取[，返回俩个值]【返</p>
<p>回新数组(对原数组无影响)，键值保留】</p>
<p>array_splice($arr,1[,2,”aaa”,”bb”])	; &#x2F;&#x2F;删除或替换，从$arr第二个开始</p>
<p>取，删除或替换2个值【返回值为新数组，拆掉原数组】</p>
<p>array_combine($arr1,$arr2);	&#x2F;&#x2F;数组$arr1为KEY,$arr2为VALUES结合形</p>
<p>成新索引数组【返回索引数组】</p>
<p>array_merge($arr1,$arr2,$arr3…);	&#x2F;&#x2F;数组进行合并，保留键值，有重复，</p>
<p>后来者居上 【返回新数组】 array_merge 发现有 key 值相同的， 取后</p>
<p>者; $arr1+$arr2 发现有key值相同的，取前者，第二个重复的值丢弃</p>
<p>array_intersect($arr1,$arr2);	&#x2F;&#x2F;返回两个数组的交集，键值不变</p>
<p>array_diff($arr1,$arr2);	&#x2F;&#x2F;返回两数组的差集，返回的值为第一个数组的</p>
<p>值，键值不变</p>
<p>array_chunk($arr,2);	&#x2F;&#x2F;分割数组,把$arr按照【2个为一组】均等分割</p>
<p>【返回一个二维数组】</p>
<p>6.数组的数据结构【无返回值，传值引用，就直接对原数组进</p>
<p>行了修改】</p>
<p>array_shift($arr) &#x2F;&#x2F;从开头，删除数组第一个元素</p>
<p>array_unshift($arr,”one”,”two”) &#x2F;&#x2F;从开头，添加元素</p>
<p>array_pop($arr) &#x2F;&#x2F;从结尾，删除数组最后一个元素</p>
<p>array_push($arr,”aaa”);	&#x2F;&#x2F;从结尾，添加元素</p>
<p>current($arr) &#x2F;&#x2F;返回数组中的当前单元 比如是关联数组是不知道下标，</p>
<p>可以输出当前数组的办法解决(返回的是数组中第一个健值)</p>
<p>key($arr)	&#x2F;&#x2F;返回当前指针指向元素的键值</p>
<p>next($arr)	&#x2F;&#x2F;当前指针下移</p>
<p>pre($arr)	&#x2F;&#x2F;当前指针上移</p>
<p>end($arr)	&#x2F;&#x2F;指针指到最后</p>
<p>reset($arr)	&#x2F;&#x2F;指针回归到开头</p>
<p>unset($arr)&#x2F;&#x2F;销毁此数组</p>
<p>7.其他</p>
<p>array_rand($arr,2);	&#x2F;&#x2F;随机返回两个$arr数组当中的key【返回值为值或者</p>
<p>数组】</p>
<p>shuffle($arr)	&#x2F;&#x2F;随机的重组$arr，顺序变乱【返回新数组，保留键值】</p>
<p>array_sum($arr);	&#x2F;&#x2F;返回$arr的value的和【返回一个值】</p>
<p>range(0,10,2,)	&#x2F;&#x2F;快速创建0，10的数组，间隔为2，所以有5个值【返回新</p>
<p>索引数组】</p>
<p>http_build_query($arr)	&#x2F;&#x2F;把关联数组转换成一个经过urlencode加密的</p>
<p>URL eg:array[“a”&#x3D;&gt;2];&#x3D;&gt;URL:a&#x3D;2&amp;</p>
<p>字符串函数</p>
<p>1.返回bool</p>
<p>isset($a)	&#x2F;&#x2F;当$a&#x3D;NULL 或不存在，返回false，反之为true</p>
<p>empty($a)	&#x2F;&#x2F;当$a&#x3D;NULL&#x2F;‘’&#x2F;array()&#x2F;0&#x2F;‘0’&#x2F;不存在 时 返回true,反之为false</p>
<ol start="2">
<li>返回值为自字符</li>
</ol>
<p>substr(字符串,开始地方,[返回字符串的长度]);	&#x2F;&#x2F;截取字符串的一部分,第一</p>
<p>个字符位置为0</p>
<p>substr_replace($str,”aaa”,start[,length]);	&#x2F;&#x2F;在$str上操作，从第start个</p>
<p>开始,把【后边】的字符[全&#x2F;或length个]替换</p>
<p>sub_count($str,”is”[,5,10]); &#x2F;&#x2F;[ 从第五个字符开始，搜索长度为10，]搜</p>
<p>索is在$str中出现的次数，【返回次数】</p>
<p>strstr($email,”@”[,true]) &#x2F;&#x2F;从头开始搜索,无true返回@后边字符，有true</p>
<p>返回@前边的字符[strrchr对比]</p>
<p>strrchr($email,”@”) &#x2F;&#x2F;从结尾开始搜索，返回@后的所有字符</p>
<p>str_replace &#x2F;&#x2F;(被替换词,替换词，被搜索字符串，[统计替换次数</p>
<p>$num]) 前两个参数也可为数组，两个数组元素个数相同</p>
<p>str_repeat($str,num);	&#x2F;&#x2F;重复$str字符串 num次，</p>
<p>3.返回值为数字类的</p>
<p>strpos($str,”@”); &#x2F;&#x2F;返回@【第一次出现的位置】</p>
<p>strrpos($str,”@”);	&#x2F;&#x2F;返回@【最后一次出现的位置】</p>
<p>str_word_count($str[,0&#x2F;1&#x2F;2]);	&#x2F;&#x2F;返回$str中单词的数量[0指返回次数,默认</p>
<p>值&#x2F;1指以数组形式返回单词值&#x2F;2指返回关联数组，k为单词首字母下标,v单词</p>
<p>值]</p>
<p>strcmp($str1,$str2); &#x2F;&#x2F;按ASCII码比较 str1&gt;str2 则返回1 相等返回0 &lt;</p>
<p>返回-1 strcasecmp不区分大小写的比较</p>
<p>strnatcmp($str1,$str2); &#x2F;&#x2F;按自然数的排序比较，上边的比较10&lt;2；本函</p>
<p>数比较10&gt;2,按自然数大小来的 strcasecmp($str1,$str2);strnatcasecmp&#x2F;&#x2F;</p>
<p>以上4个函数，$str1，$str2比较，【返回值：相等0，小于-1，大于1】</p>
<p>number_format(10000[,2]); &#x2F;&#x2F;&#x3D;&#x3D;》10,000.00 把第一个参数格式</p>
<p>化,保留2位小数</p>
<p>strlen($string);成功则返回字符串 $string 的长度</p>
<p>mb_strlen($string,’utf8’);&#x2F;&#x2F;获取字符串$string长度，多字节的字符被计为</p>
<p>1。</p>
<p>4.文本处理类</p>
<p>strtoupper($str) &#x2F;&#x2F;字母全转为大写【返回全大写字符串】</p>
<p>strtolower() &#x2F;&#x2F;字母全转为小写【返回全小写字符串】</p>
<p>strtotime(‘2015-10-10 10:10:10’); &#x2F;&#x2F;指定时间转换为时间戳【返回时间</p>
<p>戳】</p>
<p>str_pad($str,length,[—，STR_PAD_BOTH]); &#x2F;&#x2F;在$str的两边填补“—“，</p>
<p>注意，length若小于$str长度，不填补</p>
<p>trim($str[,”a”,STR_PAD_BOTH]) &#x2F;&#x2F;去除两边&#x2F;左&#x2F;右的空白或”a”,默认是空</p>
<p>白，或自定义字符</p>
<p>floatval(“123.45aa”) &#x2F;&#x2F;&#x3D;》获取变量的浮点值【123.45】</p>
<p>ucfirst() &#x2F;&#x2F;整个$str首字母大写</p>
<p>ucword() &#x2F;&#x2F;$str每个单词首字母大写</p>
<ol start="5">
<li>HTML类处理</li>
</ol>
<p>htmlspecialchars($str) &#x2F;&#x2F;函数把【预定义字符】转换为【 HTML 实</p>
<p>体】，&amp;转换成&amp;amp</p>
<p>htmlspecialchars_decode($str); &#x2F;&#x2F;把【HTML实体】转换成【预定义字</p>
<p>符】，&amp;amp转换成&amp;</p>
<p>htmlentities($str); &#x2F;&#x2F;函数把【预定义字符】转换为【 HTML 实体】，&amp;</p>
<p>转换成&amp;amp，有乱码问题，注意第二第三个参数，若编码不正确，会在实</p>
<p>体化时把信息丢失</p>
<p>html_entity_decode($str) &#x2F;&#x2F;把【HTML实体】转换成【预定义字符】，</p>
<p>&amp;amp转换成&amp;, &amp;gt 转成 &lt;</p>
<p>addslashes($html)； &#x2F;&#x2F;添加转义字符“&#x2F;”</p>
<p>stripslashes($html); &#x2F;&#x2F;删除转义字符“&#x2F;”</p>
<p>strip_tags($html); &#x2F;&#x2F;去除HTML标签</p>
<p>nl2br($str) &#x2F;&#x2F;在$str中的换行&#x2F;n前插入<br>，因为\n在源码可以换行，但是</p>
<p>在浏览器窗口不行，有这个就可以</p>
<p>iconv( from_charset ; to_charset,$str); &#x2F;&#x2F;转化字符格式</p>
<p>$file_name &#x3D; iconv(“gb2312”,”utf-8”,$file_name);</p>
<p>正则函数</p>
<p>[原则，能用字符串函数解决不用正则，速度问题]</p>
<p>1.字符串的匹配查找</p>
<p>preg_match($pattern,$subject,$arr); &#x2F;&#x2F;按正则$pattern处理$subject,第</p>
<p>一次匹配结果返回到数组中【函数的返回值为匹配次数】</p>
<p>preg_match_all($pattern,$subject,$arr) &#x2F;&#x2F;按正则$pattern处理$subject,</p>
<p>全部匹配结果返回到数组中【函数的返回值为匹配次数】</p>
<p>strstr($str,”@”[,true]);</p>
<p>strpos,strrpos,substr($str,position) &#x2F;&#x2F;联合使用</p>
<p>2.字符串的替换</p>
<p>preg_replace($pattenr,$replace,$str); &#x2F;&#x2F;【强大的字符串处理函数】</p>
<p>在$str中,把$parrern匹配的值替换成$replcae【返回值为处理后的字符串】</p>
<p>str_replace($str,”aaa”,”bbb”); &#x2F;&#x2F;把$str中的aaa换成bbb</p>
<p>3.字符串的分割和链接</p>
<p>preg_split($pattern,$str); 通过一个正则表达式分隔字符串【返回值为</p>
<p>数组】</p>
<p>举例:</p>
<p>1.$keywords &#x3D; preg_split(“&#x2F;[\s,]+&#x2F;“, “hypertext language, programming”)</p>
<p>结果Array([0] &#x3D;&gt; hypertext,[1] &#x3D;&gt; language[2] &#x3D;&gt; programming)</p>
<p>2.explode(“,”,$str[,$limit_num]);&#x2F;&#x2F;把$str按照”，”分割成一个数组[可选参</p>
<p>数为返回数组的元素个数]【返回一个分割后的数组】</p>
<p>3.impolde(“+”,$arr);&#x2F;&#x2F;把$arr里的元素按照“+”链接成一个字符串</p>
<ol start="4">
<li>xss安全相关</li>
</ol>
<p>addcslashes</p>
<p>举例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 这是在项目中遇到的，如果json字符串中有「`」，就会把</span><br><span class="line">&lt;?php</span><br><span class="line">$arr = [ [ &#x27;name&#x27; =&gt; &quot;valen&#x27;s&quot;, &#x27;age&#x27;  =&gt; 27, ], [ &#x27;name&#x27; =&gt; &#x27;blue&#x27;, &#x27;age&#x27;  =&gt; 26, ], ];</span><br><span class="line"></span><br><span class="line">$json =  addcslashes(json_encode($arr), &#x27;\&#x27;&#x27;);</span><br><span class="line">?&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    console.log(JSON.parse(&#x27;&lt;?=$json?&gt;&#x27;));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>文件处理函数</p>
<p>1.基础函数</p>
<p>file_exists($file) &#x2F;&#x2F;文件是否存在，【true&#x2F;false】</p>
<p>filesize($file) &#x2F;&#x2F;返回文件的大小【大小字节&#x2F;出错false】</p>
<p>is_readale($file) &#x2F;&#x2F;是否可读【返回bool】</p>
<p>is_writeable($file) &#x2F;&#x2F;是否可写【返回bool】</p>
<p>is_executable($file) &#x2F;&#x2F;是否可执行【返回bool】</p>
<p>filectime($file) &#x2F;&#x2F;文件创建时间【时间戳】</p>
<p>filemtime($file) &#x2F;&#x2F;文件修改时间【时间戳】</p>
<p>fileatime($file) &#x2F;&#x2F;文件访问时间【时间戳】</p>
<p>stat($file) &#x2F;&#x2F;返回文件的大部分信息【文件信息数组】</p>
<ol start="2">
<li>目录的基本操作</li>
</ol>
<p>basename($file) &#x2F;&#x2F;返回文件名，index.php</p>
<p>dirname($file) &#x2F;&#x2F;返回文件的路径，c:&#x2F;&#x2F;php&#x2F;</p>
<p>pathinfo($file) &#x2F;&#x2F;返回该文件路径的所有信息 [“dirname”目录</p>
<p>名] [“basename”文件名] [“extension”文件后缀]</p>
<p>目录复制，删除，统计大小使用的总结：</p>
<p>本质：依靠递归思想，对目录的的循环遍历,通过每一个文件的操作，得</p>
<p>出结果</p>
<p>函数：复制：copy($org,$to);mkdir()</p>
<p>删除：unlink($file);mrdir();</p>
<p>统计大小:filesize($file)</p>
<p>3.遍历目录</p>
<p>opendir($file) &#x2F;&#x2F;打开一个目录，参数为目录名或目录路径【返回资源型</p>
<p>的目录句柄$dir_handle,无权限返false】</p>
<p>readdir($dir_handle); &#x2F;&#x2F;读取目录，参数为目录句柄，while,返回当前指</p>
<p>向对象的名字，目录指针后移【返回filename,没有是返false】</p>
<p>closedir($dir_handle) &#x2F;&#x2F;关闭打开的目录</p>
<p>rewinddir($dir_handle) &#x2F;&#x2F;倒回目录句柄，将目录指针重置到目录开始</p>
<ol start="4">
<li>建立和删除目录</li>
</ol>
<p>mkdir(“dir_name”); &#x2F;&#x2F;建立一个空的目录</p>
<p>rmdir(“dir_name”); &#x2F;&#x2F;删除一个空的目录</p>
<p>unlink(“file_name”) &#x2F;&#x2F;删除一个文件，当删除目录是，必须删除该目录下的文件</p>
<p>5.文件的基本操作</p>
<p>fopen($fileName,”模式字符r,w,x”) &#x2F;&#x2F;打开一个文件，【返回值为资源型</p>
<p>$handle】</p>
<p>fclose($handle) &#x2F;&#x2F;关闭打开的文件【返回BOOL】</p>
<p>fwrite($handle,”$data”) &#x2F;&#x2F;把$data写入$handle文件,先清空后写入，</p>
<p>【成功返回$handle，失败返回false】</p>
<p>file_put_contents($filename,$data); &#x2F;&#x2F;它是上边三个合起来的效果</p>
<p>file_get_contents($filename) &#x2F;&#x2F;读取文件里的信息【返回字符串】</p>
<p>flock($handle,$operation) &#x2F;&#x2F;用$operation锁定文件$handle</p>
<p>copy($file1,$file2); &#x2F;&#x2F;赋值$file1，形成$file2【返回BOOL】</p>
<p>unlink($file); &#x2F;&#x2F;删除$file文件【返回BOOL】</p>
<p>rename($file1,$file_new_name); &#x2F;&#x2F;重命名【返回BOOL】</p>
<p>6.文件的上传</p>
<p>is_upload_file($_FILES[‘file’][‘tmp_name’]) &#x2F;&#x2F;检查是否合法</p>
<p>move_upload_file($_FILES[‘file’][‘tmp_name’],$url); &#x2F;&#x2F;上传合法文件</p>
<p>到$url</p>
<p>注意：html:form: method&#x3D;”post” ;enctype&#x3D;”multipart&#x2F;form-data”</p>
<p>文件下载</p>
<p>header(‘contentdisposition:attachment;filename&#x3D;’.basename</p>
<p>($filename));&#x2F;&#x2F;表示附件方式下载</p>
<p>header(‘content-length:’.filesize($filename));</p>
<p>readfile($filename);</p>
<p>SQL函数</p>
<p>mysql_connect(‘localhost’,”root”,”root”); &#x2F;&#x2F;连接数据库</p>
<p>mysql_select_db(‘data’,$conn); &#x2F;&#x2F;选择数据库名</p>
<p>mysql_query(‘set names utf8’); &#x2F;&#x2F;设置编码</p>
<p>mysql_affect_array(); &#x2F;&#x2F;试返回值为关联&#x2F;索引数组</p>
<p>mysql_affect_row(); &#x2F;&#x2F;返回索引数组</p>
<p>mysql_affect_assoc(); &#x2F;&#x2F;返回关联数组</p>
<p>mysql_num_rows(); &#x2F;&#x2F;返回上一次select的查询语句条数</p>
<p>mysql_affected_rows(); &#x2F;&#x2F;返回上一次insert,update,delete的数据条数</p>
<p>mysql_close();&#x2F;&#x2F;关闭数据库</p>
<p>数学函数</p>
<p>ceil() &#x2F;&#x2F;向上取整</p>
<p>floor() &#x2F;&#x2F;向下取整</p>
<p>round(); &#x2F;&#x2F;四舍五入</p>
<p>abs(); &#x2F;&#x2F;取绝对值</p>
<p>rand(10，100) &#x2F;&#x2F;随机取值</p>
<p>mt_rand(10,100) &#x2F;&#x2F;随机取值，算法不同，速度更快</p>
<p>fmod() &#x2F;&#x2F;返回除法浮点形余数</p>
<p>max(int&#x2F;$arr) &#x2F;&#x2F;取最大值</p>
<p>min(int&#x2F;$arr) &#x2F;&#x2F;取最小值</p>
<p>pow(1024,2) &#x2F;&#x2F;返回1021的2次幂</p>
<p>时间函数</p>
<p>date_default_timezone_set()(‘PRC’); &#x2F;&#x2F;设置时区为中国</p>
<p>date.timezone &#x3D;”PRC”; &#x2F;&#x2F;PHP.INI</p>
<p>time(); &#x2F;&#x2F;默认获取当前时间，【返回时间戳格式】</p>
<p>micritime(); &#x2F;&#x2F;获取当前时间【返回毫秒的时间戳】</p>
<p>mktime(H,i,s,m,d,Y) &#x2F;&#x2F;指定时间转为时间戳，参数为空的时候作用与</p>
<p>time()相同【返回时间戳格式】</p>
<p>strtotime(‘2015-10-10 10:10:10’); &#x2F;&#x2F;指定时间转换为时间戳【返回时间</p>
<p>戳】</p>
<p>date(“Y-m-d H:i:s”,time()) ; &#x2F;&#x2F;转换时间戳为日期格式【返回目标格式的</p>
<p>字符串】</p>
<p>getdate() &#x2F;&#x2F;获取当前时间，【返回一个数组，参数年，月，日等都有】</p>
<p>URL处理函数</p>
<p>urlencode($url) &#x2F;&#x2F;对该URL进行编码；原因：防止乱码，解决空格的呢个字符不能传递问题，form也是此编码格式传递</p>
<p>urldecode($url) &#x2F;&#x2F;对该URL进行解码</p>
<p>parse_url($url) &#x2F;&#x2F;返回该URL的所有信息，[scheme协议][host域名] [path路径][query参数] 【返回含信息的数组】</p>
<p>pathinfo($url) &#x2F;&#x2F;[“dirname”目录名] [“basename”文件名] [“extension”文件后缀]【返回含信息的数组，下标不同】</p>
<p>get_meta_tags($url) &#x2F;&#x2F;获取该页面的所有META标签【返回关联数组】</p>
<p>JSON</p>
<p>json_encode($data); &#x2F;&#x2F;对变量进行JSON编码</p>
<p>json_decode($data) &#x2F;&#x2F;对JSON格式的字符串进行解码</p>
<p>json_last_error(); &#x2F;&#x2F;返回最后一次反生的错误</p>
<p>其他函数</p>
<p>sleep(10) &#x2F;&#x2F;脚本执行到这里后，延迟10秒继续执行</p>
<p>serialize() &#x2F;&#x2F;返回字符串，此字符串包含了表示 value 的字节流，可以存</p>
<p>储于任何地方。</p>
<p>unserialize() &#x2F;&#x2F;对单一的已序列化的变量进行操作，将其转换回 PHP 的</p>
<p>值。</p>
<p>当序列化对象时，PHP 将试图在序列动作之前调用该对象的成员函</p>
<p>数 __sleep()。这样就允许对象在被序列化之前做任何清除操作。类似的,</p>
<p>当使用 unserialize() 恢复对象时， 将调用 __wakeup() 成员函数。</p>
<p>类型转换</p>
<p>setType($a);	&#x2F;&#x2F;获取变量的类型</p>
<p>$b&#x3D;(int)$a;	&#x2F;&#x2F;把$a转换为整形</p>
<p>is_int($b); &#x2F;&#x2F;判断$b是否为整形，返回bool值</p>
<p>类型转换：</p>
<p>(int),(bool),(float),(string),(array),(object); intval(),floatval();strval()</p>
<p>判断类型：</p>
<p>is_bool&#x2F;int&#x2F;float&#x2F;string&#x2F;array&#x2F;object&#x2F;resource&#x2F;null</p>
<p>is_numberic();’&#x2F;&#x2F;判断是否为任何类型的数字或者数组字符串</p>
<p>is_callable();&#x2F;&#x2F;判断是否为有效函数名称</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识之assert</title>
    <url>/posts/61898.html</url>
    <content><![CDATA[<p>举个例子</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">get_include_path</span>(), <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理断言失败时的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assert_failure</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Assert failed&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置断言标志</span></span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_ACTIVE, <span class="literal">true</span>);</span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_BAIL, <span class="literal">true</span>);</span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_WARNING, <span class="literal">false</span>);</span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_CALLBACK, <span class="string">&#x27;assert_failure&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让一个断言会失败</span></span><br><span class="line"><span class="title function_ invoke__">assert</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 由于 ASSERT_BAIL 是 true，这里永远也到不了</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;Never reached&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>其中assert_options的值有</p>
<table>
<thead>
<tr>
<th>标志</th>
<th>INI设置</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ASSERT_ACTIVE</td>
<td>assert.active</td>
<td>1</td>
<td>启用 assert() 断言</td>
</tr>
<tr>
<td>ASSERT_WARNING</td>
<td>assert.warning</td>
<td>1</td>
<td>为每个失败的断言产生一个 PHP 警告（warning）</td>
</tr>
<tr>
<td>ASSERT_BAIL</td>
<td>assert.bail</td>
<td>0</td>
<td>在断言失败时中止执行</td>
</tr>
<tr>
<td>ASSERT_QUIET_EVAL</td>
<td>assert.quiet_eval</td>
<td>0</td>
<td>在断言表达式求值时禁用 error_reporting</td>
</tr>
<tr>
<td>ASSERT_CALLBACK</td>
<td>assert.callback</td>
<td>(null)</td>
<td>断言失败时调用回调函数</td>
</tr>
</tbody></table>
]]></content>
      <tags>
        <tag>功能代码</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识之常见linux命令</title>
    <url>/posts/38642.html</url>
    <content><![CDATA[<h1 id="Linux-常用命令"><a href="#Linux-常用命令" class="headerlink" title="Linux 常用命令"></a>Linux 常用命令</h1><h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><h3 id="系统定时任务"><a href="#系统定时任务" class="headerlink" title="系统定时任务"></a>系统定时任务</h3><h3 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h3><h3 id="shell命令"><a href="#shell命令" class="headerlink" title="shell命令"></a>shell命令</h3><h2 id="系统安全"><a href="#系统安全" class="headerlink" title="系统安全"></a>系统安全</h2><ul>
<li>sudo </li>
<li>su </li>
<li>chmod</li>
<li>setfacl<h2 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h2></li>
<li>w</li>
<li>top</li>
<li>ps</li>
<li>kill</li>
<li>pkill</li>
<li>pstree</li>
<li>killall<h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2></li>
<li>id</li>
<li>usermod</li>
<li>useradd</li>
<li>groupadd</li>
<li>userdel<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2></li>
<li>mount</li>
<li>umount</li>
<li>fsck</li>
<li>df</li>
<li>du<h2 id="系统关机和重启"><a href="#系统关机和重启" class="headerlink" title="系统关机和重启"></a>系统关机和重启</h2></li>
<li>shutdown</li>
<li>reboot<h2 id="网络应用"><a href="#网络应用" class="headerlink" title="网络应用"></a>网络应用</h2></li>
<li>curl</li>
<li>telnet</li>
<li>mail</li>
<li>elinks<h2 id="网络测试"><a href="#网络测试" class="headerlink" title="网络测试"></a>网络测试</h2></li>
<li>ping</li>
<li>netstat</li>
<li>host<h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2></li>
<li>hostname</li>
<li>ifconfig<h2 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h2></li>
<li>ssh</li>
<li>screen</li>
<li>clear</li>
<li>who</li>
<li>date<h2 id="软件包管理"><a href="#软件包管理" class="headerlink" title="软件包管理"></a>软件包管理</h2></li>
<li>yum</li>
<li>rpm</li>
<li>apt-get<h2 id="文件查找和比较"><a href="#文件查找和比较" class="headerlink" title="文件查找和比较"></a>文件查找和比较</h2></li>
<li>locate</li>
<li>find<h2 id="文件内容查看"><a href="#文件内容查看" class="headerlink" title="文件内容查看"></a>文件内容查看</h2></li>
<li>head</li>
<li>tail</li>
<li>less</li>
<li>more<h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2></li>
<li>touch</li>
<li>unlink</li>
<li>rename</li>
<li>ln</li>
<li>cat<h2 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h2></li>
<li>cd</li>
<li>mv</li>
<li>pwd</li>
<li>tree</li>
<li>cp</li>
<li>ls<h2 id="文件权限属性"><a href="#文件权限属性" class="headerlink" title="文件权限属性"></a>文件权限属性</h2></li>
<li>setfacl</li>
<li>chmod</li>
<li>chown</li>
<li>chgrp<h2 id="压缩-x2F-解压"><a href="#压缩-x2F-解压" class="headerlink" title="压缩&#x2F;解压"></a>压缩&#x2F;解压</h2></li>
<li>bzip2&#x2F;bunzip2</li>
<li>gzip&#x2F;gunzip</li>
<li>zip&#x2F;unzip</li>
<li>tar<h2 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h2></li>
<li>ftp</li>
<li>scp<h2 id="系统定时任务-1"><a href="#系统定时任务-1" class="headerlink" title="系统定时任务"></a>系统定时任务</h2></li>
<li>crontab</li>
<li>at<h1 id="shell基础"><a href="#shell基础" class="headerlink" title="shell基础"></a>shell基础</h1></li>
<li>赋予权限,直接执行</li>
<li>调用解释器执行<ul>
<li>#!&#x2F;bin&#x2F;sh 指定脚本解释器</li>
</ul>
</li>
<li>source命令执行</li>
</ul>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识之文件及目录处理</title>
    <url>/posts/1739.html</url>
    <content><![CDATA[<h2 id="fopen"><a href="#fopen" class="headerlink" title="fopen()"></a>fopen()</h2><p>用来打开一个文件,打开时需要指定打开模式</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识之JavaScript和JQuery的基础考点</title>
    <url>/posts/17036.html</url>
    <content><![CDATA[<p>JavaScript基础语法</p>
<p>变量的定义<br>变量名可以是字符_$<br>变量名称对大小写敏感<br>使用var关键字声明变量<br>未使用值声明的变量,值是undefined<br>如果重新声明JavaScript变量,该变量的值不会丢失</p>
<p>数据类型</p>
<p>JavaScript变量均为对象.声明一个变量,就创建了一个新的对象</p>
<p>创建对象</p>
<ul>
<li>new Object()</li>
<li>使用对象构造器</li>
<li>json对象</li>
</ul>
<p>函数<br>不支持默认值<br>函数内部声明的变量(使用var)是局部变量<br>在函数外声明的变量全局可访</p>
<p>else if必须分开写</p>
<p>JavaScript内置对象</p>
<ul>
<li><p>Number</p>
<ul>
<li>var pi &#x3D; 3.14</li>
<li>var myNum &#x3D; new Number(value)</li>
<li>var myNum &#x3D; Number(value)</li>
</ul>
</li>
<li><p>String</p>
<ul>
<li>var str &#x3D; ‘Hello’ &#x2F;&#x2F; 单引号双引号无区别</li>
<li>var str &#x3D; new String(s)</li>
<li>var str &#x3D; String(s)</li>
</ul>
</li>
<li><p>Boolean</p>
<ul>
<li>var bol &#x3D; true</li>
<li>var bol &#x3D;  New Boolean(value)</li>
<li>var bol &#x3D; Boolean(value)</li>
</ul>
</li>
<li><p>Array</p>
<ul>
<li>var arr &#x3D; new Array();</li>
<li>var arr &#x3D; new Array(size);</li>
<li>var arr &#x3D; new Array(e1,e2,…)</li>
</ul>
</li>
<li><p>Date</p>
<ul>
<li>var date &#x3D; new Date();</li>
</ul>
</li>
<li><p>Math</p>
<ul>
<li>var pi &#x3D; Math.PI;</li>
</ul>
</li>
<li><p>RegExp</p>
<ul>
<li>&#x2F;pattern&#x2F;attributes</li>
<li>new RegExp(pattern, attributes)</li>
</ul>
</li>
</ul>
<p>延伸考点:window对象</p>
<ul>
<li>window</li>
<li>Navigator</li>
<li>Screen</li>
<li>History</li>
<li>Location</li>
</ul>
<p>延伸考点:DOM对象</p>
<ul>
<li>Document</li>
<li>Element</li>
<li>Attr</li>
<li>Event</li>
</ul>
<p>延伸考点:jQuery基础知识</p>
<ul>
<li>jQuery选择器</li>
<li>jQuery事件</li>
<li>jQuery效果</li>
<li>jQuery DOM操作<ul>
<li>属性</li>
<li>值</li>
<li>节点</li>
<li>css</li>
<li>尺寸</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识值功能设计考点</title>
    <url>/posts/34544.html</url>
    <content><![CDATA[<h1 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h1><h3 id="整形"><a href="#整形" class="headerlink" title="整形"></a>整形</h3><p>tinyint<br>smallint<br>mediumint<br>int<br>bigint</p>
<ul>
<li>属性<ul>
<li>unsigned</li>
</ul>
</li>
<li>长度<ul>
<li>可以为整数类型指定宽度,如int(11),对大多数应用是没有意义的,他不会限制值的合法范围,只会影响显示字符的个数</li>
<li>zerofill(零填充)</li>
</ul>
</li>
</ul>
<h3 id="实数类型"><a href="#实数类型" class="headerlink" title="实数类型"></a>实数类型</h3><p>float<br>double<br>decimal</p>
<p>decimal可以存储bigint还大的整数;可以用于存储精确的小数</p>
<p>Float和double类型支持使用标准的浮点进行近似计算</p>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>varchar<br>char<br>text<br>blob</p>
<p>varchar类型用户存储可变长字符串,它比定长类型更节省空间.varchar使用1或2个额外字节记录字符串的长度,列长度小于255字节,使用一个字节表示否则用2个</p>
<p>varchar长度,如果存储内容超出指定长度,会报错</p>
<p>char是定长的,根据定义的字符串长度分配足够的空间</p>
<p>char会根据需要采用空格进行填充以方便比较</p>
<p>char适合存储很短的字符串,或者所有值都接近同一长度</p>
<p>char长度,超出设定的长度,会被截断</p>
<p>对于经常变更的数据,char比varchar更好.char不容易产生碎片</p>
<p>对于非常短的列,char比varchar在存储空间更具效率</p>
<p>只分配真正需要的空间,更长的列会消耗更多的内存</p>
<p>尽量避免使用blog和text类型,查询会使用临时表,导致严重的性能开销</p>
<h3 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h3><p>有时可以使用枚举替代常用的字符串类型</p>
<p>把不重复的集合存储成一个预定义的集合</p>
<p>非常紧凑,把列表值压缩到1或2个字节</p>
<p>内部存储的是整数</p>
<p>尽量避免使用数组作为枚举的常量,易混乱</p>
<p>排序是按照内部存储的整数进行排序</p>
<p>枚举表会使表大小大大减小</p>
<h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><p>尽量使用timestamp,比datetime空间效率高</p>
<p>用整数保存时间戳的格式通常不方便处理</p>
<p>如果需要存储微秒,可以使用bigint存储</p>
<h3 id="列属性"><a href="#列属性" class="headerlink" title="列属性"></a>列属性</h3><ul>
<li>auto_increment</li>
<li>default</li>
<li>not null</li>
<li>zerofill</li>
</ul>
<h1 id="MySql基础操作"><a href="#MySql基础操作" class="headerlink" title="MySql基础操作"></a>MySql基础操作</h1><h3 id="MySQL的连接和关闭"><a href="#MySQL的连接和关闭" class="headerlink" title="MySQL的连接和关闭"></a>MySQL的连接和关闭</h3><ul>
<li>mysql -u -p -h -P(端口)</li>
<li>其他<ul>
<li>\G<br>  格式化处理结果</li>
<li>\c<br>   取消当前的sql命令</li>
<li>\q<br>  退出</li>
<li>\s<br>  显示服务器状态</li>
<li>\h<br>  帮助信息</li>
<li>\d<br>  改变执行符(;)</li>
</ul>
</li>
</ul>
<h3 id="MySQL数据表引擎"><a href="#MySQL数据表引擎" class="headerlink" title="MySQL数据表引擎"></a>MySQL数据表引擎</h3><ul>
<li>innodb<ul>
<li>默认事务型引擎,最重要最广泛的存储引擎,性能优秀</li>
<li>数据存储在共享表空间,可以通过配置分开</li>
<li>对主键查询的性能高于其他类型的存储引擎</li>
<li>内部做了很多优化,从磁盘读取数据时自动在内存构建hash索引,插入数据时自动构建插入缓冲区</li>
<li>通过一些机制和工具支持真正的热备份</li>
<li>支持崩溃后的安全恢复</li>
<li>支持行级锁</li>
<li>支持外键</li>
</ul>
</li>
<li>myisam<ul>
<li>5.1版本前,myisam是默认的引擎</li>
<li>拥有全文索引,压缩,空间函数</li>
<li>不支持事务和行级锁,不支持崩溃后的安全恢复</li>
<li>表存储在两个文件,myd和myi</li>
<li>设计简单,某些场景下性能很好(select *)</li>
</ul>
</li>
<li>其他表引擎<br>  Archive<br>  Blackhole<br>  Csv<br>  Memory</li>
<li>优先使用innodb</li>
</ul>
<h3 id="MySQL的锁机制"><a href="#MySQL的锁机制" class="headerlink" title="MySQL的锁机制"></a>MySQL的锁机制</h3><h5 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h5><ul>
<li>表锁是日常开发中常见的问题,因此也是面试当中最常见的考察点.当多个查询同一时刻进行数据修改时,就会产生并发控制的问题</li>
<li>共享锁和排它锁,其实就是读锁和写锁<ul>
<li>读锁<br>  共享的,不堵塞.多个用户可以同时读取一个资源,互不干扰</li>
<li>写锁<br>  排他的,一个写锁会阻塞其他的写锁和读锁.这样可以只允许一个人进行写入,防止其他用户读取正在写入的资源</li>
</ul>
</li>
<li>锁粒度<ul>
<li>表锁<br>  系统性能开销最小,会锁定整张表,myisam使用表锁</li>
<li>行锁<br>  最大程度地支持并发处理,但是也会带来了最大的锁开销,innodb实现行锁</li>
</ul>
</li>
</ul>
<h3 id="MySQL事务处理"><a href="#MySQL事务处理" class="headerlink" title="MySQL事务处理"></a>MySQL事务处理</h3><p>MySQL提供事务处理的表引擎,innodb</p>
<p>服务器不管理事务,由下层的引擎实现,所以同一个事务中,使用多种存储引擎不靠谱</p>
<p>在非事务的表上执行事务操作MySQL不会发出提醒,也不会报错</p>
<h3 id="MySQL存储过程"><a href="#MySQL存储过程" class="headerlink" title="MySQL存储过程"></a>MySQL存储过程</h3><p>为以后的使用而保存的一条或多条MySQL语句的集合</p>
<p>存储过程就是有业务逻辑和流程的集合</p>
<p>可以在存储过程中创建表,更新表,删除表等等</p>
<h5 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h5><ul>
<li>通过把处理封装在容易使用的单元中,简化复杂的操作</li>
<li>保证数据的一致性</li>
<li>简化对变动的管理</li>
</ul>
<h3 id="MySQL的触发器"><a href="#MySQL的触发器" class="headerlink" title="MySQL的触发器"></a>MySQL的触发器</h3><p>触发器是提供程序猿和数据分析员来保证数据完整性的一种方法,它是与表事件相关的特殊的存储过程</p>
<h5 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h5><ul>
<li>可通过数据库中相关表实现级连更改</li>
<li>实时监控某表中的某个字段的更改而需要做出相应的处理</li>
<li>某些业务编号的生成</li>
<li>滥用会造成数据库及应用程序维护困难</li>
</ul>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识之网络协议</title>
    <url>/posts/64186.html</url>
    <content><![CDATA[<p>HTTP&#x2F;1.1中</p>
<p>HTTP协议状态码</p>
<p>五类响应: 1xx,2xx,3xx,4xx,5xx</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>1**(信息类)</td>
<td>表示接收到请求并且继续处理</td>
</tr>
<tr>
<td>100</td>
<td>客户必须继续发出请求</td>
</tr>
<tr>
<td>101</td>
<td>客户要求服务器根据请求转换HTTP协议版本</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>2**(响应成功)</td>
<td>表示动作被成功接收、理解和接受</td>
</tr>
<tr>
<td>200</td>
<td>表明该请求被成功地完成，所请求的资源发送回客户端</td>
</tr>
<tr>
<td>201</td>
<td>提示知道新文件的URL</td>
</tr>
<tr>
<td>202</td>
<td>接受和处理、但处理未完成</td>
</tr>
<tr>
<td>203</td>
<td>返回信息不确定或不完整</td>
</tr>
<tr>
<td>204</td>
<td>请求收到，但返回信息为空</td>
</tr>
<tr>
<td>205</td>
<td>服务器完成了请求，用户代理必须复位当前已经浏览过的文件</td>
</tr>
<tr>
<td>206</td>
<td>服务器已经完成了部分用户的GET请求</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>3**(重定向类)</td>
<td>为了完成指定的动作，必须接受进一步处理</td>
</tr>
<tr>
<td>300</td>
<td>请求的资源可在多处得到</td>
</tr>
<tr>
<td>301</td>
<td>本网页被永久性转移到另一个URL</td>
</tr>
<tr>
<td>302</td>
<td>请求的网页被转移到一个新的地址，但客户访问仍继续通过原始URL地址，重定向，新的URL会在response中的Location中返回，浏览器将会使用新的URL发出新的Request。</td>
</tr>
<tr>
<td>303</td>
<td>建议客户访问其他URL或访问方式</td>
</tr>
<tr>
<td>304</td>
<td>自从上次请求后，请求的网页未修改过，服务器返回此响应时，不会返回网页内容，代表上次的文档已经被缓存了，还可以继续使用</td>
</tr>
<tr>
<td>305</td>
<td>请求的资源必须从服务器指定的地址得到</td>
</tr>
<tr>
<td>306</td>
<td>前一版本HTTP中使用的代码，现行版本中不再使用</td>
</tr>
<tr>
<td>307</td>
<td>申明请求的资源临时性删除</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>4**(客户端错误类)</td>
<td>请求包含错误语法或不能正确执行</td>
</tr>
<tr>
<td>400</td>
<td>客户端请求有语法错误，不能被服务器所理解</td>
</tr>
<tr>
<td>401</td>
<td>请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用</td>
</tr>
<tr>
<td>401.2</td>
<td>未授权  服务器配置问题导致登录失败</td>
</tr>
<tr>
<td>401.3</td>
<td>ACL 禁止访问资源</td>
</tr>
<tr>
<td>401.4</td>
<td>未授权 授权被筛选器拒绝</td>
</tr>
<tr>
<td>401.5</td>
<td>未授权 ISAPI 或 CGI 授权失败</td>
</tr>
<tr>
<td>402</td>
<td>保留有效ChargeTo头响应</td>
</tr>
<tr>
<td>403</td>
<td>禁止访问，服务器收到请求，但是拒绝提供服务</td>
</tr>
<tr>
<td>403.1</td>
<td>禁止访问 禁止可执行访问</td>
</tr>
<tr>
<td>403.2</td>
<td>禁止访问 禁止读访问</td>
</tr>
<tr>
<td>403.3</td>
<td>禁止访问 禁止写访问</td>
</tr>
<tr>
<td>403.4</td>
<td>禁止访问 要求 SSL</td>
</tr>
<tr>
<td>403.5</td>
<td>禁止访问 要求 SSL 128</td>
</tr>
<tr>
<td>403.6</td>
<td>禁止访问 IP 地址被拒绝</td>
</tr>
<tr>
<td>403.7</td>
<td>禁止访问 要求客户证书</td>
</tr>
<tr>
<td>403.8</td>
<td>禁止访问 禁止站点访问</td>
</tr>
<tr>
<td>403.9</td>
<td>禁止访问 连接的用户过多</td>
</tr>
<tr>
<td>403.10</td>
<td>禁止访问 配置无效</td>
</tr>
<tr>
<td>403.11</td>
<td>禁止访问 密码更改</td>
</tr>
<tr>
<td>403.12</td>
<td>禁止访问 映射器拒绝访问</td>
</tr>
<tr>
<td>403.13</td>
<td>禁止访问 客户证书已被吊销</td>
</tr>
<tr>
<td>403.15</td>
<td>禁止访问 客户访问许可过多</td>
</tr>
<tr>
<td>403.16</td>
<td>禁止访问 客户证书不可信或者无效</td>
</tr>
<tr>
<td>403.17</td>
<td>禁止访问 客户证书已经到期或者尚未生效</td>
</tr>
<tr>
<td>404</td>
<td>一个404错误表明可连接服务器，但服务器无法取得所请求的网页，请求资源不存在。eg  输入了错误的URL</td>
</tr>
<tr>
<td>405</td>
<td>用户在Request-Line字段定义的方法不允许</td>
</tr>
<tr>
<td>406</td>
<td>根据用户发送的Accept拖，请求资源不可访问</td>
</tr>
<tr>
<td>407</td>
<td>类似401，用户必须首先在代理服务器上得到授权</td>
</tr>
<tr>
<td>408</td>
<td>客户端没有在用户指定的饿时间内完成请求</td>
</tr>
<tr>
<td>409</td>
<td>对当前资源状态，请求不能完成</td>
</tr>
<tr>
<td>410</td>
<td>服务器上不再有此资源且无进一步的参考地址</td>
</tr>
<tr>
<td>411</td>
<td>服务器拒绝用户定义的Content-Length属性请求</td>
</tr>
<tr>
<td>412</td>
<td>一个或多个请求头字段在当前请求中错误</td>
</tr>
<tr>
<td>413</td>
<td>请求的资源大于服务器允许的大小</td>
</tr>
<tr>
<td>414</td>
<td>请求的资源URL长于服务器允许的长度</td>
</tr>
<tr>
<td>415</td>
<td>请求资源不支持请求项目格式</td>
</tr>
<tr>
<td>416</td>
<td>请求中包含Range请求头字段，在当前请求资源范围内没有range指示值，请求也不包含If-Range请求头字段</td>
</tr>
<tr>
<td>417</td>
<td>服务器不满足请求Expect头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满足请求长。</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>5**(服务端错误类)</td>
<td>服务器不能正确执行一个正确的请求</td>
</tr>
<tr>
<td>500</td>
<td>服务器遇到错误，无法完成请求</td>
</tr>
<tr>
<td>500.100</td>
<td>内部服务器错误 ASP 错误</td>
</tr>
<tr>
<td>500-11</td>
<td>服务器关闭</td>
</tr>
<tr>
<td>500-12</td>
<td>应用程序重新启动</td>
</tr>
<tr>
<td>500-13</td>
<td>服务器太忙</td>
</tr>
<tr>
<td>500-14</td>
<td>应用程序无效</td>
</tr>
<tr>
<td>500-15</td>
<td>不允许请求 global.asa</td>
</tr>
<tr>
<td>501</td>
<td>未实现</td>
</tr>
<tr>
<td>502</td>
<td>网关错误</td>
</tr>
<tr>
<td>503</td>
<td>由于超载或停机维护，服务器目前无法使用，一段时间后可能恢复正常</td>
</tr>
</tbody></table>
<p>延伸: OSI七层模型</p>
<ul>
<li>物理层<ul>
<li>建立,维护,断开物理连接</li>
</ul>
</li>
<li>数据链路层<ul>
<li>建立逻辑连接,进行硬件地址寻址,差错校验等功能</li>
</ul>
</li>
<li>网络层<ul>
<li>进行逻辑地址寻址,实现不同网络之间的路径选择</li>
</ul>
</li>
<li>传输层<ul>
<li>定义传输数据的协议端口号,以及流控和差错校验</li>
<li>协议有:TCP UDP,数据包一旦离开网卡即进入网络传输层</li>
</ul>
</li>
<li>会话层<ul>
<li>建立,管理,终止会话</li>
</ul>
</li>
<li>表示层<ul>
<li>数据的表示,安全和压缩</li>
</ul>
</li>
<li>应用层<ul>
<li>网络服务和最终用户的一个接口</li>
<li>协议有HTTPS,FTP等</li>
</ul>
</li>
</ul>
<p>延伸:HTTP协议的工作特点和工作原理</p>
<ul>
<li>工作特点<ul>
<li>基于B&#x2F;S模式</li>
<li>通信开销小,简单快速,传输成本低</li>
<li>使用灵活,可使用超文本传输协议</li>
<li>节省传输时间</li>
<li>无状态</li>
</ul>
</li>
<li>工作原理<ul>
<li>客户端发送请求给服务器,创建一个TCP连接,指定端口号(默认80),连接到服务器,服务器监听浏览器请求,一旦监听到客户端请求,分析请求类型后,服务器会想客户端返回状态信息和数据内容<br>延伸:HTTP协议常见请求&#x2F;响应头和请求方法</li>
</ul>
</li>
</ul>
<blockquote>
<p>常见请求&#x2F;响应头</p>
</blockquote>
<ul>
<li>Content-Type</li>
<li>Accept</li>
<li>Origin</li>
<li>Cookie</li>
<li>Cache-Control</li>
<li>User-Agent</li>
<li>Referrer</li>
<li>X-Forwarded-For</li>
<li>Access-Control-Allow-Origin</li>
<li>Last-Modified</li>
</ul>
<table>
<thead>
<tr>
<th>协议头</th>
<th>说明</th>
<th>示例</th>
<th>状态</th>
</tr>
</thead>
<tbody><tr>
<td>Accept-Encoding</td>
<td>可接受的响应内容的编码方式。</td>
<td><code>Accept-Encoding:gzip,deflate</code></td>
<td>固定</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>可接受的响应内容语言列表。</td>
<td><code>Accept-Language:en-US</code></td>
<td>固定</td>
</tr>
<tr>
<td>Accept-Datetime</td>
<td>可接受的按照时间来表示的响应内容版本</td>
<td>Accept-Datetime:Sat,26Dec201517:30:00GMT</td>
<td>临时</td>
</tr>
<tr>
<td>Authorization</td>
<td>用于表示HTTP协议中需要认证资源的认证信息</td>
<td>Authorization:BasicOSdjJGRpbjpvcGVuIANlc2SdDE&#x3D;&#x3D;</td>
<td>固定</td>
</tr>
<tr>
<td>Cache-Control</td>
<td>用来指定当前的请求&#x2F;回复中的，是否使用缓存机制。</td>
<td><code>Cache-Control:no-cache</code></td>
<td>固定</td>
</tr>
<tr>
<td>Connection</td>
<td>客户端（浏览器）想要优先使用的连接类型</td>
<td><code>Connection:keep-alive</code><p><code>Connection:Upgrade</code></p></td>
<td>固定</td>
</tr>
<tr>
<td>Cookie</td>
<td>由之前服务器通过<code>Set-Cookie</code>（见下文）设置的一个HTTP协议Cookie</td>
<td><code>Cookie:$Version=1;Skin=new;</code></td>
<td>固定：标准</td>
</tr>
<tr>
<td>Content-Length</td>
<td>以8进制表示的请求体的长度</td>
<td><code>Content-Length:348</code></td>
<td>固定</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>请求体的内容的二进制MD5散列值（数字签名），以Base64编码的结果</td>
<td>Content-MD5:oD8dH2sgSW50ZWdyaIEd9D&#x3D;&#x3D;</td>
<td>废弃</td>
</tr>
<tr>
<td>Content-Type</td>
<td>请求体的MIME类型（用于POST和PUT请求中）</td>
<td>Content-Type:application&#x2F;x-www-form-urlencoded</td>
<td>固定</td>
</tr>
<tr>
<td>Date</td>
<td>发送该消息的日期和时间（以&lt;ahref&#x3D;”<a href="http://tools.ietf.org/html/rfc7231#section-7.1.1.1&quot;rel=&quot;nofollow&quot;target=&quot;_blank&quot;&gt;RFC7231">http://tools.ietf.org/html/rfc7231#section-7.1.1.1&quot;rel=&quot;nofollow&quot;target=&quot;_blank&quot;&gt;RFC7231</a></a>中定义的”HTTP日期”格式来发送）</td>
<td>Date:Dec,26Dec201517:30:00GMT</td>
<td>固定</td>
</tr>
<tr>
<td>Expect</td>
<td>表示客户端要求服务器做出特定的行为</td>
<td><code>Expect:100-continue</code></td>
<td>固定</td>
</tr>
<tr>
<td>From</td>
<td>发起此请求的用户的邮件地址</td>
<td><code>From:<a href="mailto:&#x75;&#115;&#101;&#114;&#64;&#105;&#x74;&#98;&#x69;&#x6c;&#117;&#46;&#99;&#111;&#109;">&#x75;&#115;&#101;&#114;&#64;&#105;&#x74;&#98;&#x69;&#x6c;&#117;&#46;&#99;&#111;&#109;</a></code></td>
<td>固定</td>
</tr>
<tr>
<td>Host</td>
<td>表示服务器的域名以及服务器所监听的端口号。如果所请求的端口是对应的服务的标准端口（80），则端口号可以省略。</td>
<td><code>Host:<a href="http://www.itbilu.com/">www.itbilu.com:80</a></code><p><code>Host:<a href="http://www.itbilu.com/">www.itbilu.com</a></code></p></td>
<td>固定</td>
</tr>
<tr>
<td>If-Match</td>
<td>仅当客户端提供的实体与服务器上对应的实体相匹配时，才进行对应的操作。主要用于像PUT这样的方法中，仅当从用户上次更新某个资源后，该资源未被修改的情况下，才更新该资源。</td>
<td>If-Match:”9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td>固定</td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td>允许在对应的资源未被修改的情况下返回304未修改</td>
<td>If-Modified-Since:Dec,26Dec201517:30:00GMT</td>
<td>固定</td>
</tr>
<tr>
<td>If-None-Match</td>
<td>允许在对应的内容未被修改的情况下返回304未修改（304NotModified），参考超文本传输协议的实体标记</td>
<td>If-None-Match:”9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td>固定</td>
</tr>
<tr>
<td>If-Range</td>
<td>如果该实体未被修改过，则向返回所缺少的那一个或多个部分。否则，返回整个新的实体</td>
<td>If-Range:”9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td>固定</td>
</tr>
<tr>
<td>If-Unmodified-Since</td>
<td>仅当该实体自某个特定时间以来未被修改的情况下，才发送回应。</td>
<td>If-Unmodified-Since:Dec,26Dec201517:30:00GMT</td>
<td>固定</td>
</tr>
<tr>
<td>Max-Forwards</td>
<td>限制该消息可被代理及网关转发的次数。</td>
<td><code>Max-Forwards:10</code></td>
<td>固定</td>
</tr>
<tr>
<td>Origin</td>
<td>发起一个针对&lt;ahref&#x3D;”<a href="http://itbilu.com/javascript/js/VkiXuUcC.html&quot;rel=&quot;nofollow&quot;target=&quot;_blank&quot;&gt;%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB">http://itbilu.com/javascript/js/VkiXuUcC.html&quot;rel=&quot;nofollow&quot;target=&quot;_blank&quot;&gt;跨域资源共享</a></a>的请求（该请求要求服务器在响应中加入一个<code>Access-Control-Allow-Origin</code>的消息头，表示访问控制所允许的来源）。</td>
<td><code>Origin:<a href="http://www.itbilu.com/">http://www.itbilu.com</a></code></td>
<td>固定:标准</td>
</tr>
<tr>
<td>Pragma</td>
<td>与具体的实现相关，这些字段可能在请求&#x2F;回应链中的任何时候产生。</td>
<td><code>Pragma:no-cache</code></td>
<td>固定</td>
</tr>
<tr>
<td>Proxy-Authorization</td>
<td>用于向代理进行认证的认证信息。</td>
<td>Proxy-Authorization:BasicIOoDZRgDOi0vcGVuIHNlNidJi2&#x3D;&#x3D;</td>
<td>固定</td>
</tr>
<tr>
<td>Range</td>
<td>表示请求某个实体的一部分，字节偏移以0开始。</td>
<td><code>Range:bytes=500-999</code></td>
<td>固定</td>
</tr>
<tr>
<td>Referer</td>
<td>表示浏览器所访问的前一个页面，可以认为是之前访问页面的链接将浏览器带到了当前页面。<code>Referer</code>其实是<code>Referrer</code>这个单词，但RFC制作标准时给拼错了，后来也就将错就错使用<code>Referer</code>了。</td>
<td>Referer:<a href="http://itbilu.com/nodejs">http://itbilu.com/nodejs</a></td>
<td>固定</td>
</tr>
<tr>
<td>TE</td>
<td>浏览器预期接受的传输时的编码方式：可使用回应协议头<code>Transfer-Encoding</code>中的值（还可以使用”trailers”表示数据传输时的分块方式）用来表示浏览器希望在最后一个大小为0的块之后还接收到一些额外的字段。</td>
<td><code>TE:trailers,deflate</code></td>
<td>固定</td>
</tr>
<tr>
<td>User-Agent</td>
<td>浏览器的身份标识字符串</td>
<td><code>User-Agent:Mozilla/……</code></td>
<td>固定</td>
</tr>
<tr>
<td>Upgrade</td>
<td>要求服务器升级到一个高版本协议。</td>
<td>Upgrade:HTTP&#x2F;2.0,SHTTP&#x2F;1.3,IRC&#x2F;6.9,RTA&#x2F;x11</td>
<td>固定</td>
</tr>
<tr>
<td>Via</td>
<td>告诉服务器，这个请求是由哪些代理发出的。</td>
<td>Via:1.0fred,1.1itbilu.com.com(Apache&#x2F;1.1)</td>
<td>固定</td>
</tr>
<tr>
<td>Warning</td>
<td>一个一般性的警告，表示在实体内容体中可能存在错误。</td>
<td>Warning:199Miscellaneouswarning</td>
<td>固定</td>
</tr>
</tbody></table>
<blockquote>
<p>请求方法</p>
</blockquote>
<p>get,post,head,options,put,delete,trace</p>
<p>get和post的区别</p>
<p>延伸:HTTPS协议的工作原理</p>
<p>HTTPS是一种基于ssl&#x2F;tls的http协议,所有的http数据都是在ssl&#x2F;tls协议封装之上传输的</p>
<p>HTTPs协议在http协议的基础上,添加了ssl&#x2F;tls握手以及数据加密传输,也属于应用层协议</p>
<p>延伸:常见网络协议含义及端口</p>
<ul>
<li>ftp 文件传输</li>
<li>telnet 远程登录</li>
<li>smtp 简单邮件传输协议</li>
<li>pop3 接收邮件</li>
<li>http 超文本传输协议</li>
<li>dns 用于域名解析</li>
</ul>
<hr>
<p><a href="https://www.cnblogs.com/jianying/p/7992622.html">HTTP状态码大全</a><br><a href="https://blog.csdn.net/qq_30553235/article/details/79282113">常用的HTTP请求头与响应头</a></p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识值面向对象</title>
    <url>/posts/9091.html</url>
    <content><![CDATA[<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="考点"><a href="#考点" class="headerlink" title="考点"></a>考点</h2><p>请写出PHP类权限控制修饰符</p>
<ul>
<li>public</li>
<li>private</li>
<li>protected</li>
</ul>
<p>成员访问权限<br>单一继承<br>方法重写</p>
<p>延伸:面向对象的封装、继承和多态</p>
<p>抽象类的定义<br>接口的定义</p>
<p>延伸:魔术方法</p>
<p>延伸:设计模式</p>
<p>常见设计模式:<br>工厂模式<br>单例模式<br>注册数模式<br>适配器模式<br>观察者模式<br>策略模式</p>
<p>着重记忆php面向对象的基本语法,记忆魔术方法,理解常见设计模式</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识及配置考点</title>
    <url>/posts/63586.html</url>
    <content><![CDATA[<p>版本控制软件</p>
<ul>
<li><p>集中式<br>  需要一个中央服务器,所有的代码都通过中央服务器进行管理</p>
</li>
<li><p>分布式<br>  每个客户端都有代码</p>
</li>
<li><p>cvs和svn</p>
</li>
<li><p>git</p>
</li>
</ul>
<p>延伸:php的运行原理</p>
<p>nginx+php-fpm</p>
<p>CGI</p>
<p>FastCGI</p>
<p>PHP-FPM 是FastCGI的管理器</p>
<p>延伸: PHP常见配置项</p>
<ul>
<li>register-globals<br>  注入变量</li>
<li>allow_url_fopen<br>  是否允许打开远程文件</li>
<li>all_url_include<br>  运程包含文件</li>
<li>data.timezone<br>  时区</li>
<li>display_errors<br>  是否展示错误</li>
<li>error_reporting<br>  展示错误级别</li>
<li>safe_mode<br>  是否开启安全模式</li>
<li>upload_max_filesize<br>  上传的最大文件大小</li>
<li>max_file_uploads<br>  上传最大文件数量</li>
<li>post_max_size<br>  post的最大文件大小</li>
</ul>
<blockquote>
<p>请简述CGI,FastCGI和PHP-FPM的区别</p>
</blockquote>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>模拟内置函数的考点</title>
    <url>/posts/58421.html</url>
    <content><![CDATA[<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="array"><a href="#array" class="headerlink" title="array"></a>array</h2><p>数组,最简单而且应用最为广泛的数据结构之一</p>
<p>特性: 使用连续的内存来存储,数组中的所有蒜素必须是相同的类型或类型的衍生(同质数据结构),元素可以通过下标直接访问.</p>
<h2 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h2><p>链表,线性表的一种,最基本最简单也是最常用的数据结构</p>
<p>特性: 元素之间的关系是一对一的关系(除了第一个和最后一个元素,其他元素都是首位相连),顺序存储结构和链式存储结构两种存储方式</p>
<h2 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h2><p>栈,和队列相似,一个带有数据存储特性的数据结构</p>
<p>特性: 存储数据是先进后出的,栈只有一个出口,只能从栈顶增加和移除元素</p>
<h2 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h2><p>堆,一本情况下,堆叫二叉堆,近似完全二叉树的数据结构</p>
<p>特性:子节点的键值或者索引总是小于它的父节点,每个节点的左右子树又是一个二叉堆,根节点最大的堆叫最大堆或者大根堆,最小的叫最小堆或者小根堆</p>
<h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><p>线性表,由零个或者多个数据元素组成的有限序列</p>
<p>特性:线性表是一个序列,零个元素构成的线性表是空表,第一个元素无先驱,最后一个元素无后继,其他元素都只有一个先驱和后继.有长度,长度是元素个数,长度有限.</p>
<h2 id="doubly-linked-list"><a href="#doubly-linked-list" class="headerlink" title="doubly-linked-list"></a>doubly-linked-list</h2><p>双向链表</p>
<p>特性: 每个元素都是一个对象,每个对象有一个关键字key和两个指针next和prev</p>
<h2 id="queue"><a href="#queue" class="headerlink" title="queue"></a>queue</h2><p>队列</p>
<p>特性:先进先出,并发中使用可以安全地将对象从一个任务传给另一个任务</p>
<h2 id="set"><a href="#set" class="headerlink" title="set"></a>set</h2><p>集合</p>
<p>特性: 保存不重复的元素</p>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>字典</p>
<p>特性: 关联数组,也被叫做字典或者键值对</p>
<h2 id="graph"><a href="#graph" class="headerlink" title="graph"></a>graph</h2><p>图</p>
<p>特性:通常是一所邻接矩阵和邻接表表示,前者易实现但是对于稀疏矩阵会浪费较多空间,后者使用链表的方式存储信息但是对于图搜索时间复杂度较高</p>
<h1 id="解题方法"><a href="#解题方法" class="headerlink" title="解题方法"></a>解题方法</h1><p>通常可以使用数组的方式来实现</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器缓存和数据压缩</title>
    <url>/posts/52581.html</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>php函数积累</title>
    <url>/posts/47123.html</url>
    <content><![CDATA[<h3 id="register-shutdown-function"><a href="#register-shutdown-function" class="headerlink" title="register_shutdown_function"></a>register_shutdown_function</h3><h3 id="array-multisort"><a href="#array-multisort" class="headerlink" title="array_multisort"></a>array_multisort</h3><blockquote>
<p>bool array_multisort ( array &amp;$array1 [, mixed $array1_sort_order &#x3D; SORT_ASC [, mixed $array1_sort_flags &#x3D; SORT_REGULAR [, mixed $… ]]] )</p>
</blockquote>
<p><a href="http://php.net/manual/zh/function.array-multisort.php">array_multisort()</a> 可以用来一次对多个数组进行排序，或者根据某一维或多维对多维数组进行排序。</p>
<p>这种类似于从sql语句中的sort by排序还是挺有用的.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$data</span> = [</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;math&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">90</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;english&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">70</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;computer&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">70</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;math&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">60</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;computer&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">90</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;math&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">30</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;computer&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">40</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;english&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">30</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;math&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">20</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&#x27;class&#x27;</span> =&gt; <span class="string">&#x27;english&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span> =&gt; <span class="number">90</span>,</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="variable">$column</span>[<span class="string">&#x27;class&#x27;</span>][<span class="variable">$key</span>] = <span class="variable">$value</span>[<span class="string">&#x27;class&#x27;</span>];</span><br><span class="line">    <span class="variable">$column</span>[<span class="string">&#x27;score&#x27;</span>][<span class="variable">$key</span>] = <span class="variable">$value</span>[<span class="string">&#x27;score&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 类似于sql中的 select * from student order by `class` asc, score desc;</span></span><br><span class="line"><span class="title function_ invoke__">array_multisort</span>(<span class="variable">$column</span>[<span class="string">&#x27;class&#x27;</span>], SORT_ASC, SORT_STRING , <span class="variable">$column</span>[<span class="string">&#x27;score&#x27;</span>], SORT_DESC, <span class="variable">$data</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$data</span>);</span><br></pre></td></tr></table></figure>

<p>有趣的是他的参数，还可以这么用</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$a</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="variable">$b</span> = [<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="variable">$c</span> = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">array_multisort</span>(<span class="variable">$a</span>, SORT_DESC, <span class="variable">$b</span>, <span class="variable">$c</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$b</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$c</span>);</span><br></pre></td></tr></table></figure>

<p>可以从结果中看到 $b&#x2F;$c 都是按照 $a 的顺序重新排的</p>
<h3 id="get-object-vars"><a href="#get-object-vars" class="headerlink" title="get_object_vars"></a>get_object_vars</h3><p>返回由对象属性组成的关联数组</p>
<h3 id="接口Countable"><a href="#接口Countable" class="headerlink" title="接口Countable"></a>接口Countable</h3><p><a href="https://www.php.net/manual/zh/class.countable.php">类实现 Countable 可被用于 count() 函数. </a></p>
<p>如</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountMe</span> <span class="keyword">implements</span> \<span class="title">Countable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$_myCount</span> = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;_myCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$countable</span> = <span class="keyword">new</span> <span class="title class_">CountMe</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">count</span>(<span class="variable">$countable</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>在这里，count 可以直接作用于对象。</p>
<h3 id="debug-backtrace"><a href="#debug-backtrace" class="headerlink" title="debug_backtrace"></a>debug_backtrace</h3><p><a href="https://www.php.net/manual/zh/function.debug-backtrace.php">产生一条回溯跟踪(backtrace)</a></p>
<p>比如可以这样用：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dump</span>(<span class="params"><span class="variable">$value</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$debugInfo</span> = <span class="title function_ invoke__">debug_backtrace</span>();</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">print</span> <span class="variable">$debugInfo</span>[<span class="number">0</span>][<span class="string">&#x27;file&#x27;</span>] . <span class="string">&quot;:&quot;</span> . <span class="variable">$debugInfo</span>[<span class="number">0</span>][<span class="string">&#x27;line&#x27;</span>]; <span class="comment">// 获取调用这个代码的文件名和行数</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . <span class="variable">$value</span> . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// filename: /tmp/a.php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a_test</span>(<span class="params"><span class="variable">$str</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;\nHi: <span class="subst">$str</span>&quot;</span>;</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">debug_backtrace</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">a_test</span>(<span class="string">&#x27;friend&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// filename: /tmp/b.php</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">&#x27;/tmp/a.php&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// execute result</span></span><br><span class="line"></span><br><span class="line">Hi: <span class="title function_ invoke__">friendarray</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">    [<span class="string">&quot;file&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;F:\test\tmp\a.php&quot;</span></span><br><span class="line">    [<span class="string">&quot;line&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">10</span>)</span><br><span class="line">    [<span class="string">&quot;function&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;a_test&quot;</span></span><br><span class="line">    [<span class="string">&quot;args&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">      [<span class="number">0</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;friend&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="number">1</span>]=&gt;</span><br><span class="line">  <span class="keyword">array</span>(<span class="number">4</span>) &#123;</span><br><span class="line">    [<span class="string">&quot;file&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;F:\test\tmp\b.php&quot;</span></span><br><span class="line">    [<span class="string">&quot;line&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">int</span>(<span class="number">3</span>)</span><br><span class="line">    [<span class="string">&quot;args&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">      [<span class="number">0</span>]=&gt;</span><br><span class="line">      <span class="keyword">string</span>(<span class="number">17</span>) <span class="string">&quot;F:\test\tmp\a.php&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="string">&quot;function&quot;</span>]=&gt;</span><br><span class="line">    <span class="keyword">string</span>(<span class="number">12</span>) <span class="string">&quot;include_once&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Process finished with <span class="keyword">exit</span> code <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h3><p>断言，配合assert_options使用效果很妙</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 激活断言，并设置它为 quiet</span></span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_ACTIVE, <span class="number">1</span>);</span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_WARNING, <span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_QUIET_EVAL, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建处理函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_assert_handler</span>(<span class="params"><span class="variable">$file</span>, <span class="variable">$line</span>, <span class="variable">$code</span>, <span class="variable">$desc</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Assertion failed at <span class="subst">$file</span>:<span class="subst">$line</span>: <span class="subst">$code</span>&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$desc</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;: <span class="subst">$desc</span>&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置回调函数</span></span><br><span class="line"><span class="title function_ invoke__">assert_options</span>(ASSERT_CALLBACK, <span class="string">&#x27;my_assert_handler&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Make an assertion that should fail</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">2</span> &lt; <span class="number">1</span>;</span><br><span class="line"><span class="title function_ invoke__">assert</span>(<span class="variable">$a</span>, <span class="string">&#x27;Two is less than one&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="strftime"><a href="#strftime" class="headerlink" title="strftime"></a>strftime</h3><p>根据区域设置来格式化本地日期和时间</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础知识之自定义函数和内部函数</title>
    <url>/posts/30908.html</url>
    <content><![CDATA[<ul>
<li>考点<br>变量的作用域和静态变量<br>延伸:函数的参数及参数引用传递<br>延伸:函数的返回值及引用返回<br>延伸:外部文件的导入<br>延伸:系统内置函数</li>
</ul>
<blockquote>
<p>变量的作用域也称变量的范围,变量的范围即它定义的上下文背景(也是它的生效范围).大部分PHP变量只有一个单独的范围.这个单独的范围跨度同样包含了include和require引入的文件.</p>
</blockquote>
<ul>
<li>内部使用外部变量<br>global关键字.<br>$GLOBALS及其他超全局数组</li>
</ul>
<blockquote>
<p>静态变量仅在局部函数域中存在,但当程序执行离开作用域时,其值不会消失.</p>
</blockquote>
<ul>
<li>static关键字</li>
</ul>
<ol>
<li>仅初始化一次</li>
<li>初始化时需要赋值</li>
<li>每次执行函数该值会保留</li>
<li>static修饰的变量是局部的,仅在函数内部有效</li>
<li>可以记录函数的调用次数,从而可以在某些条件下中止递归</li>
</ol>
<blockquote>
<p>函数的参数</p>
</blockquote>
<p>默认情况下,函数的参数通过值传递<br>如果希望允许函数修改他的值,必须通过引用传递参数</p>
<blockquote>
<p>函数的返回值</p>
</blockquote>
<p>值通过使用可选的返回的返回语句(return)返回<br>可以返回包括数组和对象的任意类型<br>返回语句会中止函数的执行,将控制权交回函数调用处<br>省略return,返回值为null,不可有多个返回值</p>
<blockquote>
<p>函数的引用返回</p>
</blockquote>
<p>从函数返回一个引用,必须在函数声明和指派返回值给一个变量是都使用引用运算符&amp;</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> &amp;<span class="title">myFunc</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$b</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="title function_ invoke__">myFunc</span>(); <span class="comment">// 10</span></span><br><span class="line"><span class="variable">$a</span> = &amp;<span class="title function_ invoke__">myFunc</span>();</span><br><span class="line"><span class="variable">$a</span> = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">myFunc</span>(); <span class="comment">// 100 函数的值被改了</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>外部文件的导入</p>
</blockquote>
<p>include&#x2F;require语句包含并运行指定文件<br>如果给出路径名称按路径来找,否则从include_path中查找;如果include_path中也没有,则从调用脚本文件所在的目录和当前工作目录下寻找;加载过程中未找到文件,include发出warning,require发出fatel error<br>到一个文件被包含时,其中所包含的代码继承了include所在行的变量范围</p>
<blockquote>
<p>系统内置函数</p>
</blockquote>
<p>时间日期函数<br>data(),strtotime(),mktime(),</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP面试</title>
    <url>/posts/42572.html</url>
    <content><![CDATA[<h3 id="php技术层次"><a href="#php技术层次" class="headerlink" title="php技术层次"></a>php技术层次</h3><blockquote>
<p>君子不器，先要为器，器中成道</p>
</blockquote>
<ol>
<li>php爱好者</li>
<li>php初学者</li>
<li>php初级程序猿</li>
<li>php中级程序猿</li>
<li>php高级程序猿</li>
<li>服务端技术专家</li>
<li>架构师</li>
</ol>
<h3 id="基础内容"><a href="#基础内容" class="headerlink" title="基础内容"></a>基础内容</h3><h5 id="重要性"><a href="#重要性" class="headerlink" title="重要性"></a>重要性</h5><ul>
<li>以基础为前提的面试考察</li>
<li>坚实基础的重要性</li>
<li>保持谦卑之心</li>
</ul>
<h5 id="常见经典面试题"><a href="#常见经典面试题" class="headerlink" title="常见经典面试题"></a>常见经典面试题</h5><ul>
<li>什么是引用变量</li>
<li>写出三种以上MySQL数据库存储引擎的名称</li>
<li>编写一个在线留言本，实现用户的在线留言功能</li>
<li>请写出常见的排序算法</li>
<li>写出尽可能多的linux命令</li>
<li>写出jquery可以处理ajax的几种方法</li>
<li>谈谈你对MVC的认识，说出几个MVC框架</li>
<li>php如何解决网站大流量与高并发的问题</li>
</ul>
<h5 id="透过现象看本质"><a href="#透过现象看本质" class="headerlink" title="透过现象看本质"></a>透过现象看本质</h5><ol>
<li>解题思路和技巧<ol>
<li>回忆只是点</li>
<li>揣测面试官的考察思路</li>
<li>量的前提是精</li>
</ol>
</li>
</ol>
<h5 id="引用变量考点"><a href="#引用变量考点" class="headerlink" title="引用变量考点"></a>引用变量考点</h5><ul>
<li><p>什么是引用变量？在php中用什么符号标识引用变量</p>
</li>
<li><p>概念：在php中引用意味着用不同的名字访问同一个变量内容</p>
</li>
<li><p>定义方式：‘&amp;’</p>
</li>
<li><p>引用变量的工作原理</p>
</li>
</ul>
<p>题：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$data</span> = <span class="title function_ invoke__">ranger</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;d&#x27;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123; <span class="comment">// 1</span></span><br><span class="line">    <span class="variable">$value</span> = &amp;<span class="variable">$data</span>[<span class="variable">$key</span>]; <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$data</span>);</span><br><span class="line"><span class="comment">// 结果：b,c,d,d</span></span><br></pre></td></tr></table></figure>

<p>不知道怎么解释，借用C语言中的指针便可以很容易理解<br>代码一：<br>$a &#x3D; 1;<br>$b &#x3D; $a;<br>$b &#x3D; 2;<br>echo $a; &#x2F;&#x2F; 1<br>代码二：<br>$a &#x3D; 1;$c &#x3D; 3;<br>$b &#x3D; &amp;$a; &#x2F;&#x2F; $a和$b共用一个指针<br>$b &#x3D; 2;<br>echo $a; &#x2F;&#x2F; 2<br>$b &#x3D; &amp;$c; &#x2F;&#x2F; 修改指针时，只是把$b的指针变了，而$a仍然没有变<br>echo $a; &#x2F;&#x2F; 2</p>
<p>这个时候就可以很容易的理解：<br>$a &#x3D; &amp;$b时，$a和$b的“指针”对应的变量其实是一样的（按址传值）。<br>循环步骤一</p>
<ol>
<li>$key和$value同时被赋值 -&gt; 1</li>
<li>-&gt;2把$data[0]和$value指向了同一内存地址（指针）的变量<br>循环步骤二</li>
<li>$key和$value同时被赋值，但这个时候$value和$data[0]是共用同一个指针的，所以$data[0]现在成了b</li>
<li>-&gt;2 把$value的指针换成了$data[1]的指针<br>循环步骤三<br>重复以上步骤</li>
</ol>
<h5 id="常量和数据类型考察点"><a href="#常量和数据类型考察点" class="headerlink" title="常量和数据类型考察点"></a>常量和数据类型考察点</h5><ul>
<li><p>php的字符串的定义方式及各自区别</p>
<ul>
<li>单引号</li>
<li>双引号</li>
<li>heredoc和nowdoc（类似于双引号和单引号）</li>
</ul>
</li>
<li><p>区别 </p>
<ul>
<li>单引号不能解析变量</li>
<li>单引号不能解析转义字符，之后解析单引号和反斜杠本身</li>
<li>变量和变量、变量和字符串、字符串和字符串之间可以用.链接</li>
</ul>
</li>
<li><p>数据类型</p>
<ul>
<li>三大数据类型：标量、复合、特殊<ul>
<li>标量<ul>
<li>浮点：浮点不能用于相等判断<ul>
<li>0.7 + 0.1 !&#x3D; 0.2 二进制转化有损耗</li>
</ul>
</li>
<li>布尔<ul>
<li>false &#x3D;&#x3D; 0， 0.0， ‘ ‘, ‘0’, false, [], NULL</li>
</ul>
</li>
<li>超全局数组<ul>
<li>$GLOBALS, $_GET, $_POST, $_REQUEST, $_SESSION, $_COOKIE, $_SERVER, $FILES, $_ENV<ul>
<li>$REQUEST &#x3D; $_GET+$POST+$_COOKIE</li>
<li>$_SERVER[‘SERVER_ADDR’], $_SERVER[‘SERVER_NAME’], $_SERVER[‘REQUEST_TIME’], $_SERVER[‘QUERY_STRING’], $_SERVER[‘HTTP_RFERER’], $_SERVER[‘HTTP_USER_AGENT’], $_SREVER[‘REMOTE_ADDR’], $_SERVER[‘REQUEST_URI], $_SERVER[‘PATH_INFO’]</li>
</ul>
</li>
</ul>
</li>
<li>NULL<ul>
<li>直接赋值null</li>
<li>未定义</li>
<li>unset</li>
</ul>
</li>
<li>常量<ul>
<li><p>const（语言结构，更快）、define（函数）</p>
</li>
<li><p>const可以定义类常量而define不能</p>
</li>
<li><p>常量一径定义，不能修改也不能删除</p>
</li>
<li><p>预定义常量</p>
<ul>
<li><strong>FILE</strong>, <strong>LINE</strong>, <strong>DIR</strong>, <strong>FUNCTION</strong>, <strong>CLASS</strong>, <strong>TRAIT</strong>, <strong>METHOD</strong>, <strong>NAMESPACE</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>解题方法</p>
<ul>
<li>把总结的点进行梳理和复习，牢记</li>
</ul>
</li>
</ul>
<h1 id="运算符考点"><a href="#运算符考点" class="headerlink" title="运算符考点"></a>运算符考点</h1><h2 id="运算符的优先级"><a href="#运算符的优先级" class="headerlink" title="运算符的优先级"></a>运算符的优先级</h2><p>递增递减&gt;！&gt;算术运算符&gt;大小比较&gt;（不）相等比较&gt;引用&gt;位运算符（^）&gt;位运算符（|）&gt;逻辑与&gt;逻辑或&gt;三目&gt;赋值&gt;and&gt;xor&gt;or</p>
<h3 id="延伸考点"><a href="#延伸考点" class="headerlink" title="延伸考点"></a>延伸考点</h3><ul>
<li><p>&#x3D;&#x3D;和&#x3D;&#x3D;&#x3D;</p>
</li>
<li><p>递增递减不会影响布尔值， false– &#x3D;&#x3D; false</p>
</li>
<li><p>递减Null没有效果，Null – &#x3D;&#x3D;&#x3D; Null</p>
</li>
<li><p>Null++ &#x3D;&#x3D; 1</p>
</li>
<li><p>++1和1++</p>
</li>
<li><p>短路作用</p>
</li>
<li><p>|| &amp;&amp; and or</p>
<ul>
<li>$a &#x3D; false|| true; &#x2F;&#x2F; true    ||的优先级大于&#x3D;</li>
<li>$a &#x3D; false or true; &#x2F;&#x2F; false or的优先级低于&#x3D;</li>
</ul>
</li>
</ul>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>重点记忆<strong>递增&#x2F;递减</strong>运算符的运算规则，逻辑运算符的短路效果，在看到逻辑运算符要多考虑优先级问题</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="number">0</span>;<span class="variable">$b</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$a</span> = <span class="number">3</span> &gt; <span class="number">0</span> || <span class="variable">$b</span> = <span class="number">3</span> &gt; <span class="number">0</span>) &#123; <span class="comment">// $a = ((3&gt;0) || ($b = 3 &gt; 0))</span></span><br><span class="line">    <span class="variable">$a</span>++;</span><br><span class="line">    <span class="variable">$b</span>++;</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$a</span>);</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$b</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// $a ==== true;$b === 1;</span></span><br></pre></td></tr></table></figure>

<h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><h2 id="真题"><a href="#真题" class="headerlink" title="真题"></a>真题</h2><h3 id="请列出php遍历php数组的三种方式及各种区别"><a href="#请列出php遍历php数组的三种方式及各种区别" class="headerlink" title="请列出php遍历php数组的三种方式及各种区别"></a>请列出php遍历php数组的三种方式及各种区别</h3><p>延伸：分支控制</p>
<ol>
<li>for</li>
<li>foreach</li>
<li>while list() each() 组合</li>
</ol>
<table>
<thead>
<tr>
<th>类别</th>
<th>区别</th>
</tr>
</thead>
<tbody><tr>
<td>for</td>
<td>只能遍历索引数组</td>
</tr>
<tr>
<td>foreach</td>
<td>可以遍历索引和关联数组,会reset()<br>先重置指针,后遍历</td>
</tr>
<tr>
<td>while组合</td>
<td>可以遍历索引和关联数组,不会reset()</td>
</tr>
</tbody></table>
<h3 id="分支控制"><a href="#分支控制" class="headerlink" title="分支控制"></a>分支控制</h3><p>if…elseif</p>
<p>使用elseif有一个基本原则,把优先范围小的条件放在前面处理</p>
<p>switch…case</p>
<ol>
<li>和if不同的是,switch后面的控制表达式的数据类型只能是整形,浮点型或字符串</li>
<li>continue语句作用到switch的作用类似于break,跳出switch外的循环,可以使用coutinue 2</li>
<li>会生成跳转表,直接跳转到对应的case<br>效率:如果条件比一个简单的比较要复杂的多或者在一个很多次的循环中,那么用switch语句可能会快些</li>
</ol>
<h2 id="真题-1"><a href="#真题-1" class="headerlink" title="真题"></a>真题</h2><h3 id="php中如何优化多个if…else语句的情况"><a href="#php中如何优化多个if…else语句的情况" class="headerlink" title="php中如何优化多个if…else语句的情况?"></a>php中如何优化多个if…else语句的情况?</h3><ol>
<li>把出现几率较大的条件往前挪</li>
<li>如果判断的条件比较复杂且其值是整形,浮点型或字符串,可以使用switch</li>
</ol>
<h1 id="自定义函数及内部函数的考点"><a href="#自定义函数及内部函数的考点" class="headerlink" title="自定义函数及内部函数的考点"></a>自定义函数及内部函数的考点</h1><h2 id="真题-2"><a href="#真题-2" class="headerlink" title="真题"></a>真题</h2><h1 id="常见框架的特性考点"><a href="#常见框架的特性考点" class="headerlink" title="常见框架的特性考点"></a>常见框架的特性考点</h1><h2 id="真题-3"><a href="#真题-3" class="headerlink" title="真题"></a>真题</h2><h3 id="php框架有哪些"><a href="#php框架有哪些" class="headerlink" title="php框架有哪些,"></a>php框架有哪些,</h3><p>php框架的差异和优缺点</p>
<ol>
<li>Yaf框架<ul>
<li>Yaf使用php扩展的形式写的一个框架,也就是以C语言为底层编写的,性能要比php代码写的框架要快一个数量级</li>
<li>优点:执行效率高,轻量级框架,可扩展性强</li>
<li>缺点:高版本兼容性差,底层代码可读性差,需要安装扩展,功能单一,开发需要编写大量的插件</li>
</ul>
</li>
<li>Yii2框架<ul>
<li>Yii2是一款非常优秀的通用web后端框架结构简单优雅,实用功能丰富,扩展性强,性能高是她最突出的优点</li>
<li>缺点:学习成本较高,相比Yaf很重</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>高并发和大流量解决方案考点</title>
    <url>/posts/12374.html</url>
    <content><![CDATA[<h3 id="php如何解决网站大流量与高并发的问题"><a href="#php如何解决网站大流量与高并发的问题" class="headerlink" title="php如何解决网站大流量与高并发的问题"></a>php如何解决网站大流量与高并发的问题</h3><ul>
<li>重点<ul>
<li>高并发架构相关概念</li>
<li>高并发解决方案案例</li>
</ul>
</li>
</ul>
<h3 id="高并发的问题-需要关心的点"><a href="#高并发的问题-需要关心的点" class="headerlink" title="高并发的问题,需要关心的点"></a>高并发的问题,需要关心的点</h3><p>QPS:每秒钟请求或查询的数量,在互联网领域,指每秒响应的请求数(http请求)</p>
<p>吞吐量:单位时间内处理的请求数量(通常由qps和并发数决定)</p>
<p>PV:综合浏览量(page view),即页面浏览量或者点击量,一个访客在24小时内访问页面的数量.同一个人浏览网站同一页面,只记做以此PV</p>
<p>UV:独立访客(unique vistor),一定时间范围内相同访客多次访问网站,只计算为一个独立访客</p>
<p>带宽:计算带宽需要关注两个指标,峰值流量和页面的平均大小</p>
<p>日网站带宽 &#x3D; PV &#x2F; 统计时间(换算到秒) * 平均页面大小 (单位kb) * 8</p>
<p>压力测试<br>    - 测试能承受的最大的并发数<br>    - 测试最大承受的qbps值</p>
<h3 id="测试工具"><a href="#测试工具" class="headerlink" title="测试工具"></a>测试工具</h3><p>常用测试工具 ab(apache benchmark)<br>    - 创建多个并发访问线程,模拟多个访问者同时对某一个url地址进行访问.</p>
<p>ab的使用<br>    - 模拟并发请求100次,总共请求5000次<br>        - ab -c 100 -n 5000 <a href="http://xxx/">http://xxx</a><br>    - 注意事项<br>        - 测试机器与被测试机器分开<br>        - 不要对线上服务做压力测试<br>        - 观察测试工具ab所在的机器,以及被测试的前端机的cpu,内存,网络等都不超过最高限度的75%</p>
<h3 id="针对优化"><a href="#针对优化" class="headerlink" title="针对优化"></a>针对优化</h3><p>QBS达到极限<br>    - 50<br>        - 小网站,无需优化<br>    - 100<br>        - 假设关系型数据库每次请求在0.01秒内完成<br>        - 假设一个页面只有一个sql查询,那么100qbs意味着1秒钟完成100次请求,但是此时我们并不能保证数据库查询能够完成100次<br>        - 方案<br>            - 数据库缓存层<br>            - 负载均衡<br>    - 800<br>        - 假设使用的是百兆带宽,意味着网站出口的实际带宽是8m左右<br>        - 假设每个页面只有10k,在这个并发条件下,百兆带宽已经吃完<br>        - 方案<br>            - cdn加速<br>            - 负载均衡<br>    - 1000<br>        - 假设使用memcache缓存数据库查询数据,每个页面对memcache的请求远大于直接对db的请求<br>        - memcache的悲观并发数在2w左右,但有可能在之前内网带宽已经吃光,表现出不稳定<br>        - 方案<br>    - 2000<br>        - 这个级别下,文件系统访问锁都成了灾难<br>        - 方案<br>            - 业务分离<br>            - 分布式存储</p>
<ul>
<li>优化    <ul>
<li>流量优化<ul>
<li>防盗链处理</li>
</ul>
</li>
<li>前端优化<ul>
<li>减少http请求</li>
<li>添加异步请求</li>
<li>启用浏览器缓存和文件压缩</li>
<li>CDN加速</li>
<li>建立独立的图片服务器</li>
</ul>
</li>
<li>服务端优化 <ul>
<li>页面静态化处理</li>
<li>并发处理</li>
<li>队列处理</li>
</ul>
</li>
<li>数据库优化<ul>
<li>数据库缓存 redis等</li>
<li>分库分表,分区操作</li>
<li>读写分离</li>
<li>负载均衡</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="web资源防盗链"><a href="#web资源防盗链" class="headerlink" title="web资源防盗链"></a>web资源防盗链</h4><p>盗链概念<br>    - 盗链是指在自己的页面展示一些并不在自己服务器的内容<br>    - 获得他人服务器上的资源地址,绕过别人的资源展示页面,直接在自己的页面上向用户提供此内容<br>    - 小站盗用大站的图片,音乐,视频,软件等<br>    - 通过盗链可以减轻自己服务器的负担,因为真实的空间流量均是来自别人的服务器</p>
<p>防盗链<br>    - 防止他人通过技术手段绕过本站的资源展示页面,盗用本站的资源,让绕开本站资源展示页面的资源链接失效<br>    - 可以大大减轻服务器及带宽压力</p>
<p>防盗链工作原理<br>    - 通过referer或签名,网站可以检测目标网页访问的来源网页,如果是资源文件,则可以追踪到显示它的网页地址<br>    - 一旦检测到来源不是本站即进行阻止或返回指定的页面</p>
<p>防盗链手段<a href="https://blog.csdn.net/zhanghao143lina/article/details/77504046">Nginx防盗链的3种方法
</a><br>    - referer (伪造refer)<br>        - nginx模块ngx_http_referer_moudle用于阻挡来源非法的域名请求<br>            - valid_referers none|blocked|server_names|string …<br>                - none: referer 来源头部为空的情况<br>                - blocked: referer来源不为空,但是其值被代理或者防火墙删除了,这些值都不以http或https开头<br>                - server_name:<br>    - 使用第三方模块HttpAccessKeyMoudle实现Nginx防盗链</p>
<h4 id="减少http请求"><a href="#减少http请求" class="headerlink" title="减少http请求"></a>减少http请求</h4><ul>
<li><p>性能黄建法则</p>
<ul>
<li>只有10%-20%的最终用户响应时间花在接受请求的html文档上,剩下的80%-90%时间花在html文档所应用的所有组件(图片,script,css等)进行的http请求上</li>
<li>改善相应时间的最简单的方式就是减少组件数量</li>
</ul>
</li>
<li><p>http链接产生的开销</p>
<ol>
<li>域名解析</li>
<li>tcp连接</li>
<li>发送请求</li>
<li>等待</li>
<li>下载资源</li>
<li>解析时间</li>
</ol>
</li>
<li><p>减少http请求的方式</p>
<ul>
<li>图片<ul>
<li>图片地图</li>
<li>css sprites(雪碧图)</li>
<li>图片使用base64编码减少页面请求数</li>
</ul>
</li>
<li>css和js<ul>
<li>使用外部的css和js</li>
<li>多个js或css合并</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="启用浏览器缓存"><a href="#启用浏览器缓存" class="headerlink" title="启用浏览器缓存"></a>启用浏览器缓存</h4><ul>
<li>缓存分类<ul>
<li>200 from cache:本地缓存,直接从本地缓存中获取响应,最快速最省流量,因为并没有向服务器发送请求</li>
<li>304 not modified:协商缓存,浏览器在本地没有命中的情况下请求头中发送一定的校验数据到服务端,如果服务端数据没有改变,浏览器从本地缓存相应,返回304.快速,发送的数据很少,只返回一些基本的响应头信息,数据量很小,不发送实际响应体</li>
<li>200 ok:以上两种缓存全部失败,服务器返回完整相应.没有用到缓存,相对缓慢</li>
</ul>
</li>
</ul>
<h5 id="本地缓存"><a href="#本地缓存" class="headerlink" title="本地缓存"></a>本地缓存</h5><p>相关Header</p>
<pre><code>- pragma:http1.0时代遗留的产物,该字段被设置为no-cache时,会告知浏览器禁用本地缓存,即每次都向服务器发送请求
- expires:http1.0时代用来启用本地缓存的字段,其值形如thu,31 dec 2019 11:22:33 GMT的格林威治时间.告诉浏览器缓存实现的时刻,如果没有到该时刻,标明缓存有效,无须发送请求.浏览器与服务器的时间无法保持一致,会影响缓存结果
- cache-control:http1.1针对expires时间不一致的解决方案,它告诉浏览器缓存过期的时间间隔而不是时刻
</code></pre>
<ul>
<li>cache-control<ul>
<li>no-store:禁止浏览器缓存相应</li>
<li>no-cache:不允许直接使用本地缓存,先发起请求和服务器协商</li>
<li>max-age&#x3D;delta-seconds:告知浏览器该响应本地缓存有效的最长期限,单位秒</li>
</ul>
</li>
</ul>
<p>协商缓存:当浏览器没有命中本地缓存,如本地缓存过期或者响应中声明不允许直接使用本地缓存,那么浏览器肯定会发起服务端请求.服务端会验证数据是否修改,如果没有通知则浏览器使用本地缓存</p>
<ul>
<li>协商缓存<ul>
<li>last-modified:通知浏览器资源最后修改时间</li>
<li>if-modified-since:得到资源的最后修改时间后,会将这个信息通过if-modified-since提交到服务器做检查,如果没有修改,返回304状态码</li>
</ul>
</li>
</ul>
<p>Etag:http1.1推出,文件的指纹标识符,如果文件内容修改,指纹会改变</p>
<p>if-none-match:本地缓存失效,会携带此值请求服务端,服务端判断该资源是否改变,如果没有改变,直接使用本地缓存,返回304</p>
<p>适合缓存的内容:<br>    - 不变的图片,如logo,图标等<br>    - js,css静态文件<br>    - 可下载的内容,媒体文件</p>
<p>建议使用协商缓存<br>    - html文件<br>    - 经常替换的图片<br>    - 经常修改的css,js</p>
<p>其中,js css文件的加载可以加入文件签名来拒绝缓存,想index.js?签名</p>
<p>不建议缓存的内容<br>    - 用户隐私<br>    - 经常变化api数据接口</p>
]]></content>
      <categories>
        <category>PHP</category>
        <category>PHP基础知识</category>
      </categories>
      <tags>
        <tag>PHP基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>VUE 安装</title>
    <url>/posts/674324bf.html</url>
    <content><![CDATA[<p>安装 echarts 老是碰到  ERESOLVE could not resolve 的情况</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install echarts --save  --legacy-peer-deps</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
  </entry>
  <entry>
    <title>小程序实现跑马灯效果</title>
    <url>/posts/7526.html</url>
    <content><![CDATA[<p>之前也是做过跑马灯的效果.不过因为小程序无法直接操作demo,所以给我的开发带来了一定的困扰.还好百度到了<a href="https://www.jianshu.com/p/6a354bf8b01f">这个</a></p>
<p>其实那个文章已经说得很清楚了.</p>
<p>看看我的代码吧</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;notice-area flex-row-around-center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-gonggao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>公告<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&#x27;scroll_view_border&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;srcoll_view&quot;</span> <span class="attr">style</span>=<span class="string">&quot;--marginLeft--:&#123;&#123;ad_length&#125;&#125;&quot;</span>&gt;</span>我这里是公告内容,主要是看js如何动态修改wxss中的参数的<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*notict-area*/</span></span><br><span class="line"><span class="selector-class">.notice-area</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#f2f2f2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.notice-area</span> <span class="selector-class">.icon-gonggao</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FC9E46</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.scroll_view_border</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.srcoll_view</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">animation</span>:myfirst <span class="number">10s</span> linear infinite;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> myfirst</span><br><span class="line">&#123;</span><br><span class="line">    <span class="number">0%</span> &#123;<span class="attribute">margin-left</span>:<span class="number">552</span>rpx;&#125;</span><br><span class="line">    <span class="number">100%</span> &#123;<span class="attribute">margin-left</span>:<span class="built_in">var</span>(--marginLeft--);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> memberInfo = res.<span class="property">data</span>;</span><br><span class="line"><span class="keyword">var</span> ad_length = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (memberInfo.<span class="property">shop_ad</span> != <span class="literal">null</span> &amp;&amp; memberInfo.<span class="property">shop_ad</span> != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">    ad_length = <span class="string">&#x27;-&#x27;</span> + memberInfo.<span class="property">shop_ad</span>.<span class="property">length</span> * <span class="number">30</span> + <span class="string">&#x27;rpx&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">ad_length</span>: ad_length,</span><br><span class="line">    <span class="attr">memberInfo</span>: res.<span class="property">data</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>其中需要注意的也只有这个了:</p>
<p>小程序是可以修改wxss中的值的.如上述wxss代码中的 var(–marginLeft–).不过这里的值是通过wxml获取的.而wxml又是通过js获取.</p>
<p>另外注意,在wxss中的<code>var(--marginLeft--)</code>不能写成<code>-var(--marginLeft--)</code><br>wxml中的<code>style=&quot;--marginLeft--:&#123;&#123;ad_length&#125;&#125;&quot;</code>不能写成<code>style=&quot;--marginLeft--:&#39;&#123;&#123;ad_length&#125;&#125;&#39;&quot;</code></p>
]]></content>
      <categories>
        <category>小程序</category>
      </categories>
      <tags>
        <tag>实用代码</tag>
        <tag>小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>小程序错误码</title>
    <url>/posts/41243.html</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>状态码（场景值）</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-1</td>
<td>系统繁忙</td>
</tr>
<tr>
<td>0</td>
<td>请求成功</td>
</tr>
<tr>
<td>40001</td>
<td>验证失败</td>
</tr>
<tr>
<td>40002</td>
<td>不合法的凭证类型</td>
</tr>
<tr>
<td>40003</td>
<td>不合法的OpenID</td>
</tr>
<tr>
<td>40004</td>
<td>不合法的媒体文件类型</td>
</tr>
<tr>
<td>40005</td>
<td>不合法的文件类型</td>
</tr>
<tr>
<td>40006</td>
<td>不合法的文件大小</td>
</tr>
<tr>
<td>40007</td>
<td>不合法的媒体文件id</td>
</tr>
<tr>
<td>40008</td>
<td>不合法的消息类型</td>
</tr>
<tr>
<td>40009</td>
<td>不合法的图片文件大小</td>
</tr>
<tr>
<td>40010</td>
<td>不合法的语音文件大小</td>
</tr>
<tr>
<td>40011</td>
<td>不合法的视频文件大小</td>
</tr>
<tr>
<td>40012</td>
<td>不合法的缩略图文件大小</td>
</tr>
<tr>
<td>40013</td>
<td>不合法的APPID</td>
</tr>
<tr>
<td>40014</td>
<td>不合法的access_token</td>
</tr>
<tr>
<td>40014</td>
<td>不合法的access_token</td>
</tr>
<tr>
<td>40015</td>
<td>不合法的菜单类型</td>
</tr>
<tr>
<td>40016</td>
<td>不合法的按钮个数</td>
</tr>
<tr>
<td>40017</td>
<td>不合法的按钮个数</td>
</tr>
<tr>
<td>40018</td>
<td>不合法的按钮名字长度</td>
</tr>
<tr>
<td>40019</td>
<td>不合法的按钮KEY长度</td>
</tr>
<tr>
<td>40020</td>
<td>不合法的按钮URL长度</td>
</tr>
<tr>
<td>40021</td>
<td>不合法的菜单版本号</td>
</tr>
<tr>
<td>40022</td>
<td>不合法的子菜单级数</td>
</tr>
<tr>
<td>40023</td>
<td>不合法的子菜单按钮个数</td>
</tr>
<tr>
<td>40024</td>
<td>不合法的子菜单按钮类型</td>
</tr>
<tr>
<td>40025</td>
<td>不合法的子菜单按钮名字长度</td>
</tr>
<tr>
<td>40026</td>
<td>不合法的子菜单按钮KEY长度</td>
</tr>
<tr>
<td>40027</td>
<td>不合法的子菜单按钮URL长度</td>
</tr>
<tr>
<td>40028</td>
<td>不合法的自定义菜单使用用户</td>
</tr>
<tr>
<td>41001</td>
<td>缺少access_token参数</td>
</tr>
<tr>
<td>41002</td>
<td>缺少appid参数</td>
</tr>
<tr>
<td>41003</td>
<td>缺少refresh_token参数</td>
</tr>
<tr>
<td>41004</td>
<td>缺少secret参数</td>
</tr>
<tr>
<td>41005</td>
<td>缺少多媒体文件数据</td>
</tr>
<tr>
<td>41006</td>
<td>缺少media_id参数</td>
</tr>
<tr>
<td>41007</td>
<td>缺少子菜单数据</td>
</tr>
<tr>
<td>42001</td>
<td>超时</td>
</tr>
<tr>
<td>43001</td>
<td>需要GET请求</td>
</tr>
<tr>
<td>43002</td>
<td>需要POST请求</td>
</tr>
<tr>
<td>43003</td>
<td>需要HTTPS请求</td>
</tr>
<tr>
<td>44001</td>
<td>多媒体文件为空</td>
</tr>
<tr>
<td>44002</td>
<td>的数据包为空</td>
</tr>
<tr>
<td>44003</td>
<td>图文消息内容为空</td>
</tr>
<tr>
<td>45001</td>
<td>多媒体文件大小超过限制</td>
</tr>
<tr>
<td>45002</td>
<td>消息内容超过限制</td>
</tr>
<tr>
<td>45003</td>
<td>标题字段超过限制</td>
</tr>
<tr>
<td>45004</td>
<td>描述字段超过限制</td>
</tr>
<tr>
<td>45005</td>
<td>链接字段超过限制</td>
</tr>
<tr>
<td>45006</td>
<td>图片链接字段超过限制</td>
</tr>
<tr>
<td>45007</td>
<td>语音播放时间超过限制</td>
</tr>
<tr>
<td>45008</td>
<td>图文消息超过限制</td>
</tr>
<tr>
<td>45009</td>
<td>接口调用超过限制</td>
</tr>
<tr>
<td>45010</td>
<td>创建菜单个数超过限制</td>
</tr>
<tr>
<td>46001</td>
<td>不存在媒体数据</td>
</tr>
<tr>
<td>46002</td>
<td>不存在的菜单版本</td>
</tr>
<tr>
<td>46003</td>
<td>不存在的菜单数据</td>
</tr>
<tr>
<td>40029</td>
<td>登录多次导致code重复&#x2F;appid和secret对应不上，不是同一个小程序</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>小程序</category>
      </categories>
      <tags>
        <tag>小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>不太常用的方法</title>
    <url>/posts/6213.html</url>
    <content><![CDATA[<h3 id="declare"><a href="#declare" class="headerlink" title="declare"></a>declare</h3><p><a href="https://www.php.net/manual/zh/control-structures.declare.php">declare的功能</a></p>
<p>目前支持的三个指令</p>
<ol start="0">
<li>trick</li>
<li>encoding</li>
<li>strict_type</li>
</ol>
<h3 id="set-exception-handler"><a href="#set-exception-handler" class="headerlink" title="set_exception_handler"></a>set_exception_handler</h3><p>设置默认的异常处理程序，用于没有用 try&#x2F;catch 块来捕获的异常。 在 exception_handler 调用后异常会中止。</p>
]]></content>
      <tags>
        <tag>功能代码</tag>
      </tags>
  </entry>
  <entry>
    <title>日期时间相关</title>
    <url>/posts/9324.html</url>
    <content><![CDATA[<h3 id="计算两个日期相差的天数"><a href="#计算两个日期相差的天数" class="headerlink" title="计算两个日期相差的天数"></a>计算两个日期相差的天数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">date_diff</span>(<span class="title function_ invoke__">date_create</span>(<span class="variable">$startDate</span>), <span class="title function_ invoke__">date_create</span>(<span class="variable">$endDate</span>))-&gt;<span class="title function_ invoke__">format</span>(<span class="string">&#x27;%a&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>注意直接用strtotime计算秒的差值可能会有问题，因为有的时区有夏令时&#x2F;冬令时，导致有的天是23或25小时。<br>最起码也要转化成格林威治,最简单的方式是</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">strtotime($date.&#x27;UTC&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="获取日期对应周的范围"><a href="#获取日期对应周的范围" class="headerlink" title="获取日期对应周的范围"></a>获取日期对应周的范围</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWeekRangeOfDate</span>(<span class="params"> <span class="variable">$date</span> </span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$iDate</span> = <span class="title function_ invoke__">strtotime</span>( <span class="variable">$date</span> );</span><br><span class="line">    <span class="variable">$k</span> = <span class="title function_ invoke__">strftime</span>( <span class="string">&#x27;%u&#x27;</span>, <span class="variable">$iDate</span> );</span><br><span class="line">    <span class="variable">$forStart</span> = <span class="variable">$k</span> - <span class="number">1</span>;</span><br><span class="line">    <span class="variable">$forEnd</span> = <span class="number">7</span> - <span class="variable">$k</span>;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="string">&#x27;startDate&#x27;</span> =&gt; <span class="title function_ invoke__">strftime</span>( <span class="string">&#x27;%Y-%m-%d&#x27;</span>, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;- <span class="subst">&#123;$forStart&#125;</span> day&quot;</span>, <span class="variable">$iDate</span>) ),</span><br><span class="line">        <span class="string">&#x27;endDate&#x27;</span> =&gt; <span class="title function_ invoke__">strftime</span>( <span class="string">&#x27;%Y-%m-%d&#x27;</span>, <span class="title function_ invoke__">strtotime</span>(<span class="string">&quot;+ <span class="subst">&#123;$forEnd&#125;</span> day&quot;</span>, <span class="variable">$iDate</span>) ),</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">print_r</span>( <span class="title function_ invoke__">getWeekRangeOfDate</span>( <span class="string">&#x27;2020-12-6&#x27;</span> ) );</span><br></pre></td></tr></table></figure>

<h3 id="获取一段时间的日期"><a href="#获取一段时间的日期" class="headerlink" title="获取一段时间的日期"></a>获取一段时间的日期</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$start_date</span> = <span class="title function_ invoke__">date_create</span>(<span class="string">&quot;1900-01-01&quot;</span>);</span><br><span class="line"><span class="variable">$end_date</span>   = <span class="title function_ invoke__">date_create</span>(<span class="string">&quot;1970-01-05&quot;</span>); <span class="comment">// If you want to include this date, add 1 day</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$interval</span> = <span class="title class_">DateInterval</span>::<span class="title function_ invoke__">createFromDateString</span>(<span class="string">&#x27;1 week&#x27;</span>);</span><br><span class="line"><span class="variable">$daterange</span> = <span class="keyword">new</span> <span class="title class_">DatePeriod</span>(<span class="variable">$start_date</span>, <span class="variable">$interval</span> ,<span class="variable">$end_date</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$daterange</span> <span class="keyword">as</span> <span class="variable">$date1</span>)&#123;</span><br><span class="line">   <span class="keyword">echo</span> <span class="variable">$date1</span>-&gt;<span class="title function_ invoke__">format</span>(<span class="string">&#x27;Y-m-d&#x27;</span>).PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br></pre></td></tr></table></figure>


]]></content>
      <tags>
        <tag>功能代码</tag>
      </tags>
  </entry>
  <entry>
    <title>ClassInfo</title>
    <url>/posts/19777.html</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 类信息</span></span><br><span class="line"><span class="comment"> * Class ClassInfo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassInfo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取类信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ReflectionClass $class</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">\ReflectionClass <span class="variable">$class</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$details</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$class</span>-&gt;<span class="title function_ invoke__">getName</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 用户自定义</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$class</span>-&gt;<span class="title function_ invoke__">isUserDefined</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is user defined\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 内置函数</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$class</span>-&gt;<span class="title function_ invoke__">isInternal</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is built-in\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$class</span>-&gt;<span class="title function_ invoke__">isInterface</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is interface\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$class</span>-&gt;<span class="title function_ invoke__">isAbstract</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is an abstract class\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$class</span>-&gt;<span class="title function_ invoke__">isFinal</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is a final class\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 实例化</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$class</span>-&gt;<span class="title function_ invoke__">isInstantiable</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> can be instantiated\n&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> can not be instantiated\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$class</span>-&gt;<span class="title function_ invoke__">isCloneable</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> can be cloned\n&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> can not be cloned\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$details</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取类代码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ReflectionClass $class</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getClassSource</span>(<span class="params">\ReflectionClass <span class="variable">$class</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$path</span> = <span class="variable">$class</span>-&gt;<span class="title function_ invoke__">getFileName</span>();</span><br><span class="line">        <span class="variable">$lines</span> = <span class="title function_ invoke__">file</span>(<span class="variable">$path</span>);</span><br><span class="line">        <span class="variable">$from</span> = <span class="variable">$class</span>-&gt;<span class="title function_ invoke__">getStartLine</span>();</span><br><span class="line">        <span class="variable">$to</span> = <span class="variable">$class</span>-&gt;<span class="title function_ invoke__">getEndLine</span>();</span><br><span class="line">        <span class="variable">$len</span> = <span class="variable">$to</span> - <span class="variable">$from</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">implode</span>(<span class="title function_ invoke__">array_slice</span>(<span class="variable">$lines</span>, <span class="variable">$from</span> - <span class="number">1</span>, <span class="variable">$len</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 类中方法信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ReflectionClass $class</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">methodData</span>(<span class="params">\ReflectionMethod <span class="variable">$method</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$details</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$method</span>-&gt;<span class="title function_ invoke__">getName</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 用户自定义</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isUserDefined</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is user defined\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 内置函数</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isInternal</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is built-in\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isAbstract</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is abstract\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isPublic</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is public\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isProtected</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is protected\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isPrivate</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is private\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isStatic</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is static\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isFinal</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is final\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">isConstructor</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> is the constructor\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$method</span>-&gt;<span class="title function_ invoke__">returnsReference</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;<span class="subst">$name</span> returns a reference (as opposed to a value)\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$details</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取方法代码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ReflectionMethod $method</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getMethodSource</span>(<span class="params">\ReflectionMethod <span class="variable">$method</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$path</span> = <span class="variable">$method</span>-&gt;<span class="title function_ invoke__">getFileName</span>();</span><br><span class="line">        <span class="variable">$lines</span> = <span class="title function_ invoke__">file</span>(<span class="variable">$path</span>);</span><br><span class="line">        <span class="variable">$from</span> = <span class="variable">$method</span>-&gt;<span class="title function_ invoke__">getStartLine</span>();</span><br><span class="line">        <span class="variable">$to</span> = <span class="variable">$method</span>-&gt;<span class="title function_ invoke__">getEndLine</span>();</span><br><span class="line">        <span class="variable">$len</span> = <span class="variable">$to</span> - <span class="variable">$from</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">implode</span>(<span class="title function_ invoke__">array_slice</span>(<span class="variable">$lines</span>, <span class="variable">$from</span> - <span class="number">1</span>, <span class="variable">$len</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取类的方法中参数的信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ReflectionParameter $arg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ReflectionException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">argData</span>(<span class="params">\ReflectionParameter <span class="variable">$arg</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$details</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">getName</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 参数位置</span></span><br><span class="line">        <span class="variable">$position</span> = <span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">getPosition</span>();</span><br><span class="line">        <span class="variable">$details</span> .= <span class="string">&quot;\$<span class="subst">$name</span> has position <span class="subst">$position</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 所属类的名称</span></span><br><span class="line">        <span class="variable">$declaring_class</span> = <span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">getDeclaringClass</span>();</span><br><span class="line">        <span class="variable">$details</span> .= <span class="string">&quot;\$<span class="subst">$name</span> is declaring class of <span class="subst">&#123;$declaring_class-&gt;getName()&#125;</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 参数的类型</span></span><br><span class="line">        <span class="variable">$class</span> = <span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">getClass</span>();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$class</span>)) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;\$<span class="subst">$name</span> must be a <span class="subst">&#123;$class-&gt;getName()&#125;</span> object\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 是否是引用传递</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">isPassedByReference</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;\$<span class="subst">$name</span> is passed by reference\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 默认值</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">isDefaultValueAvailable</span>()) &#123;</span><br><span class="line">            <span class="variable">$def</span> = <span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">getDefaultValue</span>();</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;\$<span class="subst">$name</span> has default: <span class="subst">$def</span>\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$arg</span>-&gt;<span class="title function_ invoke__">allowsNull</span>()) &#123;</span><br><span class="line">            <span class="variable">$details</span> .= <span class="string">&quot;\$<span class="subst">$name</span> can be null\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$details</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>功能代码</tag>
      </tags>
  </entry>
  <entry>
    <title>oneinstack安装fileinfo扩展</title>
    <url>/posts/26448.html</url>
    <content><![CDATA[<p>前几天引用一个插件提示fileinfo扩展不存在.需要添加扩展.<br>然而网上的大部分教程都是在非oneinstack的基础上配置的.<br>试了几个,出了些问题.但出乎意料的是,找到了这个<br><a href="http://www.laozuo.org/11789.html">oneinstack安装fileinfo扩展</a><br>oneinstack居然自带这个扩展添加方式</p>
]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>oneinstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Apache 配置反向代理</title>
    <url>/posts/c56e918e.html</url>
    <content><![CDATA[<p><a href="https://blog.csdn.net/zhangrouzhu/article/details/80986082">参考文档</a></p>
<p>本地使用 laragon 做开发环境，apache 开启 mod_proxy.so、mod_proxy_http.so 后，修改相应站点配置如下：</p>
<figure class="highlight apacheconf"><table><tr><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *<span class="number">:80</span>&gt;</span></span><br><span class="line">    <span class="attribute">DocumentRoot</span> <span class="string">&quot;D:/www/dist&quot;</span></span><br><span class="line">    <span class="attribute">ServerName</span> dist.test</span><br><span class="line">    <span class="attribute">ServerAlias</span> *.dist.test</span><br><span class="line">    <span class="section">&lt;Directory <span class="string">&quot;D:/www/dist&quot;</span>&gt;</span></span><br><span class="line">        <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">        <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line">    <span class="attribute">Proxyrequests</span> <span class="literal">off</span></span><br><span class="line">    <span class="section">&lt;Proxy *&gt;</span></span><br><span class="line">        <span class="attribute">Order</span> <span class="literal">deny</span>,<span class="literal">allow</span></span><br><span class="line">        <span class="attribute">Allow</span> from <span class="literal">all</span></span><br><span class="line">    <span class="section">&lt;/Proxy&gt;</span></span><br><span class="line">    <span class="attribute">Proxypass</span> /api/ http://tp.test/</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If you want to use SSL, enable it by going to Menu &gt; Apache &gt; SSL &gt; Enabled</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
  </entry>
  <entry>
    <title>phpstorm wamp3 配置xdebug</title>
    <url>/posts/36836.html</url>
    <content><![CDATA[<ol>
<li>本地使用的是tortoiseSVN。注意需要在安装的时候勾选上command line的选项</li>
<li>设置svn.exe文件的地址就选择tortoiseSVN中的svn.exe文件</li>
</ol>
<p>注意：</p>
<p>如果报错说「’C:\Program’ 不是内部或外部命令，也不是可运行的程序 或批处理文件。」时，请在phpstorm中的svn配置项把那两个可选框勾掉。</p>
]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>phpstorm</tag>
      </tags>
  </entry>
  <entry>
    <title>phpstorm laragon 配置xdebug</title>
    <url>/posts/a01aaf48.html</url>
    <content><![CDATA[<h3 id="配置流程"><a href="#配置流程" class="headerlink" title="配置流程"></a>配置流程</h3><p><a href="https://www.cnblogs.com/beidaxmf/p/14527335.html">这里配置流程已经很清晰了，唯一需要说明的是，DBGp 个人用不需要配置</a></p>
<p><a href="https://xdebug.org/docs/all_settings">xdebug 的所有配置项</a></p>
<h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><blockquote>
<p>未建立连接。无法使用 xdebug 启动调试器会话</p>
</blockquote>
<p>经查，是 xdebug 调试端口的问题，改成和 php.ini 配置文件一致即可。</p>
]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>phpstorm</tag>
        <tag>wamp的使用</tag>
      </tags>
  </entry>
  <entry>
    <title>phpstorm自动删除空格行</title>
    <url>/posts/36837.html</url>
    <content><![CDATA[<p>刚刚升级了phpstorm，然后发现自动把我的空格行中的空格删除了。</p>
<p>百度之后就是调整 设置-编辑器-保存-移除尾随空格。反复调整多次，发现没有起到作用。</p>
<p>然后突然想起来php本身有什么类似的配置文件，然后看到phpstorm状态栏中多了个奇怪的配置图标，直接禁用就好了。</p>
<p>是 .editorconfig 这个文件配置的，我就直接禁用了这个配置项就好了。</p>
]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>phpstorm</tag>
      </tags>
  </entry>
  <entry>
    <title>virtualbox 操作实录</title>
    <url>/posts/34899.html</url>
    <content><![CDATA[<h3 id="安装增强功能"><a href="#安装增强功能" class="headerlink" title="安装增强功能"></a>安装增强功能</h3><p>几次提示「未能加载虚拟光盘」，然后就把光盘给卸载了，然后直接点击 设备-&gt;安装增强功能，貌似就成功了</p>
<h3 id="共享文件夹"><a href="#共享文件夹" class="headerlink" title="共享文件夹"></a>共享文件夹</h3><p>编辑共享文件夹</p>
<p>共享文件夹路径：宿主机下路径，即windows下的路径。比如我的「E:\Downloads」</p>
<p>共享文件夹名称：在虚拟机中的名称。比如我的「download」</p>
<p>然后执行一下命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo mkdir /mnt/download</span><br><span class="line">// 挂载</span><br><span class="line">sudo mount -t vboxsf download /mnt/shared</span><br><span class="line">// 如果不想每次都执行挂载命令，就在/etc/fstab下编辑设置自动挂载</span><br><span class="line">share /mnt/shared vboxsf rw,gid=100,uid=1000,auto 0 0</span><br><span class="line">// 卸载</span><br><span class="line">sudo umount -f /mnt/shared</span><br></pre></td></tr></table></figure>

<h3 id="开发环境安装"><a href="#开发环境安装" class="headerlink" title="开发环境安装"></a>开发环境安装</h3><h4 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h4><p>安装命令</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">./configure --prefix=/usr/local/install/php8 --with-config-file-<span class="built_in">path</span>=/usr/local/install/php8/etc --with-curl --with-freetype --enable-gd --with-jpeg  --with-gettext --with-kerberos --with-libdir=lib64 --with-libxml --with-mysqli --with-openssl --with-pdo-mysql  --with-pdo-sqlite --with-pear --enable-sockets --with-mhash --with-ldap-sasl --with-xsl --with-zlib --with-zip -with-bz2 --with-iconv  --enable-fpm --enable-pdo  --enable-bcmath  --enable-mbregex --enable-mbstring --enable-opcache --enable-pcntl  --enable-shmop --enable-soap --enable-sockets --enable-sysvsem --enable-xml --enable-sysvsem --enable-cli --enable-opcache --enable-intl --enable-calendar --enable-static --enable-mysqlnd --enable-debug --enable-fileinfo</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP模式分隔符</title>
    <url>/posts/33585.html</url>
    <content><![CDATA[<p><a href="https://www.php.net/manual/zh/regexp.reference.delimiters.php">分隔符</a></p>
<p>说起来这个不是什么特别重要的东西，但不知道我为什么会在乎这个</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Another rule</span></span><br><span class="line"><span class="variable">$aPatternMode2</span>[<span class="string">&#x27;tasksetid&#x27;</span>] = <span class="string">&quot;&lt;input.*?name=\&quot;unitinfo\[(?&lt;unitinfoid&gt;\d+)\]\[tasksetid\]\[(?&lt;key&gt;\d+)\]\&quot;.*?value=\&quot;(?&lt;value&gt;.*?)\&quot;.*?&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$aPatternMode2</span>[<span class="string">&#x27;islost&#x27;</span>] = <span class="string">&quot;&lt;input.*?name=\&quot;unitinfo\[(?&lt;unitinfoid&gt;\d+)\]\[islost\]\[(?&lt;key&gt;\d+)\]\&quot;.*?value=\&quot;(?&lt;value&gt;.*?)\&quot;.*?&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$aPatternMode2</span>[<span class="string">&#x27;sequenceOrder&#x27;</span>] = <span class="string">&quot;&lt;input.*?name=\&quot;unitinfo\[(?&lt;unitinfoid&gt;\d+)\]\[sequenceOrder\]\[(?&lt;key&gt;\d+)\]\&quot;.*?value=\&quot;(?&lt;value&gt;.*?)\&quot;.*?&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$aPatternMode2</span>[<span class="string">&#x27;schedule_set_id&#x27;</span>] = <span class="string">&quot;&lt;input.*?name=\&quot;unitinfo\[(?&lt;unitinfoid&gt;\d+)\]\[schedule_set_id\]\[(?&lt;key&gt;\d+)\]\&quot;.*?value=\&quot;(?&lt;value&gt;.*?)\&quot;.*?&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$aPatternMode2</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$pattern</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$sContent</span>, <span class="variable">$match</span>, PREG_SET_ORDER)) &#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$match</span> <span class="keyword">as</span> <span class="variable">$matchItem</span>) &#123;</span><br><span class="line">            <span class="variable">$aUnitinfo</span>[<span class="variable">$matchItem</span>[<span class="string">&#x27;unitinfoid&#x27;</span>]][<span class="variable">$key</span>][<span class="variable">$matchItem</span>[<span class="string">&#x27;key&#x27;</span>]] = <span class="variable">$matchItem</span>[<span class="string">&#x27;value&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>像这样，分隔符就别的可有可无了。我也是无意间发现的。</p>
<p>明明是一件不重要的事情，可就是让我如鲠在喉。<br>其实我是模式修饰符用的不多，这个分隔符加在模式和<a href="https://www.php.net/manual/zh/reference.pcre.pattern.modifiers.php">修饰符</a>之间的，是相当有用的。</p>
]]></content>
      <categories>
        <category>正则</category>
      </categories>
      <tags>
        <tag>实用代码</tag>
        <tag>正则</tag>
      </tags>
  </entry>
  <entry>
    <title>WAMP的一些基本配置</title>
    <url>/posts/49937.html</url>
    <content><![CDATA[<h1 id="环境变量的配置"><a href="#环境变量的配置" class="headerlink" title="环境变量的配置"></a>环境变量的配置</h1><p>把 C:\wamp64\bin\php\php5.6.31;C:\wamp64\bin\mysql\mysql5.7.19\bin 写进环境变量中即可.注意自己安装wamp的位置及各自后面的版本号</p>
<h1 id="服务器设置"><a href="#服务器设置" class="headerlink" title="服务器设置"></a>服务器设置</h1><p>在wamp&#x2F;bin&#x2F;apache&#x2F;Apache###&#x2F;conf&#x2F;httpd.conf文件中设置</p>
<h1 id="根文件夹"><a href="#根文件夹" class="headerlink" title="根文件夹"></a>根文件夹</h1><p>修改documentroot和directory两项<br>保存后重启服务</p>
<h1 id="404返回值"><a href="#404返回值" class="headerlink" title="404返回值"></a>404返回值</h1><p>修改errordocument其后的值并删除前面的#<br>保存后重启服务<br>更改端口<br>修改或增加listen<br>保存后重启服务<br>注意格式，否则重启不了</p>
<h1 id="设置外部访问"><a href="#设置外部访问" class="headerlink" title="设置外部访问"></a>设置外部访问</h1><p>1.更改为一下内容（有两部分）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;E:/wamp/bin/apache/apache2.4.9/cgi-bin&quot;&gt;</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Options None</span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#   onlineoffline tag - don&#x27;t remove</span><br><span class="line">    Require all granted</span><br><span class="line">	allow from all</span><br><span class="line">	</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>

<h1 id="设置localhost默认显示页面"><a href="#设置localhost默认显示页面" class="headerlink" title="设置localhost默认显示页面"></a>设置localhost默认显示页面</h1><p>1.更改以下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;IfModule dir_module&gt;</span><br><span class="line">    DirectoryIndex index.php index.php3 index.html index.htm</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<p>2.如果localhost文件夹中没有上面所包含的页面，地址栏输入localhost将显示localhost文件夹内的文件</p>
<h1 id="取消php函数未定义之类的报错"><a href="#取消php函数未定义之类的报错" class="headerlink" title="取消php函数未定义之类的报错"></a>取消php函数未定义之类的报错</h1><p>在 php.ini 中设置<br>error_reporting &#x3D; E_ALL &amp; ~E_NOTICE<br>其中<br>&amp;：和<br>~：非</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>其他错误类型可以问度娘后根据需要利用逻辑判断进行取舍</p>
<h1 id="修改MySQL默认编码格式"><a href="#修改MySQL默认编码格式" class="headerlink" title="修改MySQL默认编码格式"></a>修改MySQL默认编码格式</h1><p>在my.ini中添加<br>[mysql]添加配置default-character-set&#x3D;utf8<br>[mysqld]添加配置character_set_server&#x3D;utf8</p>
<h1 id="修改post上传文件大小"><a href="#修改post上传文件大小" class="headerlink" title="修改post上传文件大小"></a>修改post上传文件大小</h1><p>在 php.ini 中设置，搜索post后自行寻找……<br>修改服务器时间<br>php.ini文件里的 date.timezone &#x3D; prc(中国时区)</p>
<h1 id="建立第二站点"><a href="#建立第二站点" class="headerlink" title="建立第二站点"></a>建立第二站点</h1><p>打开C:\wamp\bin\apache\apache2.4.9\conf\httpd.conf<br>去掉”Include conf&#x2F;extra&#x2F;httpd-vhosts.conf”的注释<br>去掉”LoadModule rewrite_module modules&#x2F;mod_rewrite.so”的注释<br>httpd.conf文件修改，</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">AllowOverride all</span><br><span class="line">Require all granted</span><br><span class="line">allow from all</span><br></pre></td></tr></table></figure>
<p>打开C:\wamp\bin\apache\apache2.4.9\conf\extra\httpd-vhosts.conf,添加</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName blog</span><br><span class="line">    DocumentRoot &quot;E:/blog&quot;</span><br><span class="line">    &lt;Directory &quot;E:/blog&quot;&gt;</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line">    AllowOverride all</span><br><span class="line">    Order Allow,Deny</span><br><span class="line">    Allow from all</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>hosts 文件添加<br>文件位置：C:\Windows\System32\drivers\etc<br>127.0.0.1      blog</p>
<h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><ol>
<li><p>Options Indexes FollowSymLinks 如果没有，则禁止 Apache 显示该目录结构，那样就不会从浏览器看到该目录下的文件和子目录列表了（不过，服务器有默认优先打开index.html等文件的设置，如果有了此设置且当前目录下有index.html等文件，依旧无法打开此目录）。</p>
</li>
<li><p>第一次输入第二站点时，需要在地址前面带上http:&#x2F;&#x2F;(不知道为什么)</p>
</li>
<li><p>如果开启了第二或者更多的站点,第一个就是localhost能够访问的.这个是由如果还需要启用外部访问,记得要在第一个站点配置加上Allow from all(把上面的改下路径直接覆盖第一个就好了)</p>
</li>
<li><p>如果想使用其他端口（如88）作为登陆，则直接在此文件中加上* Listen:88 <em>，并把对应的配置项改成</em> &lt;VirtualHost *:88&gt; *</p>
</li>
<li><p>在阿里云上配置其他端口时，除了要配置防火墙，还要注意策略组</p>
</li>
</ol>
]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>wamp的使用</tag>
      </tags>
  </entry>
  <entry>
    <title>phpstorm wamp3 配置xdebug</title>
    <url>/posts/36837.html</url>
    <content><![CDATA[<h1 id="phpstorm-配置xdebug"><a href="#phpstorm-配置xdebug" class="headerlink" title="phpstorm 配置xdebug"></a>phpstorm 配置xdebug</h1><p>首先,需要知道的是php运行有两种模式,分别是命令行模式(cli)和浏览器访问模式(cgi).在wamp中,这两种方式使用的配置文件不同</p>
<h2 id="cli模式下的xdebug配置"><a href="#cli模式下的xdebug配置" class="headerlink" title="cli模式下的xdebug配置"></a>cli模式下的xdebug配置</h2><p>如下图所示,首先看看这里面有没有在cli配置文件下配置好xdebug,这里展示的是已经配置好的.</p>
<p><img src="https://wx1.sinaimg.cn/mw690/00784LeJgy1fvyvfwhmflj31h70sstbb.jpg" alt="phpstorm自动识别xdebug配置"></p>
<p>如果没有配置好,则需要自己配置.首先需要在wamp开启xdebug,如图</p>
<p><img src="https://wx1.sinaimg.cn/mw690/00784LeJgy1fvyvfxk3s0j31h70smb29.jpg" alt="wamp开启xdebug"></p>
<p>开启之后,就可以在对应的地方找到xdebug的路径了.打开C:\wamp64\bin\apache\apache2.4.33\bin\php.ini(注意这里的安装位置),搜索xdebug就可以找到了(这就省的自己下载安装xdebug了)</p>
<p>注意,这里的开启的地方是apache使用的php.ini配置文件,和phpstorm使用的配置文件不是同一个.phpstorm使用的是php-cli模式中使用的php.ini配置文件.</p>
<p>这里有两者修改方式,一种是修改配置文件,另一种是修改phpstrom的配置</p>
<p>第一种方式:</p>
<p>可以在这里直接看到,点击编辑即可</p>
<p><img src="https://wx1.sinaimg.cn/mw690/00784LeJgy1fvyvfwmyavj31h70ss41a.jpg" alt="php-cli模式使用的php.ini配置文件位置"></p>
<p>点击编辑之后,就可以直接修改啦</p>
<p><img src="https://wx3.sinaimg.cn/mw690/00784LeJgy1fvyvfwqio0j31h70sstd1.jpg" alt="配置xdebug"></p>
<p>第二种方式:</p>
<p>直接把上述获得的xdebug的路径复制到上述第一张图中的debugger extension即可</p>
<h2 id="cgi下的配置"><a href="#cgi下的配置" class="headerlink" title="cgi下的配置"></a>cgi下的配置</h2><ol>
<li>wamp打开xdebug配置</li>
<li>phpstorm开启监听debug功能(上面的第四张图右上角一个类似电话的图片)</li>
<li>浏览器访问时添加debug session参数.或浏览器下载对应插件开启debug功能(如chrome浏览器使用xdebug helper)</li>
<li>根据提示,配置映射路径</li>
</ol>
]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>phpstorm</tag>
        <tag>wamp的使用</tag>
      </tags>
  </entry>
  <entry>
    <title>wamp3的安装使用</title>
    <url>/posts/32434.html</url>
    <content><![CDATA[<h1 id="wamp3的安装使用"><a href="#wamp3的安装使用" class="headerlink" title="wamp3的安装使用"></a>wamp3的安装使用</h1><p>刚刚安装使用了wamp3,中间遇到了一些问题</p>
<h3 id="缺少msvcr120-dll文件"><a href="#缺少msvcr120-dll文件" class="headerlink" title="缺少msvcr120.dll文件"></a>缺少msvcr120.dll文件</h3><p>这个百度解决的.就是在360人工服务查找这个问题,然后提示安装了什么工具集就好了.</p>
<h3 id="无法配置默认文件路径"><a href="#无法配置默认文件路径" class="headerlink" title="无法配置默认文件路径"></a>无法配置默认文件路径</h3><p>原来wamp3默认开启了v-host的服务,需在httpd-vhosts.conf文件中修改路径</p>
<h3 id="修改路径后无法访问的问题"><a href="#修改路径后无法访问的问题" class="headerlink" title="修改路径后无法访问的问题"></a>修改路径后无法访问的问题</h3><p>需修改httpd.conf文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Directory /&gt;</span><br><span class="line">    AllowOverride none</span><br><span class="line">    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p>改成</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Directory /&gt;</span><br><span class="line">    #AllowOverride none</span><br><span class="line">    #Require all denied</span><br><span class="line">    Options FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order deny,allow</span><br><span class="line">    Deny from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>

<h3 id="总是提示”c-x2F-wamp64-or-PHP-in-PATH”"><a href="#总是提示”c-x2F-wamp64-or-PHP-in-PATH”" class="headerlink" title="总是提示”c:&#x2F;wamp64 or PHP in PATH”"></a>总是提示”c:&#x2F;wamp64 or PHP in PATH”</h3><p>现在的wamp3不提倡使用环境变量.使用环境变量对切换php版本有影响</p>
]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>wamp的使用</tag>
      </tags>
  </entry>
  <entry>
    <title>服务器开启3306端口</title>
    <url>/posts/47365.html</url>
    <content><![CDATA[<p>今天遇到了网站打不开的情况,经测试时是因为无法链接数据库.因为之前的原因,锁定了服务器3306端口没开</p>
<p>centos开启</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT 4 -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT</span><br><span class="line">service iptables save #保存iptables规则</span><br></pre></td></tr></table></figure>
<p>ubuntu开启</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT 4 -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT</span><br><span class="line">iptables-save &gt; /etc/iptables.up.rules #保存iptables规</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>开发环境</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>php正则获取逗号之前的内容</title>
    <url>/posts/42226.html</url>
    <content><![CDATA[<p>原始字符串如”1231312”或”123,123”</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_filter</span>(<span class="string">&quot;/(,.*$)|$/&quot;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$str</span>);</span><br></pre></td></tr></table></figure>

<p>好吧，就是把匹配到的字符替换成空了。总觉的有些怪怪的。</p>
<p>已经找到另一种方法，就是把preg_match那个稍稍封装一下就行了。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pregGetter</span>(<span class="params"><span class="variable">$pattern</span>, <span class="variable">$subject</span>, <span class="variable">$part</span> = <span class="string">&#x27;value&#x27;</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern</span>, <span class="variable">$subject</span>, <span class="variable">$match</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$match</span>[<span class="variable">$part</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>正则</category>
      </categories>
      <tags>
        <tag>实用代码</tag>
        <tag>正则</tag>
      </tags>
  </entry>
  <entry>
    <title>正则匹配修饰符</title>
    <url>/posts/19934.html</url>
    <content><![CDATA[<h3 id="被WIN下的CRLF换行符坑了一把"><a href="#被WIN下的CRLF换行符坑了一把" class="headerlink" title="被WIN下的CRLF换行符坑了一把"></a>被WIN下的CRLF换行符坑了一把</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// crlf模式</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&lt;&lt;&lt;str</span></span><br><span class="line"><span class="string">aaaa |</span></span><br><span class="line"><span class="string">|</span></span><br><span class="line"><span class="string">kkk |</span></span><br><span class="line"><span class="string">str</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&quot;/\|\r$/m&quot;</span>;</span><br><span class="line"><span class="variable">$replace</span> = <span class="string">&quot;i&quot;</span>;</span><br><span class="line"><span class="variable">$res</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$pattern</span>,<span class="variable">$replace</span>, <span class="variable">$str</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>
<p>result</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">aaaa i</span><br><span class="line">i</span><br><span class="line">kkk |</span><br></pre></td></tr></table></figure>

<p>回过头一看，居然忘了「\r」是什么了。</p>
<p>时隔数月又一次遇到这种问题，win（CRLF）下的回车换行是两个不可见字符~~~</p>
<h3 id="终于写出一个把命令行查出结果转化成excel的小脚本了"><a href="#终于写出一个把命令行查出结果转化成excel的小脚本了" class="headerlink" title="终于写出一个把命令行查出结果转化成excel的小脚本了"></a>终于写出一个把命令行查出结果转化成excel的小脚本了</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Class TurnToExcel</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TurnToExcel</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$file_name</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$target_name</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$result</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$content</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $file_name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setFileName</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$file_name</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;file_name = <span class="variable">$file_name</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mixed $target_name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setTargetName</span>(<span class="params"><span class="variable">$target_name</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;target_name = <span class="variable">$target_name</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $content</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setContent</span>(<span class="params"><span class="variable">$content</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;content = <span class="variable">$content</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable language_">$this</span>-&gt;content)) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;content = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$this</span>-&gt;file_name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getContent</span>();</span><br><span class="line">        <span class="variable">$pattern</span> = [</span><br><span class="line">            <span class="string">&quot;/(\r|\n|\r\n)&#123;2,&#125;/&quot;</span>,               <span class="comment">// 删除多余空行</span></span><br><span class="line">            <span class="string">&quot;/\+(-+\+)*(\r|\n|\r\n)?/&quot;</span>,         <span class="comment">// 删除「+-----+----+」</span></span><br><span class="line">            <span class="string">&quot;/^\| */m&quot;</span>,                         <span class="comment">// 删除行首「|」</span></span><br><span class="line">            <span class="string">&quot;/ *\|(\r|\n|\r\n)/&quot;</span>,               <span class="comment">// 删除行尾「|」              // 为什么只有在「lf」换行符模式下才能用「/ *\|$/」</span></span><br><span class="line">            <span class="string">&quot;/ *\| */&quot;</span>,                         <span class="comment">// 把行内「|」替换成「tab」</span></span><br><span class="line">            <span class="string">&quot;/(\r\n|\r|\n)?$/&quot;</span>,                 <span class="comment">// 删除最后一个换行</span></span><br><span class="line">        ];</span><br><span class="line">        <span class="variable">$replace</span> = [</span><br><span class="line">            <span class="string">&quot;<span class="subst">$1</span>&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;<span class="subst">$1</span>&quot;</span>,</span><br><span class="line">            <span class="string">&quot;\t&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span>,</span><br><span class="line">        ];</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;result = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$pattern</span>, <span class="variable">$replace</span>, <span class="variable">$this</span>-&gt;content);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">save</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;target_name) &#123;</span><br><span class="line">            <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$this</span>-&gt;target_name, <span class="variable">$this</span>-&gt;result);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">dump</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;result;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> $this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type:application/vnd.ms-excel&quot;</span>);</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Disposition:attachment;filename=<span class="subst">&#123;$this-&gt;target_name&#125;</span>&quot;</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">iconv</span>(<span class="string">&#x27;utf-8&#x27;</span>, <span class="string">&#x27;gbk//TRANSLIT&#x27;</span>, <span class="variable">$this</span>-&gt;result);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">new</span> <span class="title class_">TurnToExcel</span>())</span><br><span class="line">    -&gt;<span class="title function_ invoke__">setFileName</span>(<span class="string">&#x27;data.txt&#x27;</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">setTargetName</span>(<span class="string">&#x27;data1.txt&#x27;</span>)</span><br><span class="line">    -&gt;<span class="title function_ invoke__">run</span>()</span><br><span class="line">    -&gt;<span class="title function_ invoke__">save</span>();</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>正则</category>
      </categories>
      <tags>
        <tag>实用代码</tag>
        <tag>正则</tag>
      </tags>
  </entry>
  <entry>
    <title>正则在开发中遇到的坑</title>
    <url>/posts/38694.html</url>
    <content><![CDATA[<h3 id="非m模式下匹配范围内「如引号」包括-n在内所有的字符"><a href="#非m模式下匹配范围内「如引号」包括-n在内所有的字符" class="headerlink" title="非m模式下匹配范围内「如引号」包括\n在内所有的字符"></a>非m模式下匹配范围内「如引号」包括\n在内所有的字符</h3><p>一开始使用&#x2F;[.\n]&#x2F;发现匹配失败，改用了&#x2F;(.|\n)&#x2F;才成功。除非是 m 模式，否则 \n 是不会匹配换行符的。</p>
<p>如&#x2F;[\s\S]&#x2F;之类，都可以满足匹配所有字符包括换行的需求。如果使用&#x2F;(.|\n)&#x2F;反而会收到文件换行符的干扰，特别情况需写成&#x2F;(.|\r\n|\r|\n)&#x2F;。</p>
<h3 id="PHP中模式分隔符不是必须的"><a href="#PHP中模式分隔符不是必须的" class="headerlink" title="PHP中模式分隔符不是必须的"></a>PHP中模式分隔符不是必须的</h3><p>诚然，直接写在注入preg_replace()第一个参数位置时是需要使用模式分隔符的。但使用变量引用的话可以忽略。</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$sContent</span> = <span class="string">&#x27;&#x27;</span>; <span class="comment">// 匹配对象</span></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&quot;&lt;input.*?type=\&quot;hidden\&quot;.*?name=\&quot;unitid\&quot;.*?value=\&quot;(?&lt;unitid&gt;.*?)\&quot;&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$sContent</span>, <span class="variable">$match</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$match</span>[<span class="string">&#x27;unitid&#x27;</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正则匹配中英文字符"><a href="#正则匹配中英文字符" class="headerlink" title="正则匹配中英文字符"></a>正则匹配中英文字符</h3><p>&#x2F;^([\p{Han}\p{P}A-Za-z0-9])*$&#x2F;u</p>
<p>其中</p>
<ul>
<li>\p{Han}表示utf-8编码中的所有中文字符，</li>
<li>\p{P}表示中英文标点，</li>
<li>A-Z表示大写字母，</li>
<li>a-z表示小写英文字母，</li>
<li>0-9表示数字，</li>
<li>*表示&gt;&#x3D;0, </li>
<li>&#x2F;u 表示按unicode(utf-8)匹配（主要针对多字节比如汉字）</li>
</ul>
<p>更多 \p 语法参考 <a href="https://www.regular-expressions.info/unicode.html#prop">Unicode Regular Expressions</a></p>
<h3 id="php-之-match-结果"><a href="#php-之-match-结果" class="headerlink" title="php 之 match 结果"></a>php 之 match 结果</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$pattern</span> = <span class="string">&quot;&lt;input.*?type=\&quot;hidden\&quot;.*?name=\&quot;unitid\&quot;.*?value=\&quot;(?&lt;unitid&gt;.*?)\&quot;&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> ( <span class="title function_ invoke__">preg_match_all</span>( <span class="variable">$pattern</span>, <span class="variable">$sContent</span>, <span class="variable">$match</span> ) )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$match</span>[<span class="string">&#x27;unitid&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>正则</category>
      </categories>
      <tags>
        <tag>实用代码</tag>
        <tag>正则</tag>
      </tags>
  </entry>
  <entry>
    <title>Edge 浏览器下载csv文件时文件名前后多了下划线</title>
    <url>/posts/23a75c66.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: _url,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: data,</span><br><span class="line">    <span class="attr">xhrFields</span>: &#123;</span><br><span class="line">        <span class="attr">responseType</span>: <span class="string">&quot;blob&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">beforeSend</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">add_loading</span>(<span class="literal">true</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">blob, status, xhr</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> filename = xhr.<span class="title function_">getResponseHeader</span>(<span class="string">&quot;Content-Disposition&quot;</span>).<span class="title function_">match</span>(<span class="regexp">/filename[^;=\n]*=(([&#x27;&quot;]).*?\2|[^;\n]*)/</span>)[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        a.<span class="property">href</span> = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line">        <span class="comment">// a.download = filename; </span></span><br><span class="line">        a.<span class="property">download</span> = filename.<span class="title function_">substring</span>(<span class="number">1</span>, filename.<span class="property">length</span> - <span class="number">1</span>); <span class="comment">// 修改后</span></span><br><span class="line">        a.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a);</span><br><span class="line">        a.<span class="title function_">click</span>();</span><br><span class="line">        <span class="keyword">delete</span> a;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">error</span>: <span class="keyword">function</span> (<span class="params">xhr, status, error</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Failed to download the CSV file:&quot;</span>, xhr.<span class="property">status</span>, xhr.<span class="property">responseText</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">add_loading</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>一开始在firefox运行成功，上了edge发现文件名前后各多了下划线，就很奇怪。</p>
<p>chat没有找到原因，就bing了，找到了<a href="https://blog.csdn.net/qq_41732963/article/details/122211939">https://blog.csdn.net/qq_41732963&#x2F;article&#x2F;details&#x2F;122211939</a>，解决方案就是删除filename前后各一个字符串。</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>正则匹配修饰符</title>
    <url>/posts/19933.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;frm_schedule[4][ForceArrangeInsideSeason]&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/frm_schedule\[(\d+?)\]\[(\w+?)\]/i</span>; <span class="comment">// #1</span></span><br><span class="line"><span class="keyword">if</span> (frmname = str.<span class="title function_">match</span>(regex)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;frmname&quot;</span>, frmname);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;parseInt(frmname[1])&quot;</span>, <span class="built_in">parseInt</span>(frmname[<span class="number">1</span>]));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>g</td>
<td>执行全局匹配（查找所有匹配而非是在找到第一个匹配时停止</td>
</tr>
<tr>
<td>m</td>
<td>执行多行匹配</td>
</tr>
<tr>
<td>i</td>
<td>执行对大小写不敏感的匹配</td>
</tr>
</tbody></table>
<p>其中，使用g的话，例中结果是</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// g:</span></span><br><span class="line"><span class="title class_">Array</span> [ <span class="string">&quot;frm_schedule[4][ForceArrangeInsideSeason]&quot;</span> ]</span><br><span class="line"><span class="comment">// 其他</span></span><br><span class="line"><span class="title class_">Array</span>(<span class="number">3</span>) [ <span class="string">&quot;frm_schedule[4][ForceArrangeInsideSeason]&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;ForceArrangeInsideSeason&quot;</span> ]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>正则</category>
      </categories>
      <tags>
        <tag>实用代码</tag>
        <tag>正则</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS实现背景图片中间的部分显示</title>
    <url>/posts/34303.html</url>
    <content><![CDATA[<p>具体而言就是透过一个小div来展示一个大图片中间部分的内容</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.game-image</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: center center ;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>img标签图片不存在时显示默认图片.md</title>
    <url>/posts/43448.html</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img_url&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;this.src=&#x27;default_url&#x27;;this.onerror=null;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意<code>this.onerror=null</code>,可以避免在default_url不存在的情况下,陷入无限循环中</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>原生js触发事件</title>
    <url>/posts/43624.html</url>
    <content><![CDATA[<p>遇到个视频在浏览器中不能播放的原因.后查询得知现在的chrome和safari不能直接播放带声音的声音<a href="https://m.huanqiu.com/r/MV8wXzk0Nzc2MDRfNjEyXzE0NzQ1OTMxODA=">苹果与谷歌移动浏览器添加视频自动播放功能</a></p>
<p>另附 <a href="http://www.zanmeishi.com/help/20.html">safari直接播放带音频的视频的配置方法</a></p>
<p>然后我就想着能不能利用jQuery中的trigger来实现视频音频自动播放</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bg-video&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;image/upload/video/weizhen.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span>点击播放按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">trigger</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;click&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> res =  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;bg-video&#x27;</span>).<span class="title function_">play</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">trigger</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(<span class="variable language_">document</span>.<span class="property">all</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="title function_">click</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> e = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&quot;MouseEvents&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            e.<span class="title function_">initEvent</span>(<span class="string">&quot;click&quot;</span>, <span class="literal">true</span>, <span class="literal">true</span>);<span class="comment">//这里的click可以换成你想触发的行为</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;test&quot;</span>).<span class="title function_">dispatchEvent</span>(e);<span class="comment">//这里的clickME可以换成你想触发行为的DOM结点</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可事实证明,这个投机方法是无用的.浏览器已经做了处理.依然必须要手动触发才行</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>伪类after设置图片</title>
    <url>/posts/31071.html</url>
    <content><![CDATA[<p>:after中的图片直接使用content引用时,我不知道如何控制图片大小.<br>所以就使用了背景图的方式实现需求.</p>
<p><img src="https://wx2.sinaimg.cn/mw1024/00784LeJly1fxdh5msa5dj30u01qg0xl.jpg" alt="示例图"></p>
<p>如图,右方的小勾使用after实现的,部分代码如下</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;village-list&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;village-item selected&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;village-name&quot;</span>&gt;</span>$&#123;name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;village-address&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>地址:<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>$&#123;address&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.village-list</span> <span class="selector-class">.village-item</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#F2F2F2</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.village-list</span> <span class="selector-class">.village-item</span><span class="selector-class">.selected</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">../../image/selected.png</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">10px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>WdatePicker设置最大最小日期</title>
    <url>/posts/62015.html</url>
    <content><![CDATA[<h1 id="WdatePicker设置最大最小日期"><a href="#WdatePicker设置最大最小日期" class="headerlink" title="WdatePicker设置最大最小日期"></a>WdatePicker设置最大最小日期</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">onclick=<span class="string">&quot;WdatePicker(&#123;maxDate:&#x27;#F&#123;$dp.$D(\&#x27;endTime\&#x27;)||\&#x27;new Date()\&#x27;&#125;&#x27;&#125;)&quot;</span></span><br><span class="line">onclick=<span class="string">&quot;WdatePicker(&#123;minDate:&#x27;#F&#123;$dp.$D(\&#x27;startTime\&#x27;)&#125;&#x27;,maxDate:new Date()&#125;)&quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js运用</tag>
        <tag>实用代码</tag>
      </tags>
  </entry>
  <entry>
    <title>伪类first-child失效</title>
    <url>/posts/54681.html</url>
    <content><![CDATA[<p>:first-child 这个伪类，只有当元素是其父元素的第一个子元素时才能匹配。即只有当对应元素是父元素的第一个子元素时该选择器才生效。</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>使用margin实现居中</title>
    <url>/posts/22465.html</url>
    <content><![CDATA[<p>PC端主要是考虑到可能不兼容flex布局,否则也不会使用这种方式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FF0000</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>解释下原理:</p>
<p>1.在普通内容流中，margin:auto的效果等同于margin-top:0;margin-bottom:0。</p>
<p>2.position:absolute使绝对定位块跳出了内容流，内容流中的其余部分渲染时绝对定位部分不进行渲染。</p>
<p>3.为块区域设置top: 0; left: 0; bottom: 0; right: 0;将给浏览器重新分配一个边界框，此时该块块将填充其父元素的所有可用空间，所以margin 垂直方向上有了可分配的空间。</p>
<p>4.再设置margin 垂直方向上下为auto，即可实现垂直居中。（注意高度得设置）。<br><a href="https://blog.csdn.net/linshizhan/article/details/71521140">参考资料</a></p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
</search>
